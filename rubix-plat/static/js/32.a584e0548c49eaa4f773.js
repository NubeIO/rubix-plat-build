(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{A8UK:function(t,e,r){"use strict";r.r(e);var a=r("Kz1y"),s=r.n(a),n=r("TcPG"),i=r.n(n),o=r("BgpN"),u=r("2SyR"),l=r("oujF"),c=r("CfmX"),m=r("ZXQ1"),d=r("oGAK"),f=r("97BG"),v={viewWriters:"viewWriters"},p=i()({},v.viewWriters,(function(t,e,r){return d.a.rfWriters.replace(":flowNetworkId",t).replace(":streamId",e).replace(":consumerId",r)})),h={name:"consumers-grid",components:{GenericGrid:c.a,ConsumersForm:o.a,IconButton:u.a,TextButton:l.a},props:["params","getDataCb"],data:function(){return{dialogNames:v,gridName:f.f,service:m.a,storeMutationKey:"changeRfConsumers",toolbarTitle:"Consumers",gridHeaders:[{text:"Name",align:"center",value:"name",sortable:!0},{text:"Actions",align:"center",value:"actions",sortable:!0}]}},computed:{streamId:function(){return this.$route.params.streamId},flowNetworkId:function(){return this.$route.params.flowNetworkId},stream:function(){return{uuid:this.params.uuid}}},methods:{redirectTo:function(t,e){var r=e.uuid;if(r){var a=p[t];"function"==typeof a&&this.$router.push({path:a(this.flowNetworkId,this.streamId,r)})}}}},b=r("psIG"),C=Object(b.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("generic-grid",{attrs:{gridName:t.gridName,isHeaderConfigurable:!0,params:t.params,service:t.service,headers:t.gridHeaders,getDataCb:t.getDataCb,toolbarTitle:t.toolbarTitle,storeMutationKey:t.storeMutationKey},scopedSlots:t._u([{key:"routeLinkName",fn:function(e){var a=e.item;return[r("text-button",{attrs:{text:a.name,onClick:function(){return t.redirectTo(t.dialogNames.viewWriters,a)}}})]}},{key:"createForm",fn:function(e){var a=e.onSave,s=e.onClose,n=e.isOpen,i=e.isSaving;return[n?r("consumers-form",{attrs:{stream:t.stream,isEdit:!1,onSave:a,onCancel:s,isSaving:i}}):t._e()]}},{key:"editForm",fn:function(e){var a=e.onSave,s=e.item,n=e.onClose,i=e.isOpen,o=e.isSaving;return[i?r("consumers-form",{attrs:{item:s,isEdit:!0,onSave:a,onCancel:n,isSaving:o}}):t._e()]}}])})],1)}),[],!1,null,null,null).exports,_=r("Ui9F"),g=r("VNy9"),w=(r("edSL"),{name:"consumers",components:{IconButton:u.a,ConsumersGrid:C,TooltipIconButton:_.a,Breadcrumbs:g.a},data:function(){return{params:{uuid:null,with_consumers:!0},gridData:{},breadcrumbItems:[]}},mounted:function(){this.params=s()({},this.params,{uuid:this.$route.params.streamId})},methods:{onBack:function(){this.$router.go(-1)},getDataCb:function(t){this.gridData=t,this.updateBreadCrumbs()},updateBreadCrumbs:function(){this.breadcrumbItems.push({text:"Flow Network Clone",align:"center",disabled:!0,link:d.a.rfFlowNetworkClone}),this.breadcrumbItems.push({text:this.$route.params.flowNetworkId,align:"center",disabled:!1}),this.breadcrumbItems.push({text:"Streams Clone",align:"center",disabled:!0,link:d.a.rfFlowNetworkStreamsClone.replace(":flowNetworkId",this.$route.params.flowNetworkId)}),this.breadcrumbItems.push({text:this.$route.params.streamId,align:"center",disabled:!1}),this.breadcrumbItems.push({text:"Consumers",align:"center",disabled:!0})}}}),x=Object(b.a)(w,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",[r("v-card-title",[r("v-btn",{staticClass:"mr-1",attrs:{icon:"",medium:""},on:{click:t.onBack}},[r("v-icon",{attrs:{medium:""}},[t._v(" mdi-arrow-left ")])],1),t._v("\n    Consumers\n  ")],1),t._v(" "),r("v-card-text",[r("breadcrumbs",{attrs:{items:t.breadcrumbItems}}),t._v(" "),r("v-row",{attrs:{"no-gutter":""}},[r("v-col",{attrs:{cols:"12",lg:"12",xl:"12",md:"12",sm:"12",xs:"12"}},[t.params.uuid?r("consumers-grid",{attrs:{params:t.params,getDataCb:t.getDataCb}}):t._e()],1)],1)],1)],1)}),[],!1,null,null,null);e.default=x.exports},BgpN:function(t,e,r){"use strict";var a=r("Kz1y"),s=r.n(a),n=r("yEOx"),i=r.n(n),o={name:"flow-consumers-form",props:["isEdit","onCancel","onSave","item","isSaving","stream"],data:function(){return{rules:{required:function(t){return!!t||"Required."},numberRule:function(t){return!isNaN(parseFloat(t))||"Required."}},valid:!1,formValues:s()({},{name:null,is_remote:!0,rubix_uuid:null,remote_rubix_uuid:null,producer_uuid:null})}},computed:{lowerCaseTitle:function(){return"consumers"},titleCase:function(){return"Consumers"},title:function(){return this.isEdit?"Edit "+this.titleCase:"Create "+this.titleCase},saveTitle:function(){return this.isEdit?"Save":"Create"},producers:function(){return this.$store.state.rfProducers}},mounted:function(){this.isEdit&&this.item&&(this.formValues=s()({},this.formValues,this.item)),!this.isEdit&&this.stream&&(this.formValues=s()({},this.formValues,{stream_uuid:this.stream.uuid}))},methods:{cleanUp:function(){this.formValues={},"function"==typeof this.onCancel&&this.onCancel()},formatConsumerData:function(t){var e=i()(t);if(e.producer_uuid){var r=this.producers.find((function(t){return t.uuid===e.producer_uuid}));e.producer_thing_uuid=r&&r.producer_thing_uuid||null}return e},onSubmit:function(){var t=this;if(this.$refs.form.validate()){if("function"!=typeof this.onSave)throw new Error(this.lowerCaseTitle+" form onSave function not passed");return this.onSave(this.formatConsumerData(this.formValues)).then((function(){t.$toasted.show("Successfully "+(t.isEdit?"updated":"created")+" "+t.lowerCaseTitle+"."),t.cleanUp(!0)})).catch((function(e){t.$toasted.show("Failed to "+(t.isEdit?"update":"create")+" "+t.lowerCaseTitle+".",{type:"error"})}))}}}},u=r("psIG"),l=Object(u.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[t._v(t._s(t.title))])]),t._v(" "),r("v-card-text",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-row",{attrs:{dense:""}},[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{required:"",label:"Name",rules:[t.rules.required]},model:{value:t.formValues.name,callback:function(e){t.$set(t.formValues,"name",e)},expression:"formValues.name"}})],1),t._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-autocomplete",{attrs:{chips:"",clearable:"","small-chips":"",label:"Producer","item-value":"uuid","item-text":"name",items:t.producers,"deletable-chips":""},model:{value:t.formValues.producer_uuid,callback:function(e){t.$set(t.formValues,"producer_uuid",e)},expression:"formValues.producer_uuid"}})],1)],1)],1)],1),t._v(" "),r("v-spacer"),t._v(" "),r("v-card-actions",{staticClass:"align-end justify-end"},[r("v-btn",{attrs:{color:"darken-1",text:""},on:{click:t.onCancel}},[t._v(" Cancel ")]),t._v(" "),r("v-btn",{attrs:{color:"blue darken-1",loading:t.isSaving,text:""},on:{click:function(e){return t.onSubmit(t.formValues)}}},[t._v(" "+t._s(t.saveTitle)+" ")])],1)],1)}),[],!1,null,null,null);e.a=l.exports},VNy9:function(t,e,r){"use strict";var a={name:"breadcrumbs",props:["items"]},s=r("psIG"),n=Object(s.a)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-breadcrumbs",{staticClass:"breadcrumbs",attrs:{items:t.items},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item;return[r("v-breadcrumbs-item",{staticClass:"breadcrumbs-item-text",attrs:{to:a.link,exact:""}},[t._v(" "+t._s(a.text)+" ")])]}}])})}),[],!1,null,"04244946",null);e.a=n.exports},ZXQ1:function(t,e,r){"use strict";r.d(e,"a",(function(){return x}));var a=r("tZmG"),s=r.n(a),n=r("YUSd"),i=r.n(n),o=r("Zv/C"),u=r.n(o),l=r("2lBV"),c=r.n(l),m=r("Dkg+"),d=r.n(m),f=r("Gjrs"),v=r.n(f),p=r("DeKB"),h=r("oCli"),b=r("uzYq"),C=r("PWxN"),_=r.n(C),g=r("NWgQ"),w=r.n(g),x=new(function(t){function e(){u()(this,e);var t=d()(this,(e.__proto__||i()(e)).call(this,h.a.rfConsumers));return t.fetch=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.uuid||t.id;if(!e)throw new Error("Stream Id is required for fetching consumers of streams");var r=h.a.rfStreamsClone(e);return(t=_()(t,["uuid","id"]))&&s()(t).length>0&&(r=r+"?"+w.a.stringify(t)),b.a.get(r).then((function(t){return{dataItems:t.consumers,extraData:_()(t,["consumers"])}}))},t}return v()(e,t),c()(e,[{key:"fetchAll",value:function(){var t=h.a.rfConsumers();return b.a.get(t)}}]),e}(p.a))},oujF:function(t,e,r){"use strict";var a={name:"text-button",props:["onClick","text"]},s=r("psIG"),n=Object(s.a)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-btn",{staticClass:"ma-1",attrs:{link:"",color:"nubeGreen",plain:""},on:{click:t.onClick}},[r("span",{staticClass:"btn-text"},[t._v(t._s(t.text))])])}),[],!1,null,null,null);e.a=n.exports}}]);
//# sourceMappingURL=32.a584e0548c49eaa4f773.js.map