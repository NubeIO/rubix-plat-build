(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{"+SqX":function(e,t,n){"use strict";var i={name:"page-title",props:["title"]},r=n("psIG"),a=Object(r.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h1",{staticClass:"text-h5 text-left py-3"},[n("span",[e._v(e._s(e.title))]),e._v(" "),e._t("refreshIcon"),e._v(" "),e._t("titleActions"),e._v(" "),e._t("spinner")],2)}),[],!1,null,null,null);t.a=a.exports},Ui9F:function(e,t,n){"use strict";var i={name:"tooltip-icon-button",props:["btnIcon","btnTooltip","onClick","btnColor","buttonSize","disabled"]},r=n("psIG"),a=Object(r.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return["medium"==e.buttonSize?n("v-btn",e._g(e._b({attrs:{disabled:e.disabled,icon:"",medium:"",color:e.btnColor},on:{click:e.onClick}},"v-btn",r,!1),i),[n("v-icon",{attrs:{medium:"",dark:""}},[e._v(" "+e._s(e.btnIcon)+" ")])],1):n("v-btn",e._g(e._b({attrs:{disabled:e.disabled,icon:"",small:"",color:e.btnColor},on:{click:e.onClick}},"v-btn",r,!1),i),[n("v-icon",{attrs:{small:"",dark:""}},[e._v(" "+e._s(e.btnIcon)+" ")])],1)]}}])},[e._v(" "),n("span",{staticStyle:{"white-space":"pre-line"},domProps:{innerHTML:e._s(e.btnTooltip)}})])}),[],!1,null,null,null);t.a=a.exports},ZAOQ:function(e,t,n){"use strict";n.r(t);var i=n("Kz1y"),r=n.n(i),a=n("/9Wh"),o=n.n(a),l=n("06Hw"),s=n.n(l),c=n("t3kO"),u=n.n(c),d=n("OBCi"),v=n.n(d),p=n("YYXh"),f=n.n(p),h=n("+n12"),m=n("VleD"),b=n("uzYq"),k=n("czhI"),_=n.n(k),g=n("idCO"),x=n.n(g),w=n("05qM"),y=n.n(w),C=n("+SqX"),F=n("Ui9F"),D={components:{FileUpload:x.a,VJsoneditor:y.a,PageTitle:C.a,TooltipIconButton:F.a},data:function(){return{editorDialog:!1,dialog:!1,isJson:!1,newName:"",fileContent:"Click File name to edit",renameDialog:!1,fileHeaders:{Authorization:"Bearer "+m.b("token")},directory:!1,unZipping:!1,action:"",currentItem:{},apiUrl:Object(h.j)()+"/api",files:[],uploadFiles:[],successCount:0,dirs:[{text:"...",level:0}],selected:[],headers:[{text:"Name",align:"start",sortable:!1,value:"name"},{text:"Ext",value:"ext"},{text:"Size",value:"size"},{text:"Created Date",value:"ctime"},{text:"Tools",value:"tools"}],uploadHeaders:[{text:"Name",align:"start",sortable:!1,value:"name"},{text:"Size",value:"size"},{text:"Tools",value:"tools"}]}},mounted:function(){this.getFiles()},methods:{clickBackupMultiple:function(){var e=this;return f()(s.a.mark((function t(){var n,i,r,a,o,l,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=[],i=!0,r=!1,a=void 0,t.prev=4,o=u()(e.selected);!(i=(l=o.next()).done);i=!0)c=l.value,e.currentItem=c,n.push(e.backupSingle());t.next=12;break;case 8:t.prev=8,t.t0=t.catch(4),r=!0,a=t.t0;case 12:t.prev=12,t.prev=13,!i&&o.return&&o.return();case 15:if(t.prev=15,!r){t.next=18;break}throw a;case 18:return t.finish(15);case 19:return t.finish(12);case 20:return t.next=22,v.a.all(n);case 22:return t.next=24,e.getFiles();case 24:e.$toasted.show("Backup success!"),e.selected=[];case 26:case"end":return t.stop()}}),t,e,[[4,8,12,20],[13,,15,19]])})))()},backupSingle:function(){return b.a.post("file/backup",{fileName:this.currentItem.name,path:this.getDir()})},onSaveFileContent:function(){var e=this,t=this.getDir()+"/"+this.currentItem.name,n=this.fileContent;this.isJson&&(n=o()(n)),b.a.post("file/update-content",{content:n,path:t}).then((function(t){e.editorDialog=!1,e.$toasted.show("Success!"),e.getFiles()}))},clickEditFile:function(e){var t=this;this.currentItem=r()({},e);var n=this.getDir()+"/"+e.name;b.a.get("file/get-content",{params:{path:n}}).then((function(e){if(Object(h.m)(e))return t.$toasted.show("This is not json file",{type:"error"}),void(t.editorDialog=!1);try{t.fileContent=JSON.parse(e),t.isJson=!0}catch(n){t.fileContent=e,t.isJson=!1}t.editorDialog=!0}))},clickDownload:function(e){var t=this;return f()(s.a.mark((function n(){var i,r,a,o,l,c,u,d,v,p,f,k;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.getDir()+"/"+e,r=m.b("token"),n.next=4,_.a.get(Object(h.j)()+"/api/file/download?path="+i,{responseType:"blob",headers:{Authorization:"Bearer "+r}});case 4:if(a=n.sent,o=a.headers,l=a.data,c=o["content-disposition"],u=c.substring(22,c.length-1),d=!1,!u.includes("temp-")){n.next=14;break}return d=!0,v=t.getDir()+"/"+u,n.next=14,b.a.delete("file?path="+v);case 14:p=new Blob([l]),f=window.URL.createObjectURL(p),(k=document.createElement("a")).style.display="none",k.href=f,k.download=d?e+".zip":e,document.body.appendChild(k),k.click(),window.URL.revokeObjectURL(f);case 23:case"end":return n.stop()}}),n,t)})))()},rename:function(){var e=this;return f()(s.a.mark((function t(){var n,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===e.newName){t.next=8;break}return n=e.getDir()+"/"+e.currentItem.name,i=e.getDir()+"/"+e.newName,t.next=5,b.a.post("file/rename",{oldPath:n,newPath:i});case 5:e.renameDialog=!1,e.newName="",e.getFiles();case 8:case"end":return t.stop()}}),t,e)})))()},clickUnzip:function(e){var t=this;return f()(s.a.mark((function n(){var i;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.unZipping=!0,i=t.getDir()+"/"+e,n.next=4,b.a.post("file/un-zip?path="+i,{});case 4:t.$toasted.show("Extract file success!"),t.unZipping=!1,t.getFiles();case 7:case"end":return n.stop()}}),n,t)})))()},clickRename:function(e){this.renameDialog=!0,this.currentItem=e,this.newName=e.name},removeUploadFile:function(e){for(var t=[],n=0;n<this.uploadFiles.length;n++)this.uploadFiles[n].id!==e&&t.push(this.uploadFiles[n]);this.uploadFiles=t},clickUploadFolder:function(){var e=this,t=this.$refs.upload.$el.querySelector("input");t.directory=!0,t.webkitdirectory=!0,this.directory=!0,t.onclick=null,t.click(),t.onclick=function(n){e.directory=!1,t.directory=!1,t.webkitdirectory=!1}},clickUploadFiles:function(){var e=this,t=this.$refs.upload.$el.querySelector("input");t.directory=!1,t.webkitdirectory=!1,this.directory=!1,t.onclick=null,t.click(),t.onclick=function(n){e.directory=!0,t.directory=!0,t.webkitdirectory=!0}},inputFile:function(e,t,n){if(e&&e.active&&!t.active){var i=this.getDir();""!==i&&(i+="--");var r=i+e.name.replaceAll("/","--");this.$refs.upload.update(e,{name:r})}e&&t&&e.success&&!t.success&&(this.successCount++,this.successCount===this.uploadFiles.length&&(this.uploadFiles=[],this.successCount=0,this.getFiles()))},clickBreadcrumb:function(e){if(this.dirs[this.dirs.length-1].level!==e.level){for(var t=[],n=0;n<=e.level;n++)t.push(this.dirs[n]);this.dirs=t,this.getFiles()}},clickDeleteMulti:function(){var e=this;return f()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dialog=!0,e.action="deleteSelected";case 2:case"end":return t.stop()}}),t,e)})))()},deleteSelected:function(){var e=this;return f()(s.a.mark((function t(){var n,i,r,a,o,l,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=[],i=!0,r=!1,a=void 0,t.prev=4,o=u()(e.selected);!(i=(l=o.next()).done);i=!0)c=l.value,e.currentItem=c,n.push(e.deleteSingle());t.next=12;break;case 8:t.prev=8,t.t0=t.catch(4),r=!0,a=t.t0;case 12:t.prev=12,t.prev=13,!i&&o.return&&o.return();case 15:if(t.prev=15,!r){t.next=18;break}throw a;case 18:return t.finish(15);case 19:return t.finish(12);case 20:return t.next=22,v.a.all(n);case 22:e.$toasted.show("Delete success!"),e.selected=[];case 24:case"end":return t.stop()}}),t,e,[[4,8,12,20],[13,,15,19]])})))()},confirm:function(){var e=this;return f()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e[e.action]();case 2:e.dialog=!1,e.action="",e.getFiles();case 5:case"end":return t.stop()}}),t,e)})))()},clickDelete:function(e){var t=this;return f()(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.dialog=!0,t.action="deleteSingle",t.currentItem=e;case 3:case"end":return n.stop()}}),n,t)})))()},deleteSingle:function(){var e=this;return f()(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getDir()+"/"+e.currentItem.name,t.next=3,b.a.delete("file?path="+n);case 3:e.$toasted.show("Delete success!");case 4:case"end":return t.stop()}}),t,e)})))()},clickName:function(e){if(e.isDir){var t=this.dirs.length;this.dirs.push({text:e.name,level:t}),this.getFiles()}},getDir:function(){var e="",t=!0,n=!1,i=void 0;try{for(var r,a=u()(this.dirs);!(t=(r=a.next()).done);t=!0){var o=r.value;0!==o.level&&(e+="/"+o.text)}}catch(e){n=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw i}}return e},getFiles:function(){var e=this;return f()(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get("file?dir="+e.getDir());case 2:n=t.sent,e.files=n.map((function(e,t){return r()({},e,{index:t})}));case 4:case"end":return t.stop()}}),t,e)})))()}}},S=n("psIG"),I=Object(S.a)(D,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("page-title",{attrs:{title:"File Manager"}}),e._v(" "),n("v-data-table",{attrs:{headers:e.headers,"item-key":"index",items:e.files,"single-select":!1,"show-select":""},scopedSlots:e._u([{key:"item.ext",fn:function(t){var n=t.item;return[e._v("\n      "+e._s(n.isDir?"Folder":n.ext)+"\n    ")]}},{key:"item.ctime",fn:function(t){var n=t.item;return[e._v("\n      "+e._s(e._f("timezone")(n.ctime))+"\n    ")]}},{key:"item.name",fn:function(t){var i=t.item;return[n("div",{staticStyle:{cursor:"pointer"},on:{click:function(){return e.clickName(i)}}},[e._v(e._s(i.name))])]}},{key:"item.tools",fn:function(t){var i=t.item;return[n("tooltip-icon-button",{attrs:{btnColor:"downloadColor",btnIcon:"fa-download",buttonSize:"small",btnTooltip:"Download",onClick:function(){return e.clickDownload(i.name)}}}),e._v(" "),n("tooltip-icon-button",{attrs:{btnColor:"error",btnIcon:"fa-trash-o",buttonSize:"small",btnTooltip:"Delete",onClick:function(){return e.clickDelete(i)}}}),e._v(" "),n("tooltip-icon-button",{attrs:{btnColor:"nubeGreen",btnIcon:"fa-edit",buttonSize:"small",btnTooltip:"Rename",onClick:function(){return e.clickRename(i)}}}),e._v(" "),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,a=t.attrs;return[".zip"===i.ext?n("v-btn",e._g(e._b({attrs:{loading:e.unZipping,disabled:e.unZipping,color:"primary",icon:"",small:""},on:{click:function(){return e.clickUnzip(i.name)}}},"v-btn",a,!1),r),[n("v-icon",{attrs:{small:""}},[e._v("fa-inbox")])],1):e._e()]}}],null,!0)},[e._v(" "),n("span",[e._v("Unzip")])]),e._v(" "),i.isDir?e._e():n("tooltip-icon-button",{attrs:{btnColor:"blue",btnIcon:"fa-eye",buttonSize:"small",btnTooltip:"Edit File",onClick:function(){return e.clickEditFile(i)}}})]}},{key:"top",fn:function(){return[n("v-breadcrumbs",{attrs:{items:e.dirs,divider:"/"},scopedSlots:e._u([{key:"item",fn:function(t){var i=t.item;return n("v-breadcrumbs-item",{key:i.level,staticStyle:{cursor:"pointer"},nativeOn:{click:function(t){return e.clickBreadcrumb(i)}}},[e._v("\n          "+e._s(i.text)+"\n        ")])}}])}),e._v(" "),n("div",{staticClass:"text-left pa-2"},[n("v-btn",{staticClass:"btn-height-22 white--text",attrs:{"x-small":"",color:"error",disabled:0===e.selected.length},on:{click:e.clickDeleteMulti}},[e._v("Delete"),n("v-icon",{attrs:{"x-small":"",right:""}},[e._v("fa-trash-o")])],1),e._v(" "),n("file-upload",{ref:"upload",attrs:{headers:e.fileHeaders,multiple:!0,"post-action":e.apiUrl+"/file",directory:e.directory},on:{"input-file":e.inputFile},model:{value:e.uploadFiles,callback:function(t){e.uploadFiles=t},expression:"uploadFiles"}}),e._v(" "),n("v-btn",{staticClass:"mr-1 btn-height-22 white--text",attrs:{"x-small":"",color:"blue-grey"},on:{click:function(t){return t.preventDefault(),e.clickUploadFolder(t)}}},[e._v("Upload folder"),n("v-icon",{attrs:{"x-small":"",right:""}},[e._v("fa-cloud-upload")])],1),e._v(" "),n("v-btn",{staticClass:"mr-1 btn-height-22 white--text",attrs:{"x-small":"",color:"blue-grey"},on:{click:function(t){return t.preventDefault(),e.clickUploadFiles(t)}}},[e._v("Upload files"),n("v-icon",{attrs:{"x-small":"",right:""}},[e._v(" fa-cloud-upload ")])],1),e._v(" "),n("v-btn",{staticClass:"mr-1 btn-height-22 white--text",attrs:{"x-small":"",color:"blue",disabled:0===e.selected.length},on:{click:e.clickBackupMultiple}},[e._v("Backup"),n("v-icon",{attrs:{"x-small":"",right:""}},[e._v("fa-hdd-o")])],1)],1)]},proxy:!0}],null,!0),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),e._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("\n        Confirm?\n      ")]),e._v(" "),n("v-card-text",[e._v("Are you sure?")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"nubeGreen",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("No")]),e._v(" "),n("v-btn",{attrs:{color:"red",text:""},on:{click:e.confirm}},[e._v("Yes")])],1)],1)],1),e._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.renameDialog,callback:function(t){e.renameDialog=t},expression:"renameDialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Rename")])]),e._v(" "),n("v-card-text",[n("v-container",[n("v-text-field",{attrs:{label:"New name",required:""},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}})],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{text:""},on:{click:function(t){e.renameDialog=!1}}},[e._v("Close")]),e._v(" "),n("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){return e.rename()}}},[e._v("Save")])],1)],1)],1),e._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":"600"},model:{value:e.uploadFiles.length>0,callback:function(t){e.$set(e.uploadFiles,"length > 0",t)},expression:"uploadFiles.length > 0"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Upload "+e._s(e.uploadFiles.length)+" Files")]),e._v(" "),n("v-card-text",[n("v-container",[n("v-data-table",{attrs:{headers:e.uploadHeaders,"item-key":"id",items:e.uploadFiles},scopedSlots:e._u([{key:"item.name",fn:function(t){var i=t.item;return[n("div",[e._v(e._s(i.name))]),e._v(" "),i.active||"0.00"!==i.progress?n("v-progress-linear",{attrs:{color:"blue-grey",height:"10"},scopedSlots:e._u([{key:"default",fn:function(t){t.value;return[n("strong",[e._v(e._s(Math.ceil(i.progress))+"%")])]}}],null,!0),model:{value:i.progress,callback:function(t){e.$set(i,"progress",t)},expression:"item.progress"}}):e._e()]}},{key:"item.tools",fn:function(t){var i=t.item;return[n("v-btn",{attrs:{icon:"",small:"",color:"error"},on:{click:function(){return e.removeUploadFile(i.id)}}},[n("v-icon",{attrs:{small:""}},[e._v("fa-trash-o")])],1)]}}],null,!0)})],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{text:""},on:{click:function(t){e.uploadFiles=[]}}},[e._v("Cancel")]),e._v(" "),n("v-btn",{attrs:{color:"nubeGreen",text:"",disabled:0===e.uploadFiles.length},on:{click:function(t){t.preventDefault(),e.$refs.upload.active=!0}}},[e._v("Upload")])],1)],1)],1),e._v(" "),n("v-dialog",{attrs:{"max-width":"600"},model:{value:e.editorDialog,callback:function(t){e.editorDialog=t},expression:"editorDialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Edit data")])]),e._v(" "),n("v-card-text",[n("v-container",[e.isJson?n("v-jsoneditor",{attrs:{options:{mode:"code"},plus:!1,height:"400px"},model:{value:e.fileContent,callback:function(t){e.fileContent=t},expression:"fileContent"}}):e._e(),e._v(" "),e.isJson?e._e():n("v-textarea",{attrs:{outlined:"",name:"input-7-4",label:"import data"},model:{value:e.fileContent,callback:function(t){e.fileContent=t},expression:"fileContent"}})],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{text:""},on:{click:function(t){e.editorDialog=!1}}},[e._v("Close")]),e._v(" "),n("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){return e.onSaveFileContent()}}},[e._v("Save")])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=I.exports}}]);
//# sourceMappingURL=59.a12c86e4a2c4df827162.js.map