(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{"+SqX":function(e,t,s){"use strict";var r={name:"page-title",props:["title"]},n=s("psIG"),a=Object(n.a)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h1",{staticClass:"text-h5 text-left py-3"},[s("span",[e._v(e._s(e.title))]),e._t("titleActions"),e._v(" "),e._t("spinner")],2)}),[],!1,null,null,null);t.a=a.exports},UMWO:function(e,t,s){"use strict";s.r(t);var r=s("06Hw"),n=s.n(r),a=s("YYXh"),i=s.n(a),c=s("uzYq"),o=s("A5Vd"),l={components:{PageTitle:s("+SqX").a},data:function(){return{e1:1,releases:[],serviceStatus:{},selectedId:"",selectedRelease:{author:{}},overlay:!1,service:{}}},mounted:function(){var e=this.$route.params.id;this.getService(e)},computed:{installedService:function(){var e=this,t=this.$store.state.installedServices,s=o.l.find((function(t){return t.id===e.service.name}));return t.find((function(e){return e.service===s.fileName}))}},methods:{getService:function(e){var t=this;return i()(n.a.mark((function s(){var r;return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,c.a.get("service/"+e);case 2:r=s.sent,t.service=r,t.getReleaseList(),t.getServiceStatus();case 6:case"end":return s.stop()}}),s,t)})))()},install:function(){var e=this;return i()(n.a.mark((function t(){var s;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$store.commit("changeLoading",!0),s={service:e.service.name,version:e.selectedRelease.tag_name},c.a.post("rubix-service/install-service",s).then((function(t){e.$store.commit("changeLoading",!1),e.$toasted.show("Install completed"),e.e1=5}));case 3:case"end":return t.stop()}}),t,e)})))()},download:function(){var e=this;return i()(n.a.mark((function t(){var s;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$store.commit("changeLoading",!0),s={service:e.service.name,version:e.selectedRelease.tag_name},c.a.post("rubix-service/download-service",s).then((function(t){e.$toasted.show("Download completed"),e.$store.commit("changeLoading",!1),e.e1=4}));case 3:case"end":return t.stop()}}),t,e)})))()},getServiceStatus:function(){var e=this;return i()(n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$store.commit("changeLoading",!0),c.a.get("rubix-service/up-service/"+e.service.name).then((function(t){e.$store.commit("changeLoading",!1),e.serviceStatus=t}));case 2:case"end":return t.stop()}}),t,e)})))()},stopService:function(){var e=this;return i()(n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.serviceStatus.status){t.next=3;break}return e.e1=3,t.abrupt("return");case 3:return t.next=5,e.callService("stop");case 5:e.e1=3;case 6:case"end":return t.stop()}}),t,e)})))()},callService:function(e){var t=this;return i()(n.a.mark((function s(){return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:t.$store.commit("changeLoading",!0),c.a.post("rubix-service/call-service",{action:e,service:t.service.name}).then((function(s){t.$store.commit("changeLoading",!1),t.$toasted.show(e+" success!")}));case 2:case"end":return s.stop()}}),s,t)})))()},getReleaseList:function(){var e=this;this.$http.get(this.service.releaseUrl).then((function(t){var s=t.data,r=s;e.service.fromVersion&&(r=s.filter((function(t){return t.tag_name>=e.service.fromVersion}))),e.releases=r,e.selectedId=e.releases[0].id,e.selectedRelease=e.releases[0]}))},clickContinueAtStep1:function(){this.e1=this.service.stopRunningService?3:2},clickBackAtStep3:function(){this.e1=this.service.stopRunningService?1:2}},watch:{selectedId:function(e,t){this.selectedRelease=this.releases.find((function(t){return t.id===e}))},"$route.params.id":function(e,t){this.getService(e),this.e1=1}}},v=s("psIG"),u=Object(v.a)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("page-title",{attrs:{title:"UPDATE SERVICE - "+e.service.name}}),e._v(" "),s("v-stepper",{model:{value:e.e1,callback:function(t){e.e1=t},expression:"e1"}},[s("v-stepper-header",[s("v-stepper-step",{attrs:{complete:e.e1>1,step:"1"}},[e._v("Release version")]),e._v(" "),s("v-divider"),e._v(" "),e.service.stopRunningService?e._e():s("v-stepper-step",{attrs:{complete:e.e1>2,step:"2"}},[e._v("Service status")]),e._v(" "),e.service.stopRunningService?s("v-stepper-step",{attrs:{rules:[function(){return!1}],step:"2"}},[e._v("\n        Service status\n        "),s("small",[e._v("Stop running service")])]):e._e(),e._v(" "),s("v-divider"),e._v(" "),s("v-stepper-step",{attrs:{complete:e.e1>3,step:"3"}},[e._v("Download")]),e._v(" "),s("v-divider"),e._v(" "),s("v-stepper-step",{attrs:{complete:e.e1>4,step:"4"}},[e._v("Install")]),e._v(" "),s("v-divider"),e._v(" "),s("v-stepper-step",{attrs:{complete:e.e1>5,step:"5"}},[e._v("Start")])],1),e._v(" "),s("v-stepper-items",[s("v-stepper-content",{attrs:{step:"1"}},[s("v-radio-group",{model:{value:e.selectedId,callback:function(t){e.selectedId=t},expression:"selectedId"}},e._l(e.releases,(function(e){return s("v-radio",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),e._v(" "),s("v-btn",{staticClass:"mr-1 btn-height-22 white--text",attrs:{"x-small":"",color:"primary"},on:{click:e.clickContinueAtStep1}},[e._v(" Continue ")])],1),e._v(" "),s("v-stepper-content",{attrs:{step:"2"}},[s("div",{staticStyle:{"text-align":"left"}},[e._v("\n          Service: "+e._s(e.service.name)+" "),s("br"),e._v("\n          Status: "+e._s(e.serviceStatus.status?"Running":"Stopped")+" "),s("br"),e._v("\n          Current Version: "+e._s(e.installedService?e.installedService.version:"Not Installed")+" "),s("br")]),e._v(" "),s("v-btn",{staticClass:"mr-1 btn-height-22 white--text",attrs:{"x-small":"",color:"secondary"},on:{click:function(t){e.e1=1}}},[e._v("Back")]),e._v(" "),s("v-btn",{staticClass:"mr-1 btn-height-22 white--text",attrs:{"x-small":"",color:"nubeGreen"},on:{click:e.getServiceStatus}},[e._v("Reload")]),e._v(" "),s("v-btn",{staticClass:"mr-1 btn-height-22 white--text",attrs:{"x-small":"",color:"primary"},on:{click:function(t){return e.stopService()}}},[e._v("Continue")])],1),e._v(" "),s("v-stepper-content",{attrs:{step:"3"}},[s("div",{staticStyle:{"text-align":"left"}},[e._v("\n          Name: "),s("a",{attrs:{target:"_blank",href:e.selectedRelease.html_url}},[e._v(e._s(e.selectedRelease.name))]),e._v(" "),s("br"),e._v("\n          Author: "),s("strong",[e._v(e._s(e.selectedRelease.author.login))]),e._v(" "),s("br"),e._v("\n          Created at: "+e._s(e._f("timezone")(e.selectedRelease.created_at))+" "),s("br"),e._v(" "),s("a",{attrs:{target:"_blank",href:e.selectedRelease.zipball_url}},[e._v("Source code (zip)")]),e._v(" "),s("br"),e._v(" "),s("a",{attrs:{target:"_blank",href:e.selectedRelease.tarball_url}},[e._v("Source code (tar.gz)")]),e._v(" "),s("br")]),e._v(" "),s("v-btn",{staticClass:"mr-1 btn-height-22 white--text",attrs:{"x-small":"",color:"secondary"},on:{click:e.clickBackAtStep3}},[e._v(" Back ")]),e._v(" "),s("v-btn",{staticClass:"mr-1 btn-height-22 white--text",attrs:{"x-small":"",color:"downloadColor"},on:{click:e.download}},[e._v(" Download ")])],1),e._v(" "),s("v-stepper-content",{attrs:{step:"4"}},[s("div",{staticStyle:{"text-align":"left"}},[e._v("Install Service")]),e._v(" "),s("v-btn",{staticClass:"mr-1 btn-height-22 white--text",attrs:{"x-small":"",color:"secondary"},on:{click:function(t){e.e1=3}}},[e._v(" Back ")]),e._v(" "),s("v-btn",{staticClass:"mr-1 btn-height-22 white--text",attrs:{"x-small":"",color:"primary"},on:{click:e.install}},[e._v(" Install ")])],1),e._v(" "),s("v-stepper-content",{attrs:{step:"5"}},[s("div",{staticStyle:{"text-align":"left"}},[e._v("Start Service")]),e._v(" "),s("v-btn",{staticClass:"mr-1 btn-height-22 white--text",attrs:{"x-small":"",color:"secondary"},on:{click:function(t){e.e1=4}}},[e._v(" Back ")]),e._v(" "),s("v-btn",{staticClass:"mr-1 btn-height-22 white--text",attrs:{"x-small":"",color:"primary"},on:{click:function(t){return e.callService("start")}}},[e._v(" Start ")])],1)],1)],1),e._v(" "),s("v-overlay",{attrs:{value:e.overlay}},[s("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)],1)}),[],!1,null,null,null);t.default=u.exports}}]);
//# sourceMappingURL=62.8fcf0d983faca90f405a.js.map