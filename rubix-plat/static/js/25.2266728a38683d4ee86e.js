(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"+SqX":function(t,e,n){"use strict";var a={name:"page-title",props:["title"]},s=n("psIG"),r=Object(s.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",{staticClass:"text-h5 text-left py-3"},[n("span",[t._v(t._s(t.title))]),t._v(" "),t._t("refreshIcon"),t._v(" "),t._t("titleActions"),t._v(" "),t._t("spinner")],2)}),[],!1,null,null,null);e.a=r.exports},"0iKi":function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return l})),n.d(e,"e",(function(){return c})),n.d(e,"d",(function(){return u})),n.d(e,"f",(function(){return d})),n.d(e,"b",(function(){return p}));var a=n("OBCi"),s=n.n(a),r=n("uzYq"),i="/slave-devices",o=function(t){var e={global_uuid:t.global_uuid};return r.a.post(i,e)},l=function(t){return s.a.all(t.map((function(t){return o(t)})))},c=function(){return r.a.get(i)},u=function(){return r.a.get(i+"/discover")},d=function(t){var e=t.global_uuid;return r.a.delete(i+"/"+e)},p=function(t){return s.a.all(t.map((function(t){return d(t)})))}},MKDl:function(t,e,n){"use strict";var a={active:{name:"active",displayName:"Running",outlined:!0,color:"exportColor"},reloading:{name:"reloading",outlined:!0,displayName:"Reloading",color:"nubeYellow"},failed:{name:"failed",outlined:!0,displayName:"Failed",color:"red"},activating:{name:"activating",outlined:!0,displayName:"Activating",color:"nubeYellow"},deactivating:{outlined:!0,name:"deactivating",displayName:"Deactivating",color:"nubeYellow"},maintenance:{name:"maintenance",outlined:!0,displayName:"Maintenance",color:"nubeYellow"},STARTED:{name:"STARTED",outlined:!0,displayName:"Started",color:"blue"},RUNNING:{name:"RUNNING",outlined:!0,displayName:"Running",color:"nubeYellow"},FINISHED:{name:"FINISHED",outlined:!0,displayName:"Finished",color:"nubeGreen"},BROKEN:{name:"BROKEN",outlined:!0,displayName:"Broken",color:"red"},MAPPED:{name:"MAPPED",outlined:!0,displayName:"Mapped",color:"nubeGreen"},INTEGRATED:{name:"INTEGRATED",outlined:!1,displayName:"Integrated",color:"nubeGreen"},UNINTEGRATED:{name:"UNINTEGRATED",outlined:!1,displayName:"Not Integrated",color:"red"}},s={name:"app-status-chip",props:["status","state","chipSize"],computed:{currentStatus:function(){var t=a[this.state];return t||{name:"default",displayName:this.capitalize(this.state),color:"nubeYellow"}},defaultStatus:function(){return this.capitalize(this.state)}},methods:{capitalize:function(t){return t||(t=""),(t=String(t)).charAt(0).toUpperCase()+t.slice(1)}}},r=n("psIG"),i=Object(r.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.state?n("div",[n("span",{staticClass:"font-weight-medium"},[t.chipSize&&"small"===t.chipSize?n("v-chip",{attrs:{small:"",outlined:"",color:t.currentStatus.color}},[t._v(t._s(t.currentStatus.displayName))]):n("v-chip",{attrs:{outlined:"",color:t.currentStatus.color}},[t._v(t._s(t.currentStatus.displayName))])],1)]):n("div",[n("span",{staticClass:"font-weight-medium"},[t.chipSize&&"small"===t.chipSize?n("v-chip",{attrs:{small:"",outlined:"",color:t.currentStatus.color}},[t._v(t._s(t.defaultStatus))]):n("v-chip",{attrs:{outlined:"",color:t.currentStatus.color}},[t._v(t._s(t.defaultStatus))])],1)])])}),[],!1,null,null,null);e.a=i.exports},N4QW:function(t,e,n){"use strict";n.r(e),n.d(e,"fetchPlatInfo",(function(){return r})),n.d(e,"fetchStatus",(function(){return i})),n.d(e,"upgradeLatest",(function(){return o})),n.d(e,"upgrade",(function(){return l})),n.d(e,"fetchReleases",(function(){return c})),n.d(e,"updateToken",(function(){return u})),n.d(e,"fetchTokenHint",(function(){return d})),n.d(e,"upgradeViaFile",(function(){return p})),n.d(e,"fetchAppUrl",(function(){return f})),n.d(e,"createRestartJob",(function(){return v})),n.d(e,"deleteRestartJob",(function(){return m}));var a=n("uzYq"),s="/rubix-service",r=function(){return a.a.get(s+"/plat")},i=function(){return a.a.get(s+"/status")},o=function(){return a.a.put(s+"/upgrade",{version:"latest"})},l=function(t){return a.a.put(s+"/upgrade",{version:t})},c=function(){return a.a.get(s+"/releases")},u=function(t){return a.a.post(s+"/token",{token:t})},d=function(){return a.a.get(s+"/token-hint")},p=function(t,e){var n=new FormData;return n.append("upgradeFile",e),n.append("version",t),a.a.post(s+"/upload-upgrade",n,{headers:{"Content-Type":"multipart/form-data"}})},f=function(){return a.a.get(s+"/app-url")},v=function(t){return a.a.post(s+"/restart-job",[t])},m=function(t){return a.a.delete(s+"/restart-job",{data:[t]})}},Ui9F:function(t,e,n){"use strict";var a={name:"tooltip-icon-button",props:["btnIcon","btnTooltip","onClick","btnColor","buttonSize","disabled"]},s=n("psIG"),r=Object(s.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,s=e.attrs;return["medium"==t.buttonSize?n("v-btn",t._g(t._b({attrs:{disabled:t.disabled,icon:"",medium:"",color:t.btnColor},on:{click:t.onClick}},"v-btn",s,!1),a),[n("v-icon",{attrs:{medium:"",dark:""}},[t._v(" "+t._s(t.btnIcon)+" ")])],1):n("v-btn",t._g(t._b({attrs:{disabled:t.disabled,icon:"",small:"",color:t.btnColor},on:{click:t.onClick}},"v-btn",s,!1),a),[n("v-icon",{attrs:{small:"",dark:""}},[t._v(" "+t._s(t.btnIcon)+" ")])],1)]}}])},[t._v(" "),n("span",{staticStyle:{"white-space":"pre-line"},domProps:{innerHTML:t._s(t.btnTooltip)}})])}),[],!1,null,null,null);e.a=r.exports},"Wgf/":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i}));var a=n("uzYq"),s="/system-service",r=function(){return a.a.get(s)},i=function(t,e){return a.a.post(s+"/control",[{action:t,service:e}])}},Zepl:function(t,e,n){"use strict";e.a={required:function(t){return!!t||"Required"},number:function(t){return!function(t){return isNaN(+t)}(t)||"Value should be a number"},isIpAddress:function(t){return!(!/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e=t)&&!/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/g.test(e)&&"localhost"!==(""+e).toLowerCase())||"Invalid IP Address";var e},isJsonString:function(t){return function(t){try{JSON.parse(t)}catch(t){return!1}return!0}(t)||"Data should be in a valid JSON format"}}},asQ9:function(t,e,n){"use strict";var a={name:"master-star-indicator",props:["isMaster"]},s=n("psIG"),r=Object(s.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,s=e.attrs;return[t.isMaster?n("v-icon",t._g(t._b({staticClass:"mt-n1",attrs:{medium:"",color:"nubeYellow"}},"v-icon",s,!1),a),[t._v("mdi-star")]):t._e()]}}])},[t._v(" "),n("span",[t._v("Master device")])])}),[],!1,null,null,null);e.a=r.exports},nz6T:function(t,e,n){"use strict";n.r(e),n.d(e,"fetchApps",(function(){return A})),n.d(e,"fetchAllApps",(function(){return k})),n.d(e,"fetchAllInstalledApps",(function(){return x})),n.d(e,"fetchSystemDefaultApps",(function(){return S})),n.d(e,"fetchAppReleases",(function(){return C})),n.d(e,"fetchAppsReleases",(function(){return T})),n.d(e,"fetchAppStatus",(function(){return w})),n.d(e,"uninstallApp",(function(){return N})),n.d(e,"installApp",(function(){return y})),n.d(e,"downloadApp",(function(){return I})),n.d(e,"changeServiceStatus",(function(){return P})),n.d(e,"uploadApp",(function(){return L})),n.d(e,"deleteAppData",(function(){return D})),n.d(e,"deleteAppDataService",(function(){return R})),n.d(e,"downloadAppData",(function(){return E})),n.d(e,"fetchJSONConfig",(function(){return G})),n.d(e,"fetchOpenVPNConfig",(function(){return O})),n.d(e,"fetchEnvConfig",(function(){return z})),n.d(e,"fetchAppConfig",(function(){return F})),n.d(e,"saveJSONConfig",(function(){return V})),n.d(e,"saveENVConfig",(function(){return j})),n.d(e,"saveOpenVPNConfig",(function(){return U})),n.d(e,"saveAppConfig",(function(){return $})),n.d(e,"deleteJSONConfig",(function(){return Y})),n.d(e,"deleteENVConfig",(function(){return B})),n.d(e,"deleteOpenVPNConfig",(function(){return H})),n.d(e,"deleteAppConfig",(function(){return M})),n.d(e,"downloadAppConfig",(function(){return J})),n.d(e,"bulkAppControl",(function(){return q})),n.d(e,"bulkInstallApps",(function(){return K})),n.d(e,"bulkDownloadApps",(function(){return W})),n.d(e,"fetchDownloadState",(function(){return Q})),n.d(e,"deleteDownloadState",(function(){return X})),n.d(e,"createRestartJob",(function(){return Z})),n.d(e,"deleteRestartJob",(function(){return tt})),n.d(e,"isSelfRestart",(function(){return et})),n.d(e,"isSelfInstall",(function(){return nt}));var a,s=n("/9Wh"),r=n.n(s),i=n("06Hw"),o=n.n(i),l=n("YYXh"),c=n.n(l),u=n("OBCi"),d=n.n(u),p=n("uzYq"),f=n("NWgQ"),v=n.n(f),m=n("N4QW"),h=n("A5Vd"),g=n("Wgf/"),_=n("+n12"),b="/rubix-app",A=function(){var t=v.a.stringify({browser_download_url:!0,latest_version:!0});return p.a.get(b+"?"+t)},k=function(){return g.b()},x=function(){return p.a.get(""+b).then((function(t){return t.filter((function(t){return t&&t.is_installed}))}))},S=function(){return g.b().then((function(t){return t.filter((function(t){return t&&t.is_installed}))}))},C=function(t){return p.a.get(b+"/releases/"+t)},T=function(t){return d.a.all(t.map((function(t){return C(t).catch((function(t){return[]}))})))},w=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p.a.get(b+"/stats/"+t,e)},N=function(t){return p.a.post(b+"/uninstall",{service:t})},y=function(t){return p.a.post(b+"/install",[t])},I=function(t){return p.a.post(b+"/download",[t])},P=function(t,e){return p.a.post(b+"/control",[{action:t,service:e}])},L=function(t,e,n){var a=new FormData;return a.append("file",t),a.append("service",e),a.append("version",n),p.a.post(b+"/app-upload",a,{headers:{"Content-Type":"multipart/form-data"}})},D=function(t){return p.a.post(b+"/delete-app-data",[{service:t}])},R=function(t){return D(t)},E=(a=c()(o.a.mark((function t(e){var n,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.fetchAppUrl();case 2:return n=t.sent,a=n.data+"api/app/download_data?service="+e,t.abrupt("return",p.a.get(a,{headers:{"Content-Type":"application/zip"},responseType:"arraybuffer"}));case 5:case"end":return t.stop()}}),t,void 0)}))),function(t){return a.apply(this,arguments)}),G=function(t,e){return p.a.get(b+"/json-config/"+t,e)},O=function(t,e){return p.a.get(b+"/open-vpn-config/"+t,e)},z=function(t,e){return p.a.get(b+"/env/"+t,e)},F=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e===h.k.PYTHON_APP)return G(t,n).then((function(t){return t.data}));if(e===h.k.FRONTEND_APP)return z(t,n).then((function(t){return t.data}));if(e===h.k.APT_APP)return O(t,n).then((function(t){return t.data}));throw new Error("App type not supported for editing config")},V=function(t,e){return p.a.put(b+"/json-config",{service:t,data:e})},j=function(t,e){return p.a.put(b+"/env",{service:t,data:e})},U=function(t,e){return p.a.put(b+"/open-vpn-config",{service:t,data:e})},$=function(t,e,n){if(e===h.k.PYTHON_APP)return V(t,n||{});if(e===h.k.FRONTEND_APP)return j(t,n||"");if(e===h.k.APT_APP)return U(t,n);throw new Error("App type not supported for editing config")},Y=function(t){return p.a.delete(b+"/json-config",{data:{service:t}})},B=function(t){return p.a.delete(b+"/env",{data:{service:t}})},H=function(t){return p.a.delete(b+"/open-vpn-config",{data:{service:t}})},M=function(t,e){if(e===h.k.PYTHON_APP)return Y(t);if(e===h.k.FRONTEND_APP)return B(t);if(e===h.k.APT_APP)return H(t);throw new Error("App type not supported for deletion")},J=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e===h.k.PYTHON_APP)return G(t,n).then((function(e){var n=e.data;Object(_.h)(t+"-config",r()(n))}));if(e===h.k.FRONTEND_APP)return z(t,n).then((function(e){var n=e.data;Object(_.f)(""+t,n)}));if(e===h.k.APT_APP)return O(t,n).then((function(e){var n=e.data;Object(_.i)(""+t,n)}));throw new Error("App type not supported for download config")},q=function(t){return p.a.post(b+"/control",t)},K=function(t){return p.a.post(b+"/install",t)},W=function(t){return p.a.post(b+"/download",t)},Q=function(){return p.a.get(b+"/download-state",{restrictToast:!0})},X=function(){return p.a.delete(b+"/download-state")},Z=function(t){return p.a.post(b+"/restart-job",[t])},tt=function(t){return p.a.delete(b+"/restart-job",{data:[t]})},et=function(t,e,n){return t===h.j.RESTART&&e.filter((function(t){return"RUBIX_PLAT"===t.service})).map((function(t){return t.slaveId})).includes(n)},nt=function(t,e){return"RUBIX_PLAT"===t&&e}},qmFP:function(t,e,n){"use strict";n.r(e);var a=n("+SqX"),s=n("snOE"),r=n.n(s),i=n("6J4u"),o=n.n(i),l=n("OBCi"),c=n.n(l),u=n("TcPG"),d=n.n(u),p=n("Kz1y"),f=n.n(p),v=(n("nz6T"),n("Ui9F")),m=n("tZmG"),h=n.n(m),g=n("uzYq"),_="/slaves-bios-apps";function b(t){return{success:!0,error:null,data:t}}function A(t){return{success:!1,data:null,error:t}}var k=function(t){return c.a.all(t.map((function(t){return function(t){return g.a.put(_+"/update-latest/"+t)}(t).then(b).catch(A)})))},x=function(t,e){return c.a.all(t.map((function(t){return function(t,e){return g.a.post(_+"/update-token/"+t,e)}(t,e).then(b).catch(A)})))},S=function(t){return c.a.all(t.map((function(t){return function(t){return g.a.post(_+"/restart-bios/"+t,{},{restrictToast:!0})}(t).then(b).catch(A)})))},C=n("0iKi"),T=n("asQ9"),w={name:"upgrade-to-latest",props:["slaveApps","onClose","selectedGridItems","upgradeLatest"],data:function(){return{isLoading:!1,selectedSlaveApps:[]}},created:function(){this.selectedGridItems.length>0&&(this.selectedSlaveApps=[].concat(r()(this.selectedGridItems)))},methods:{upgradeToLatest:function(){var t=this;return this.isLoading=!0,this.upgradeLatest(this.selectedSlaveApps).then((function(e){e.every((function(t){return t.success}))&&(t.$toasted.show("Successfully updated selected apps"),t.onClose())})).finally((function(){t.isLoading=!1}))}}},N=n("psIG"),y=Object(N.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("v-card-title",[t._v("Upgrade to Latest")]),t._v(" "),n("v-card-text",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-autocomplete",{staticClass:"text-left",attrs:{label:"Select Slave Apps","return-object":"","item-text":"device_name","item-value":"slaveId",items:t.slaveApps,chips:"",clearable:"","deletable-chips":"",multiple:"","small-chips":""},model:{value:t.selectedSlaveApps,callback:function(e){t.selectedSlaveApps=e},expression:"selectedSlaveApps"}})],1)],1)],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{staticClass:"mr-1 btn-height-22 white--text",attrs:{"x-small":"",color:"blue darken-1",disabled:0==t.selectedSlaveApps.length,loading:t.isLoading},on:{click:function(){return t.upgradeToLatest()}}},[t._v("Upgrade to latest")]),t._v(" "),n("v-btn",{staticClass:"mr-1 btn-height-22 white--text",attrs:{"x-small":""},on:{click:t.onClose}},[t._v(" Cancel ")])],1)],1)}),[],!1,null,null,null).exports,I=n("Zepl"),P={name:"upgrade-to-latest",props:["slaveApps","onClose","selectedGridItems","updateToken"],data:function(){return{valid:!1,isLoading:!1,selectedSlaveApps:[],token:"",tokenRules:[I.a.required]}},created:function(){this.selectedGridItems.length>0&&(this.selectedSlaveApps=[].concat(r()(this.selectedGridItems)))},methods:{onSave:function(){var t=this;if(this.$refs.form.validate())return this.isLoading=!0,this.updateToken(this.selectedSlaveApps,this.token).then((function(e){e.every((function(t){return t.success}))&&(t.$toasted.show("Successfully updated token selected apps"),t.onClose())})).finally((function(){t.isLoading=!1}))}}},L=Object(N.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("v-card-title",[t._v("Update Token")]),t._v(" "),n("v-card-text",[n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"12"}},[n("v-autocomplete",{staticClass:"text-left",attrs:{label:"Select Slave Apps","return-object":"","item-text":"device_name","item-value":"slaveId",items:t.slaveApps,chips:"",clearable:"","deletable-chips":"",multiple:"","small-chips":""},model:{value:t.selectedSlaveApps,callback:function(e){t.selectedSlaveApps=e},expression:"selectedSlaveApps"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Third party token",rules:t.tokenRules},model:{value:t.token,callback:function(e){t.token=e},expression:"token"}})],1)],1)],1)],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{staticClass:"mr-1 btn-height-22 white--text",attrs:{"x-small":"",color:"blue darken-1",disabled:0==t.selectedSlaveApps.length,loading:t.isLoading},on:{click:function(){return t.onSave()}}},[t._v("\n      Update Token\n    ")]),t._v(" "),n("v-btn",{staticClass:"mr-1 btn-height-22 white--text",attrs:{"x-small":""},on:{click:t.onClose}},[t._v(" Cancel ")])],1)],1)}),[],!1,null,null,null).exports,D={name:"upgrade-to-latest",props:["slaveApps","onClose","selectedGridItems","restartApps"],data:function(){return{isLoading:!1,selectedSlaveApps:[]}},created:function(){this.selectedGridItems.length>0&&(this.selectedSlaveApps=[].concat(r()(this.selectedGridItems)))},methods:{onSave:function(){var t=this;return this.isLoading=!0,this.restartApps(this.selectedSlaveApps).then((function(e){e.every((function(t){return t.success}))&&(t.$toasted.show("Successfully restarted selected apps"),t.onClose())})).finally((function(){t.isLoading=!1,t.onClose()}))}}},R=Object(N.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("v-card-title",[n("v-icon",{attrs:{color:"warning"}},[t._v(" mdi-alert-outline ")]),t._v(" Restart Selected Apps ")],1),t._v(" "),n("v-card-text",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-autocomplete",{staticClass:"text-left",attrs:{label:"Select Slave Apps","return-object":"","item-text":"device_name","item-value":"slaveId",items:t.slaveApps,chips:"",clearable:"","deletable-chips":"",multiple:"","small-chips":""},model:{value:t.selectedSlaveApps,callback:function(e){t.selectedSlaveApps=e},expression:"selectedSlaveApps"}})],1)],1)],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{staticClass:"mr-1 btn-height-22 white--text",attrs:{"x-small":"",color:"pink darken-1",loading:t.isLoading,disabled:0==t.selectedSlaveApps.length},on:{click:function(){return t.onSave()}}},[t._v("Restart")]),t._v(" "),n("v-btn",{staticClass:"mr-1 btn-height-22 white--text",attrs:{"x-small":""},on:{click:t.onClose}},[t._v("Cancel")])],1)],1)}),[],!1,null,null,null).exports,E=n("MKDl"),G={upgradeToLatest:"upgradeToLatest",restart:"restart",updateToken:"updateToken"},O={name:"slave-bios-apps",components:{TooltipIconButton:v.a,UpgradeLatestSlaveBiosApps:y,SlavesUpdateToken:L,MasterStarIndicator:T.a,RestartBiosSlaveApps:R,AppStatusChip:E.a},data:function(){var t;return{search:"",errMessage:"",isTokenValid:!0,isFetchingLatestVersion:!1,expanded:[],isFixedHeader:!1,isFetchingApps:!1,dataTableHeight:void 0,items:[],selectedGridItems:[],latestVersion:"",dialogNames:f()({},G),dialog:(t={},d()(t,G.upgradeToLatest,!1),d()(t,G.restart,!1),d()(t,G.updateToken,!1),t),headers:[{text:"S/N",align:"center",value:"sn",sortable:!0},{text:"Site Name",align:"left",value:"site_name"},{text:"Device Name",align:"left",value:"device_name"},{text:"Upgrade Status",align:"center",value:"upgrade_app_state"},{text:"Installed Version",align:"center",sortable:!0,value:"version"},{text:"Token",align:"center",sortable:!0,value:"token"},{text:"Active Since",align:"center",sortable:!0,value:"time_since"},{text:"",value:"data-table-expand"}]}},computed:{selectedServicesCount:function(){return 0},dataItems:function(){return this.items.map((function(t,e){return f()({},t,{sn:e+1,site_name:t.is_master?"   "+t.site_name:t.site_name})}))}},created:function(){this.initialize()},methods:{initialize:function(){this.fetchLatestVersion(),this.fetchSlaveAppsDevices()},fetchLatestVersion:function(){var t=this;return this.isFetchingLatestVersion=!0,g.a.get("/rubix-bios/latest-version").then((function(e){var n="";e&&(Array.isArray(e)&&e.length>0?n=e[0]:e.version&&(n=e.version)),t.latestVersion=n,t.isTokenValid=!0})).catch((function(e){e&&e.message&&(t.errMessage=e.message),t.isTokenValid=!1}))},fetchSlaveAppsDevices:function(){var t=this;this.isFetchingApps=!0,c.a.all([this.fetchApps(),this.fetchSlaveDevices()]).then((function(e){var n=o()(e,2),a=n[0],s=n[1];t.items=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return h()(t).map((function(n){return f()({slaveId:n},t[n],e[n]?e[n]:{})}))}(a,s)})).catch((function(t){})).finally((function(){t.isFetchingApps=!1,t.selectedGridItems=[]}))},restartApps:function(t){var e=this,n=t.map((function(t){return t.slaveId}));return S(n).finally((function(){e.$toasted.show("Rubix services are been restarted. It may be unresponsive for a few seconds in all locations.",{type:"info"})}))},upgradeLatest:function(t){var e=this,n=t.filter((function(t){return t.version!==e.latestVersion})).map((function(t){return t.slaveId}));return k(n).then((function(t){return t}))},updateToken:function(t,e){var n=this,a=t.map((function(t){return t.slaveId}));return x(a,{token:e}).then((function(t){return n.fetchSlaveAppsDevices(),n.fetchLatestVersion(),t}))},updateAllToken:function(){this.selectedGridItems=[].concat(r()(this.items)),this.toggleDialog(G.updateToken)},fetchApps:function(){return g.a.get(""+_).then((function(t){return h()(t).reduce((function(e,n){return t[n]&&!t[n].error&&(e[n]=t[n].data),e}),{})}))},fetchSlaveDevices:function(){return C.e()},toggleDialog:function(t){this.dialog[t]=!this.dialog[t]},closeDialog:function(t){this.dialog[t]=!1},getPageLength:function(t){t.itemsLength<20?this.dataTableHeight=void 0:this.dataTableHeight="80vh"},onSearchChange:function(){this.searchItems=this.search.split(",").map((function(t){return t.trim()}))},filterCriteria:function(t,e,n){return null!=t&&this.searchItems&&Array.isArray(this.searchItems)&&this.searchItems.length>0&&this.searchItems.every((function(t){return"string"==typeof t}))&&this.searchItems.some((function(e){return-1!==t.toString().toLowerCase().indexOf(e.toLowerCase())}))}}},z=Object(N.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-card",{attrs:{loading:t.isFetchingApps}},[n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[n("span",[t._v("BIOS Apps")]),t._v(" "),n("tooltip-icon-button",{attrs:{btnColor:"default",btnIcon:"mdi-sync",btnTooltip:"Refresh BIOS apps detail",buttonSize:"medium",onClick:function(){return t.initialize()}}})],1),t._v(" "),n("v-text-field",{staticClass:"pl-10",attrs:{"append-icon":"mdi-magnify",label:"Search using site or device name","single-line":"","hide-details":""},on:{input:t.onSearchChange},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),n("v-spacer")],1),t._v(" "),n("v-card-text",[n("v-container",{attrs:{fluid:""}},[t.isTokenValid?t._e():n("v-alert",{staticClass:"text-left darken-1",attrs:{border:"right",dismissible:"",dense:"",type:"info",elevation:"2"}},[n("span",{staticClass:"pr-5"},[t._v(t._s(t.errMessage))]),t._v(" "),n("v-btn",{staticClass:"btn-height-22 white--text mr-3",attrs:{disabled:0==t.items.length,"x-small":"",color:"nubeGreen"},on:{click:function(){return t.updateAllToken()}}},[t._v("\n            Update Token\n            "),n("v-icon",{attrs:{small:"",right:"",dark:""}},[t._v(" mdi-key-outline ")])],1)],1),t._v(" "),n("v-row",{attrs:{"no-gutter":""}},[n("v-col",{attrs:{cols:"12",lg:"12",xl:"12",md:"12",sm:"12",xs:"12"}},[n("v-card",{attrs:{outlined:""}},[n("v-toolbar",{attrs:{dense:"",flat:""}},[n("v-toolbar-title",{staticClass:"pr-3"},[n("span",[t._v("Rubix Services")])]),t._v(" "),n("span",{staticClass:"text-left mr-5"},[n("span",{staticClass:"grey-text font-weight-medium caption"},[t._v("Selected Apps: ")]),t._v(" "),n("span",{staticClass:"font-weight-medium"},[t._v(t._s(t.selectedGridItems.length))])]),t._v(" "),n("v-btn",{staticClass:"btn-height-22 white--text mr-3",attrs:{disabled:0==t.items.length,"x-small":"",color:"blue"},on:{click:function(){return t.toggleDialog(t.dialogNames.upgradeToLatest)}}},[t._v("\n                  Upgrade to Latest\n                  "),n("v-icon",{attrs:{"x-small":"",right:"",dark:""}},[t._v(" mdi-arrow-right ")])],1),t._v(" "),n("v-btn",{staticClass:"btn-height-22 white--text mr-3",attrs:{disabled:0==t.items.length,"x-small":"",color:"nubeGreen"},on:{click:function(){return t.toggleDialog(t.dialogNames.updateToken)}}},[t._v("\n                  Update Token\n                  "),n("v-icon",{attrs:{"x-small":"",right:"",dark:""}},[t._v(" mdi-key-outline ")])],1),t._v(" "),n("v-btn",{staticClass:"btn-height-22 white--text mr-3",attrs:{disabled:0==t.items.length,"x-small":"",color:"pink"},on:{click:function(){return t.toggleDialog(t.dialogNames.restart)}}},[t._v("\n                  Restart\n                  "),n("v-icon",{attrs:{"x-small":"",right:"",dark:""}},[t._v(" mdi-restart ")])],1),t._v(" "),n("v-spacer"),t._v(" "),t.latestVersion?n("span",[n("span",{staticClass:"grey-text font-weight-medium caption pr-2"},[t._v("Latest Version")]),t._v("\n                  "+t._s(t.latestVersion)+"\n                ")]):t._e()],1),t._v(" "),n("v-data-table",{attrs:{"fixed-header":t.isFixedHeader,"hide-default-footer":"",items:t.dataItems,"single-select":!1,"show-select":"",height:t.dataTableHeight,"items-per-page":1e4,"custom-filter":t.filterCriteria,expanded:t.expanded,"single-expand":"","item-key":"slaveId",search:t.search,headers:t.headers,"show-expand":""},on:{pagination:t.getPageLength,"update:expanded":function(e){t.expanded=e}},scopedSlots:t._u([{key:"item.site_name",fn:function(e){var a=e.item;return[n("span",[n("master-star-indicator",{attrs:{"is-master":a.is_master}}),t._v(" "),n("span",[t._v(t._s(a.site_name))])],1)]}},{key:"item.upgrade_app_state",fn:function(t){var e=t.item;return[n("app-status-chip",{attrs:{chipSize:"small",state:e.upgrade_app_state}})]}},{key:"expanded-item",fn:function(e){var a=e.headers,s=e.item;return[n("td",{class:"expanded-table-row py-2 "+(t.$vuetify.theme.dark?"nubeDarkGrey":"nubeLightBackground"),attrs:{colspan:a.length}},[n("div",{staticClass:"flex pl-15"},[n("span",{staticClass:"table-expanded-item"},[n("span",{staticClass:"grey-text font-weight-medium caption"},[t._v("Timezone")]),t._v(" "),n("span",{staticClass:"text-ellipses"},[t._v(t._s(s.time_zone))])]),t._v(" "),n("span",{staticClass:"table-expanded-item"},[n("span",{staticClass:"grey-text font-weight-medium caption"},[t._v("State")]),t._v(" "),n("span",{staticClass:"font-weight-medium text-ellipses"},[t._v(t._s(s.site_state))])]),t._v(" "),n("span",{staticClass:"table-expanded-item"},[n("span",{staticClass:"grey-text font-weight-medium caption"},[t._v("City")]),t._v(" "),n("span",{staticClass:"font-weight-medium text-ellipses"},[t._v(t._s(s.site_city))])]),t._v(" "),n("span",{staticClass:"table-expanded-item"},[n("span",{staticClass:"grey-text font-weight-medium caption"},[t._v("Zip")]),t._v(" "),n("span",{staticClass:"font-weight-medium text-ellipses"},[t._v(t._s(s.site_zip))])])])])]}}],null,!0),model:{value:t.selectedGridItems,callback:function(e){t.selectedGridItems=e},expression:"selectedGridItems"}})],1)],1)],1)],1)],1)],1),t._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.dialog[t.dialogNames.upgradeToLatest],callback:function(e){t.$set(t.dialog,t.dialogNames.upgradeToLatest,e)},expression:"dialog[dialogNames.upgradeToLatest]"}},[t.dialog[t.dialogNames.upgradeToLatest]?n("upgrade-latest-slave-bios-apps",{attrs:{"slave-apps":t.dataItems,"upgrade-latest":t.upgradeLatest,"selected-grid-items":t.selectedGridItems,"on-close":function(){return t.closeDialog(t.dialogNames.upgradeToLatest)}}}):t._e()],1),t._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.dialog[t.dialogNames.updateToken],callback:function(e){t.$set(t.dialog,t.dialogNames.updateToken,e)},expression:"dialog[dialogNames.updateToken]"}},[t.dialog[t.dialogNames.updateToken]?n("slaves-update-token",{attrs:{"slave-apps":t.dataItems,"update-token":t.updateToken,"selected-grid-items":t.selectedGridItems,"on-close":function(){return t.closeDialog(t.dialogNames.updateToken)}}}):t._e()],1),t._v(" "),n("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.dialog[t.dialogNames.restart],callback:function(e){t.$set(t.dialog,t.dialogNames.restart,e)},expression:"dialog[dialogNames.restart]"}},[t.dialog[t.dialogNames.restart]?n("restart-bios-slave-apps",{attrs:{"slave-apps":t.dataItems,"restart-apps":t.restartApps,"selected-grid-items":t.selectedGridItems,"on-close":function(){return t.closeDialog(t.dialogNames.restart)}}}):t._e()],1)],1)}),[],!1,null,null,null).exports,F={name:"slaves-bios-apps-page",components:{PageTitle:a.a,SlaveBiosApps:z},data:function(){return{isFetchingApps:!1}}},V=Object(N.a)(F,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[t.isFetchingApps?n("v-col",{attrs:{cols:"12"}},[n("v-skeleton-loader",{attrs:{type:"table-heading, list-item-two-line, image, table-tfoot"}})],1):t._e(),t._v(" "),n("v-col",{attrs:{cols:"12"}},[n("slave-bios-apps")],1)],1)],1)],1)}),[],!1,null,null,null);e.default=V.exports}}]);
//# sourceMappingURL=25.2266728a38683d4ee86e.js.map