(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"2SyR":function(e,t,a){"use strict";var n={name:"icon-button",props:["icon","on-click","title","color","size","disabled","loading"]},i=a("psIG"),o=Object(i.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",["small"==e.size?a("v-btn",{staticClass:"pa-2",attrs:{small:"",text:"",color:e.color,loading:e.loading,disabled:e.disabled},on:{click:e.onClick}},[e.icon?a("v-icon",[e._v(e._s(e.icon))]):e._e(),e._v(" "),e.title?a("span",{staticClass:"text"},[e._v(" "+e._s(e.title))]):e._e()],1):a("v-btn",{staticClass:"pa-2",attrs:{text:"",loading:e.loading,disabled:e.disabled,color:e.color,"x-small":""},on:{click:e.onClick}},[e.icon?a("v-icon",[e._v(e._s(e.icon))]):e._e(),e._v(" "),e.title?a("span",{staticClass:"text"},[e._v(" "+e._s(e.title))]):e._e()],1)],1)}),[],!1,null,null,null);t.a=o.exports},DeKB:function(e,t,a){"use strict";var n=a("Zv/C"),i=a.n(n),o=a("uzYq"),r=a("NWgQ"),l=a.n(r),s=a("PWxN"),c=a.n(s),u=function(){var e=this;this.uri="",this.evaluateUri=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return"function"==typeof e.uri?e.uri(t):uri},this.fetch=function(t){var a=e.evaluateUri(),n=null;return t&&t.hasOwnProperty("id")?(n=t.id,t=c()(t,"id")):t&&t.hasOwnProperty("uuid")&&(n=t.uuid,t=c()(t,"uuid")),t&&(a=a+"?"+l.a.stringify(t)),n?e.fetchById(n,t):o.a.get(a)},this.fetchById=function(t,a){var n=e.evaluateUri(t);return a&&(n=n+"?"+l.a.stringify(a)),o.a.get(n)},this.remove=function(){var t=e.evaluateUri();return o.a.delete(t)},this.removeById=function(t){var a=e.evaluateUri(t);return o.a.delete(a)},this.create=function(t){var a=e.evaluateUri();return o.a.post(a,t)},this.patch=function(t,a){var n=e.evaluateUri(t);return o.a.patch(n,a)},this.update=function(t,a){var n=e.evaluateUri(t);return o.a.put(n,a)}};t.a=function e(t){i()(this,e),u.call(this),this.uri=t}},VNy9:function(e,t,a){"use strict";var n={name:"breadcrumbs",props:["items"]},i=a("psIG"),o=Object(i.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-breadcrumbs",{staticClass:"breadcrumbs",attrs:{items:e.items},scopedSlots:e._u([{key:"item",fn:function(t){var n=t.item;return[a("v-breadcrumbs-item",{staticClass:"breadcrumbs-item-text",attrs:{to:n.link,exact:""}},[e._v(" "+e._s(n.text)+" ")])]}}])})}),[],!1,null,"04244946",null);t.a=o.exports},oCli:function(e,t,a){"use strict";function n(e,t){return e?t+"/"+e:t}t.a={rfPing:function(e){return n(e,"rf-ping")},rfFNCStreams:function(e){return n(e,"rf-fnc")},rfCommands:function(e){return n(e,"/rf-commands")},rfLogin:function(e){return n(e,"/rf-login")},rfSchedules:function(e){return n(e,"/rf-schedules")},rfFlowNetwork:function(e){return n(e,"/rf-flow-network")},rfFlowNetworkClone:function(e){return n(e,"/rf-flow-network-clone")},rfJobs:function(e){return n(e,"/rf-jobs")},rfNetworks:function(e){return n(e,"/rf-networks")},rfPoints:function(e){return n(e,"/rf-points")},rfProducers:function(e){return n(e,"/rf-producers")},rfConsumers:function(e){return n(e,"/rf-consumers")},rfWriters:function(e){return n(e,"/rf-writers")},rfWriterClones:function(e){return n(e,"/rf-writer-clones")},rfStreams:function(e){return n(e,"/rf-streams")},rfStreamsClone:function(e){return n(e,"/rf-streams-clone")},rfDevices:function(e){return n(e,"/rf-devices")},rfWriterActions:function(e){return n(e,"/rf-writer-actions")}}},tKj8:function(e,t,a){"use strict";var n,i=a("snOE"),o=a.n(i),r=a("tZmG"),l=a.n(r),s=a("TcPG"),c=a.n(s),u=a("Kz1y"),d=a.n(u),m=a("bRcU"),v=a("edSL"),f=a.n(v),h=a("wGtP"),p=a("xrGn"),g="00:00:00",D="yyyy-MM-dd",b="HH:mm:ss",y={name:"v-datetime-picker",model:{prop:"datetime",event:"input"},props:{datetime:{type:[Date,String],default:null},disabled:{type:Boolean},loading:{type:Boolean},label:{type:String,default:""},dateFormat:{type:String,default:D},timeFormat:{type:String,default:"HH:mm"},clearText:{type:String,default:"CLEAR"},okText:{type:String,default:"OK"},textFieldProps:{type:Object},datePickerProps:{type:Object},timePickerProps:{type:Object},rules:{type:Array}},data:function(){return{activeTab:0,open:!1,date:"",time:g}},mounted:function(){this.init()},computed:{dateTimeFormat:function(){return this.dateFormat+" "+this.timeFormat},defaultDateTimeFormat:function(){return"yyyy-MM-dd HH:mm:ss"},formattedDatetime:function(){return this.selectedDatetime?Object(h.a)(this.selectedDatetime,this.dateTimeFormat):""},selectedDatetime:function(){if(this.date&&this.time){var e=this.date+" "+this.time;return 5===this.time.length&&(e+=":00"),Object(p.a)(e,this.defaultDateTimeFormat,new Date)}return null},dateSelected:function(){return!this.date}},methods:{init:function(){if(this.datetime){var e=void 0;this.datetime instanceof Date?e=this.datetime:("string"==typeof this.datetime||this.datetime instanceof String)&&(e=Object(p.a)(this.datetime,this.dateTimeFormat,new Date)),this.date=Object(h.a)(e,D),this.time=Object(h.a)(e,b)}},okHandler:function(){this.open=!1,this.resetPicker(),this.$emit("input",this.selectedDatetime)},handleDialogOpen:function(){this.open=!0},clearHandler:function(){this.resetPicker(),this.date="",this.time=g,this.$emit("input",null)},cancelHandler:function(){this.open=!1},resetPicker:function(){this.activeTab=0,this.$refs.timer&&(this.$refs.timer.selectingHour=!0)},showTimePicker:function(){this.activeTab=1}},watch:{datetime:function(){this.init()}}},k=a("psIG"),_=Object(k.a)(y,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-text-field",e._b({attrs:{readonly:"",rules:e.rules,label:e.label,loading:e.loading,disabled:e.disabled,value:e.formattedDatetime},on:{click:e.handleDialogOpen},scopedSlots:e._u([{key:"progress",fn:function(){return[e._t("progress",[a("v-progress-linear",{attrs:{color:"primary",indeterminate:"",absolute:"",height:"2"}})])]},proxy:!0}],null,!0)},"v-text-field",e.textFieldProps,!1)),e._v(" "),a("v-dialog",{attrs:{"max-width":"300px"},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[a("v-card",[a("v-card-text",{staticClass:"px-0 py-0"},[a("v-tabs",{attrs:{"fixed-tabs":""},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("v-tab",{key:"calendar"},[a("v-icon",[e._v("mdi-calendar")])],1),e._v(" "),a("v-tab",{key:"timer",attrs:{disabled:e.dateSelected}},[a("v-icon",[e._v("mdi-clock")])],1),e._v(" "),a("v-tab-item",{key:"calendar"},[a("v-date-picker",e._b({attrs:{"full-width":""},on:{input:e.showTimePicker},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},"v-date-picker",e.datePickerProps,!1))],1),e._v(" "),a("v-tab-item",{key:"timer"},[a("v-time-picker",e._b({ref:"timer",staticClass:"v-time-picker-custom",attrs:{"full-width":""},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}},"v-time-picker",e.timePickerProps,!1))],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"grey darken-1",text:""},nativeOn:{click:function(t){return e.clearHandler(t)}}},[e._v(e._s(e.clearText))]),e._v(" "),a("v-btn",{attrs:{color:"grey lighten-1",text:""},nativeOn:{click:function(t){return e.cancelHandler(t)}}},[e._v("Cancel")]),e._v(" "),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.okHandler}},[e._v(e._s(e.okText))])],1)],1)],1)],1)}),[],!1,null,null,null).exports,x=a("Ui9F"),E=a("08eb"),w=a.n(E),S=a("Zv/C"),C=a.n(S),N=a("2lBV"),T=a.n(N),z=a("F/wX"),O=a.n(z),$=[{name:"HVAC"}],F={EVENT:"events",WEEKLY:"weekly",EXCEPTION:"exception"},I=(n={},c()(n,F.EVENT,"Event"),c()(n,F.WEEKLY,"Weekly"),c()(n,F.EXCEPTION,"Exception"),n),q=function(){function e(t,a,n,i,o,r,l){C()(this,e),this.DEFAULT_COLOR="gary darken-1",this.id=t||Object(m.generate)(),this.name=I[l]+" | "+a||"",this.start=n||new Date(this.getTodayDate()+"T00:00:00"),this.end=i||new Date(this.getTodayDate()+"T23:59:59"),this.color=o||this.DEFAULT_COLOR,this.timed=r||!1,this.eventType=l,this.category=l}return T()(e,[{key:"getTodayDate",value:function(){return(new Date).toISOString().split("T")[0]}}]),e}(),P={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6};function W(e){return"string"==typeof e&&(e=new Date(e)),O()(e).format("YYYY-MM-DDTHH:mm")}function V(e,t){var a=function(e){return e.split(":").concat("00")}(t),n=new Date(e);return n.setHours.apply(n,o()(a)),n}function M(e,t,a,n,i){t=function(e){return d()({},e,{days:e.days.map((function(e){return P[e]}))})}(t),a=new Date(a.date+"T00:00:00"),n=new Date(n.date+"T23:59:59");for(var o=[],r=function(){var n,i,r=a.getDay(),l=t.days.reduce((function(n,i){if(r==i){var o=function(e,t){var a=e.id,n=e.name,i=e.value,o=e.color,r=e.startTime,l=e.endTime,s=e.date,c=V(s,r),u=V(s,l);return new q(a,n+" - "+i,c,u,o,!0,F.WEEKLY)}(d()({},t,{id:e,date:new Date(a),startTime:t.start,endTime:t.end}));n.push(o)}return n}),[]);l.length&&o.push(l),n=a,(i=new Date(n)).setDate(n.getDate()+1),a=i};a-n<0;)r();return o.flat()}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F.EVENT;return l()(e).reduce((function(a,n){var i=n,o=e[n],r=o.name+" - "+o.value,l=o.color,s=[];return o.dates.forEach((function(e){s.push(new q(i,r,new Date(e.start),new Date(e.end),l,!0,t))})),a.push.apply(a,s),a}),[])}function H(e){var t=[].concat($),a=w()(e&&e.names||{});return t.concat.apply(t,o()(a))}var L={name:"event-form",components:{DateTimePicker:_,TooltipIconButton:x.a},props:["onCancel","onSave","item","isEdit","config","timezone","onDelete"],data:function(){return{isSubmitting:!1,isDeleting:!1,valid:!1,formData:{name:"",dates:[{start:null,end:null}],value:null,color:""},rules:{required:function(e){return!!e||"Required."},numberRule:function(e){return!isNaN(parseFloat(e))||"Required."}}}},computed:{scheduleNames:function(){return H(this.config)}},mounted:function(){this.isEdit&&this.item&&(this.formData={name:this.item.name,dates:this.item.dates.map((function(e){return{start:new Date(e.start),end:new Date(e.end)}})),value:this.item.value,color:this.item.color})},methods:{startDateValidator:function(e,t){var a=f()(this.formData,"dates["+t+"].start",void 0),n=f()(this.formData,"dates["+t+"].end",void 0);return!n||!a||(!(new Date(a)-new Date(n)>0)||"Start date should be less than End date")},endDateValidator:function(e,t){var a=f()(this.formData,"dates["+t+"].start",void 0),n=f()(this.formData,"dates["+t+"].end",void 0);return!n||!a||(!(new Date(a)-new Date(n)>0)||"End date should be more than Start date")},addNewEvent:function(){this.formData.dates.push({start:null,end:null})},removeEvent:function(e){this.formData.dates=this.formData.dates.filter((function(t,a){return a!=e}))},formatData:function(e){return e.dates=e.dates.map((function(e){return{start:W(e.start),end:W(e.end)}})),e},onSaveForm:function(){var e=this;this.$refs.form.validate()&&(this.isSubmitting=!0,this.onSave(this.formatData(this.formData),this.item?this.item.id:null).then((function(t){e.onCancel()})).catch((function(e){})).finally((function(){e.isSubmitting=!1})))},onDeleteItem:function(){var e=this;this.isDeleting=!0,this.onDelete(this.item.id).then((function(){e.$toasted.show("Successfully deleted"),e.onCancel()})).catch((function(e){})).finally((function(){e.isDeleting=!1}))}}},R=Object(k.a)(L,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v("Event")]),e._v(" "),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{items:e.scheduleNames,rules:[e.rules.required],"item-text":"name","item-value":"name",label:"Event name","persistent-hint":"","single-line":""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),a("v-col",{attrs:{cols:"12"}},[a("v-slider",{attrs:{label:"Value",max:"100",min:"0","thumb-label":""},model:{value:e.formData.value,callback:function(t){e.$set(e.formData,"value",t)},expression:"formData.value"}})],1),e._v(" "),a("v-col",{attrs:{cols:"12"}},e._l(e.formData.dates,(function(t,n){return a("v-row",{key:n,attrs:{dense:""}},[a("v-col",{attrs:{cols:"5"}},[a("date-time-picker",{attrs:{rules:[e.rules.required,function(a){return e.startDateValidator(t,n)}],label:"Start Date"},model:{value:t.start,callback:function(a){e.$set(t,"start",a)},expression:"item.start"}})],1),e._v(" "),a("v-col",{attrs:{cols:"5"}},[a("date-time-picker",{attrs:{rules:[e.rules.required,function(a){return e.endDateValidator(t,n)}],label:"End Date"},model:{value:t.end,callback:function(a){e.$set(t,"end",a)},expression:"item.end"}})],1),e._v(" "),a("v-col",{attrs:{cols:"2"}},[a("tooltip-icon-button",{attrs:{disabled:e.formData.dates.length<=1,btnColor:"error",btnIcon:"mdi-delete",buttonSize:"medium",btnTooltip:"Remove Event Date",onClick:function(){return e.removeEvent(n)}}})],1),e._v(" "),a("v-col",{attrs:{cols:"12"}},[n===e.formData.dates.length-1?a("tooltip-icon-button",{attrs:{btnColor:"nubeGreen",btnIcon:"mdi-plus",buttonSize:"medium",btnTooltip:"Add Event Date",onClick:function(){return e.addNewEvent()}}}):e._e()],1)],1)})),1),e._v(" "),a("v-col",{attrs:{cols:"12"}},[a("p",{staticClass:"v-label text-left"},[e._v("Event Color")]),e._v(" "),a("v-color-picker",{attrs:{mode:"hexa"},model:{value:e.formData.color,callback:function(t){e.$set(e.formData,"color",t)},expression:"formData.color"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{text:""},on:{click:e.onCancel}},[e._v("Close")]),e._v(" "),e.isEdit?a("v-btn",{attrs:{color:"error",loading:e.isDeleting,text:""},on:{click:e.onDeleteItem}},[e._v("Delete")]):e._e(),e._v(" "),a("v-btn",{attrs:{color:"primary",loading:e.isSubmitting,text:""},on:{click:e.onSaveForm}},[e._v("Save")])],1)],1)}),[],!1,null,null,null).exports,A=a("yEOx"),U=a.n(A),Y={name:"v-timepicker",props:{value:{type:String,default:null},okText:{type:String,default:"Ok"},clearText:{type:String,default:"Clear"},label:{type:String}},computed:{formattedTimeValue:function(){return this.value}},data:function(e){return{time:e.value,showMenu:!1,rules:{required:function(e){return!!e||"Required."},timeFormat:function(e){return function(){var t=e&&e.split(":")||[];if(t.length>=1){if(null!==t[0]&&isNaN(+t[0]))return"Hour should be numeric.";if(t[0]>=24)return"Hour value should be less than 24 hours.";if(t[0]<0)return"Hour value should be greater than 0."}if(t.length>=2){if(null!==t[1]&&isNaN(+t[1]))return"Minute should be numeric.";if(t[1]<0)return"Minute value should be greater than 0.";if(t[1]>=60)return"Minute value should be less than 60 minutes."}return!(t.length>=3)||"Should be in format HH:MM"}()}}}},watch:{value:function(e,t){e!==t&&(this.time=e)}},methods:{onInputChange:function(){this.$emit("input",this.time)},okHandler:function(){this.showMenu=!1,this.$emit("input",this.time)},handleDialogOpen:function(){this.showMenu=!0},clearHandler:function(){this.time=null,this.$emit("input",null)},cancelHandler:function(){this.showMenu=!1}}},B={name:"weekly-form",props:["onSave","onCancel","item","isEdit","config","timezone","onDelete"],components:{TimePicker:Object(k.a)(Y,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-text-field",{attrs:{value:e.formattedTimeValue,"append-icon":"mdi-calendar",placeholder:"##:##",rules:[e.rules.required,e.rules.timeFormat],label:e.label},on:{"click:append":e.handleDialogOpen,change:e.onInputChange},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}),e._v(" "),a("v-dialog",{attrs:{"max-width":"300px"},model:{value:e.showMenu,callback:function(t){e.showMenu=t},expression:"showMenu"}},[e.showMenu?a("v-card",[a("v-card-text",{staticClass:"px-0 py-0"},[a("v-time-picker",{attrs:{"full-width":""},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),e._v(" "),a("v-card-actions",{staticClass:"text-right"},[a("v-btn",{attrs:{color:"grey darken-1",text:""},nativeOn:{click:function(t){return e.clearHandler(t)}}},[e._v(e._s(e.clearText))]),e._v(" "),a("v-btn",{attrs:{color:"grey lighten-1",text:""},nativeOn:{click:function(t){return e.cancelHandler(t)}}},[e._v("Cancel")]),e._v(" "),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.okHandler}},[e._v(e._s(e.okText))])],1)],1):e._e()],1)],1)}),[],!1,null,null,null).exports},data:function(){return{valid:!1,showMenu:!1,showEndTime:!1,isDeleting:!1,isSubmitting:!1,formData:{name:"",days:[],start:null,end:null,color:"",value:null},rules:{required:function(e){return!!e||"Required."},requiredArray:function(e){return Array.isArray(e)&&e.length>0||"Required."},numberRule:function(e){return!isNaN(parseFloat(e))||"Required."}},dayList:[{displayName:"Sunday",value:"sunday"},{displayName:"Monday",value:"monday"},{displayName:"Tuesday",value:"tuesday"},{displayName:"Wednesday",value:"wednesday"},{displayName:"Thursday",value:"thursday"},{displayName:"Friday",value:"friday"},{displayName:"Saturday",value:"saturday"}]}},computed:{scheduleNames:function(){return H(this.config)}},mounted:function(){this.isEdit&&this.item&&(this.formData={name:this.item.name,days:this.item.days,start:this.item.start,end:this.item.end,color:this.item.color,value:this.item.value},this.formData=this.parseStartEndTime(this.formData))},methods:{parseStartEndTime:function(e){return e},formatStartEndTime:function(e){return e},onSaveForm:function(){var e=this;this.$refs.form.validate()&&(this.isSubmitting=!0,this.onSave(this.formatStartEndTime(this.formData),this.item?this.item.id:null).then((function(t){e.onCancel()})).catch((function(){e.$toasted.show("Cannot create weekly event",{type:"error"})})).finally((function(){e.isSubmitting=!1})))},onDeleteItem:function(){var e=this;this.isDeleting=!0,this.onDelete(this.item.id).then((function(){e.$toasted.show("Successfully deleted"),e.onCancel()})).catch((function(e){})).finally((function(){e.isDeleting=!1}))}}},G=Object(k.a)(B,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v("Weekly Form")]),e._v(" "),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{"single-line":"","persistent-hint":"","item-text":"name","item-value":"name",label:"Event name",items:e.scheduleNames,rules:[e.rules.required]},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),a("v-col",{attrs:{cols:"12"}},[a("v-slider",{attrs:{label:"Value",max:"100",min:"0","thumb-label":""},model:{value:e.formData.value,callback:function(t){e.$set(e.formData,"value",t)},expression:"formData.value"}})],1),e._v(" "),a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{label:"Days","item-value":"value",multiple:"",chips:"",clearable:"",rules:[e.rules.requiredArray],"deletable-chips":"",items:e.dayList,"item-text":"displayName"},model:{value:e.formData.days,callback:function(t){e.$set(e.formData,"days",t)},expression:"formData.days"}})],1),e._v(" "),a("v-col",{attrs:{cols:"6"}},[a("time-picker",{attrs:{rules:[e.rules.required],label:"Start Time"},model:{value:e.formData.start,callback:function(t){e.$set(e.formData,"start",t)},expression:"formData.start"}})],1),e._v(" "),a("v-col",{attrs:{cols:"6"}},[a("time-picker",{attrs:{rules:[e.rules.required],label:"End Time"},model:{value:e.formData.end,callback:function(t){e.$set(e.formData,"end",t)},expression:"formData.end"}})],1),e._v(" "),a("v-col",{attrs:{cols:"12"}},[a("p",{staticClass:"v-label text-left"},[e._v("Event Color")]),e._v(" "),a("v-color-picker",{attrs:{mode:"hexa"},model:{value:e.formData.color,callback:function(t){e.$set(e.formData,"color",t)},expression:"formData.color"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{text:""},on:{click:e.onCancel}},[e._v("Close")]),e._v(" "),e.isEdit?a("v-btn",{attrs:{color:"error",loading:e.isDeleting,text:""},on:{click:e.onDeleteItem}},[e._v("Delete")]):e._e(),e._v(" "),a("v-btn",{attrs:{color:"primary",loading:e.isSubmitting,text:""},on:{click:e.onSaveForm}},[e._v("Save")])],1)],1)}),[],!1,null,null,null).exports,K=a("dqfB"),X=a("A3AF"),J={data:function(){return{fav:!0,valid:!1,menu:!1,listRenderCount:0,message:!1,hints:!0,timezoneVal:null,timezones:[],names:[],scheduleNameList:[],rules:{required:function(e){return!!e||"Required."}}}},components:{TooltipIconButton:x.a},props:["timezone","scheduleNames","onSubmit"],mounted:function(){this.initialize()},watch:{menu:function(e,t){e&&this.initialize()}},methods:{initialize:function(){this.timezone?this.timezoneVal=this.timezone:this.timezoneVal=K.a(),this.timezones=K.c(),this.updateScheduleNameList()},updateScheduleNameList:function(){this.scheduleNameList=w()(this.scheduleNames||{}).map((function(e){return d()({},e)}))},createScheduleName:function(e){var t={id:Object(X.a)(),name:e};this.scheduleNameList=this.scheduleNameList.concat(t)},updateScheduleName:function(e,t){this.scheduleNames=d()({},this.scheduleNames,c()({},e,d()({},this.scheduleNames[e],{name:t})))},removeScheduleName:function(e){this.scheduleNameList=this.scheduleNameList.filter((function(t){return t.id!==e}))},onSave:function(){if(this.menu=!1,this.$refs.form.validate()){var e={timezone:this.timezoneVal,names:this.scheduleNameList.reduce((function(e,t){return e[t.id]=d()({},t),e}),{})};this.onSubmit(e)}}}},Z=Object(k.a)(J,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,"offset-x":""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,i=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mr-1 btn-height-22",attrs:{color:"orange darken-2","x-small":""}},"v-btn",i,!1),n),[a("span",[e._v("Calendar Settings")]),e._v(" "),a("v-icon",{attrs:{"x-small":"",right:""}},[e._v(" mdi-calendar")])],1)]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[e._v(" "),a("v-card",{staticClass:"text-left"},[a("v-list",[a("v-list-item",[a("v-list-item-avatar",[a("v-icon",[e._v("mdi-calendar")])],1),e._v(" "),a("v-list-item-content",[a("v-list-item-title",[e._v("Calendar Panel")]),e._v(" "),a("v-list-item-subtitle",[e._v("Configure timezone/schedule names")])],1)],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-divider"),e._v(" "),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[a("v-autocomplete",{attrs:{dense:"",required:"",clearable:"",items:e.timezones},model:{value:e.timezoneVal,callback:function(t){e.timezoneVal=t},expression:"timezoneVal"}})],1),e._v(" "),a("v-col",{attrs:{cols:"12"}},[a("v-divider")],1),e._v(" "),a("v-col",{attrs:{cols:"12"}},[a("p",{staticClass:"caption"},[e._v("Schedule Names")]),e._v(" "),a("div",{staticClass:"schedule-name-list-wrapper"},e._l(e.scheduleNameList,(function(t,n){return a("div",{key:n+"-"+e.listRenderCount},[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"11"}},[a("v-text-field",{attrs:{dense:"",rules:[e.rules.required],required:""},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"scheduleName.name"}})],1),e._v(" "),a("v-col",{attrs:{cols:"1"}},[a("tooltip-icon-button",{attrs:{btnColor:"red",btnIcon:"mdi-delete",buttonSize:"medium",btnTooltip:"Delete",onClick:function(){return e.removeScheduleName(t.id)}}})],1)],1)],1)})),0),e._v(" "),a("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[a("tooltip-icon-button",{attrs:{btnColor:"blue",btnIcon:"mdi-plus",buttonSize:"medium",btnTooltip:"Add Schedule Name",onClick:function(){return e.createScheduleName("")}}})],1)],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{text:""},on:{click:function(t){e.menu=!1}}},[e._v(" Cancel ")]),e._v(" "),a("v-btn",{attrs:{color:"primary",text:""},on:{click:e.onSave}},[e._v(" Save ")])],1)],1)],1)}),[],!1,null,null,null).exports,Q=a("6J4u"),ee=a.n(Q),te={name:"execption-event-form",props:["onSave","onCancel","item","isEdit","config","onDelete"],components:{TooltipIconButton:x.a,DateTimePicker:_},data:function(e){return{isDeleting:!1,valid:!1,dateFormatted:null,isSubmitting:!1,showMenu:!1,formData:{name:"",dates:[{start:null,end:null}],color:"",value:null},rules:{required:function(e){return!!e||"Required."},numberRule:function(e){return!isNaN(parseFloat(e))||"Required."}}}},mounted:function(){this.isEdit&&this.item&&(this.formData={name:this.item.name,color:this.item.color,value:this.item.value,dates:(this.item.dates||[]).map((function(e){return{start:new Date(e.start),end:new Date(e.end)}}))})},computed:{computedDateFormatted:function(){return this.formatDate(this.date)},scheduleNames:function(){return H(this.config)}},watch:{date:function(e){this.dateFormatted=this.formatDate(this.date)}},methods:{startDateValidator:function(e,t){var a=f()(this.formData,"dates["+t+"].start",void 0),n=f()(this.formData,"dates["+t+"].end",void 0);return!n||!a||(!(new Date(a)-new Date(n)>0)||"Start date should be less than End date")},endDateValidator:function(e,t){var a=f()(this.formData,"dates["+t+"].start",void 0),n=f()(this.formData,"dates["+t+"].end",void 0);return!n||!a||(!(new Date(a)-new Date(n)>0)||"End date should be more than Start date")},getDate:function(e){var t=(new Date).getFullYear(),a=e.concat("-",t);return new Date(a).toISOString().substr(0,10)},getFormattedDate:function(e){return Object(h.a)(new Date(e+"T00:00:00"),"MM-dd")},addNewEvent:function(){this.formData.dates.push({start:null,end:null})},removeEvent:function(e){this.formData.dates=this.formData.dates.filter((function(t,a){return a!=e}))},formatData:function(e){var t=U()(e);return d()({},t,{dates:t.dates.map((function(e){return{start:W(e.start),end:W(e.end)}}))})},formatDate:function(e){if(!e)return null;var t=e.split("-"),a=ee()(t,3);a[0];return a[1]+"-"+a[2]},parseDate:function(e){if(!e)return null;var t=e.split("-"),a=ee()(t,2),n=a[0],i=a[1];return(new Date).getFullYear()+"-"+n.padStart(2,"0")+"-"+i.padStart(2,"0")},onSaveForm:function(){var e=this;this.$refs.form.validate()&&(this.formData.date=this.dateFormatted,this.isSubmitting=!0,this.onSave(this.formatData(this.formData),this.item?this.item.id:null).then((function(t){e.onCancel()})).catch((function(){})).finally((function(){e.isSubmitting=!1})))},onDeleteItem:function(){var e=this;this.isDeleting=!0,this.onDelete(this.item.id).then((function(){e.$toasted.show("Successfully deleted"),e.onCancel()})).catch((function(e){})).finally((function(){e.isDeleting=!1}))}}},ae=Object(k.a)(te,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v("Execption Form")]),e._v(" "),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{items:e.scheduleNames,rules:[e.rules.required],"item-text":"name","item-value":"name",label:"Event name","persistent-hint":"","single-line":""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),a("v-col",{attrs:{cols:"12"}},[a("v-slider",{attrs:{label:"Value",max:"100",min:"0","thumb-label":""},model:{value:e.formData.value,callback:function(t){e.$set(e.formData,"value",t)},expression:"formData.value"}})],1),e._v(" "),a("v-col",{attrs:{cols:"12"}},e._l(e.formData.dates,(function(t,n){return a("v-row",{key:n,attrs:{dense:""}},[a("v-col",{attrs:{cols:"5"}},[a("date-time-picker",{attrs:{rules:[e.rules.required,function(a){return e.startDateValidator(t,n)}],label:"Start Date"},model:{value:t.start,callback:function(a){e.$set(t,"start",a)},expression:"item.start"}})],1),e._v(" "),a("v-col",{attrs:{cols:"5"}},[a("date-time-picker",{attrs:{rules:[e.rules.required,function(a){return e.endDateValidator(t,n)}],label:"End Date"},model:{value:t.end,callback:function(a){e.$set(t,"end",a)},expression:"item.end"}})],1),e._v(" "),a("v-col",{attrs:{cols:"2"}},[a("tooltip-icon-button",{attrs:{disabled:e.formData.dates.length<=1,btnColor:"error",btnIcon:"mdi-delete",buttonSize:"medium",btnTooltip:"Remove Event Date",onClick:function(){return e.removeEvent(n)}}})],1),e._v(" "),a("v-col",{attrs:{cols:"12"}},[n===e.formData.dates.length-1?a("tooltip-icon-button",{attrs:{btnColor:"nubeGreen",btnIcon:"mdi-plus",buttonSize:"medium",btnTooltip:"Add Event Date",onClick:function(){return e.addNewEvent()}}}):e._e()],1)],1)})),1),e._v(" "),a("v-col",{attrs:{cols:"12"}},[a("p",{staticClass:"v-label text-left"},[e._v("Event Color")]),e._v(" "),a("v-color-picker",{attrs:{mode:"hexa"},model:{value:e.formData.color,callback:function(t){e.$set(e.formData,"color",t)},expression:"formData.color"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{text:""},on:{click:e.onCancel}},[e._v("Close")]),e._v(" "),e.isEdit?a("v-btn",{attrs:{color:"error",loading:e.isDeleting,text:""},on:{click:e.onDeleteItem}},[e._v("Delete")]):e._e(),e._v(" "),a("v-btn",{attrs:{color:"primary",loading:e.isSubmitting,text:""},on:{click:e.onSaveForm}},[e._v("Save")])],1)],1)}),[],!1,null,null,null).exports,ne={name:"tooltip-button",props:["helpText","color","onClick","className","title","btnIcon"]},ie=Object(k.a)(ne,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,i=t.attrs;return[a("v-btn",e._g(e._b({class:e.className,attrs:{"x-small":"",color:e.color},on:{click:e.onClick}},"v-btn",i,!1),n),[a("span",[e._v(e._s(e.title))]),e._v(" "),a("v-icon",{attrs:{"x-small":"",right:""}},[e._v(" "+e._s(e.btnIcon))])],1)]}}])},[e._v(" "),e.helpText?a("span",{staticStyle:{"white-space":"pre-line"},domProps:{innerHTML:e._s(e.helpText)}}):e._e()])}),[],!1,null,null,null).exports,oe={createEventDialog:"createEventDialog",createWeeklyEventDialog:"createWeeklyEventDialog",createExceptionDialog:"createExceptionDialog",updateEventDialog:"updateEventDialog",updateWeeklyEventDialog:"updateWeeklyEventDialog",updateExceptionDialog:"updateExceptionDialog"},re=F,le={name:"calendar-view",data:function(){var e;return{type:"week",rules:{required:function(e){return!!e||"Required."}},types:["month","week","day"],mode:"stack",selectedItem:null,weekday:[0,1,2,3,4,5,6],weekdays:[{text:"Sun - Sat",value:[0,1,2,3,4,5,6]},{text:"Mon - Sun",value:[1,2,3,4,5,6,0]},{text:"Mon - Fri",value:[1,2,3,4,5]}],value:"",events:[],dialogNames:d()({},oe),dialog:(e={},c()(e,oe.createEventDialog,!1),c()(e,oe.createWeeklyEventDialog,!1),c()(e,oe.createExceptionDialog,!1),c()(e,oe.updateEventDialog,!1),c()(e,oe.updateWeeklyEventDialog,!1),c()(e,oe.updateExceptionDialog,!1),e),formTypes:{events:"events",exception:"exception",weekly:"weekly"}}},computed:{timezone:function(){return this.config.timezone}},props:["data","updateData","isLoadingCalendar","config"],components:{EventForm:R,WeeklyEventForm:G,CalendarExtraPanel:Z,ExceptionEventForm:ae,TooltipButton:ie},methods:{create:function(e,t){var a=U()(this.data);return a[t]||(a[t]={}),a[t][Object(m.generate)()]=d()({},e),this.updateData(a,this.config)},update:function(e,t,a){var n=U()(this.data);return n[t][a]=d()({},e),this.updateData(n,this.config)},onDelete:function(e,t){var a=U()(this.data);return delete a[e][t],this.updateData(a,this.config)},onSaveConfig:function(e){return this.updateData(this.data,e)},event:function(e){return{name:e.name,start:e.start,end:e.end,color:e.color,timed:e.timed}},getEvents:function(e){var t=e.start,a=e.end;return this.events=this.transformDataToView(this.data,{calendarStartDate:t,calendarEndDate:a}),this.events},getEventColor:function(e){return e.color},toggleDialog:function(e,t){this.selectedItem=t,this.dialog[e]=!this.dialog[e],this.dialog[e]?this.selectedItem=t:this.selectedItem=null},closeDialog:function(e){this.dialog[e]=!1,this.selectedItem={}},rnd:function(e,t){return Math.floor((t-e+1)*Math.random())+e},transformDataToView:function(e,t){var a=this,n=t.calendarStartDate,i=t.calendarEndDate,r=e.events||{},s=e.weekly||{},c=e.exception||{},u=j(r),d=l()(s).map((function(e){return M(e,s[e],n,i,a.timezone)})).flat(),m=j(c,re.EXCEPTION);return[].concat(o()(u),o()(d),o()(m))},getEventDataObject:function(e,t){var a=f()(this.data,e+"["+t+"]");return d()({},a,{id:t})},onEventClick:function(e){var t=e.event,a=t.id;switch(t.eventType){case re.EVENT:this.toggleDialog(oe.updateEventDialog,this.getEventDataObject(re.EVENT,a));break;case re.WEEKLY:this.toggleDialog(oe.updateWeeklyEventDialog,this.getEventDataObject(re.WEEKLY,a));break;case re.EXCEPTION:this.toggleDialog(oe.updateExceptionDialog,this.getEventDataObject(re.EXCEPTION,a))}}}},se=Object(k.a)(le,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"ma-2",attrs:{outlined:"",loading:e.isLoadingCalendar}},[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subtitle-1"},[e._v("Calendar Schedule")])]),e._v(" "),a("v-spacer"),e._v(" "),a("span",{staticClass:"caption pr-3"},[e._v(e._s(e.timezone))]),e._v(" "),a("span",[a("tooltip-button",{attrs:{title:"Event",color:"nubeAqua",btnIcon:"mdi-plus",className:"mr-1 btn-height-22 white-text",helpText:"An event is a single ON event that will put the scheduled event into a TRUE mode.",onClick:function(){return e.toggleDialog(e.dialogNames.createEventDialog)}}}),e._v(" "),a("tooltip-button",{attrs:{title:"Weekly",color:"nubeAqua",btnIcon:"mdi-plus",className:"mr-1 btn-height-22 white-text",helpText:"A weekly event is a 7 day repeating time schedule, when the time is within the scheduled slot then the event is set to TRUE mode.",onClick:function(){return e.toggleDialog(e.dialogNames.createWeeklyEventDialog)}}}),e._v(" "),a("tooltip-button",{attrs:{title:"Exception",color:"nubeAqua",btnIcon:"mdi-plus",className:"mr-1 btn-height-22 white-text",helpText:"An exception event is a single OFF event that will put the scheduled event into a FALSE mode.",onClick:function(){return e.toggleDialog(e.dialogNames.createExceptionDialog)}}}),e._v(" "),a("calendar-extra-panel",{attrs:{scheduleNames:e.config.names,timezone:e.config.timezone,onSubmit:e.onSaveConfig}})],1)],1),e._v(" "),a("v-sheet",{staticClass:"d-flex",attrs:{tile:"",height:"54"}},[a("v-btn",{staticClass:"ma-2",attrs:{icon:""},on:{click:function(t){return e.$refs.calendar.prev()}}},[a("v-icon",[e._v("mdi-chevron-left")])],1),e._v(" "),a("v-select",{staticClass:"ma-2",attrs:{items:e.types,dense:"",outlined:"","hide-details":"",label:"Type"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),e._v(" "),a("v-spacer"),e._v(" "),a("v-select",{staticClass:"ma-2",attrs:{items:e.weekdays,dense:"",outlined:"","hide-details":"",label:"Weekdays"},model:{value:e.weekday,callback:function(t){e.weekday=t},expression:"weekday"}}),e._v(" "),a("v-btn",{staticClass:"ma-2",attrs:{icon:""},on:{click:function(t){return e.$refs.calendar.next()}}},[a("v-icon",[e._v("mdi-chevron-right")])],1)],1),e._v(" "),a("v-sheet",{attrs:{height:"500"}},[a("v-calendar",{ref:"calendar",attrs:{type:e.type,events:e.events,weekdays:e.weekday,"event-overlap-mode":e.mode,"event-overlap-threshold":30,"event-color":e.getEventColor},on:{"click:event":e.onEventClick,change:e.getEvents},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialog[e.dialogNames.createEventDialog],callback:function(t){e.$set(e.dialog,e.dialogNames.createEventDialog,t)},expression:"dialog[dialogNames.createEventDialog]"}},[e.dialog[e.dialogNames.createEventDialog]?a("event-form",{attrs:{isEdit:!1,config:e.config,timezone:e.timezone,onCancel:function(){return e.closeDialog(e.dialogNames.createEventDialog)},onSave:function(t){return e.create(t,e.formTypes.events)}}}):e._e()],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialog[e.dialogNames.createWeeklyEventDialog],callback:function(t){e.$set(e.dialog,e.dialogNames.createWeeklyEventDialog,t)},expression:"dialog[dialogNames.createWeeklyEventDialog]"}},[e.dialog[e.dialogNames.createWeeklyEventDialog]?a("weekly-event-form",{attrs:{isEdit:!1,config:e.config,timezone:e.timezone,onCancel:function(){return e.closeDialog(e.dialogNames.createWeeklyEventDialog)},onSave:function(t){return e.create(t,e.formTypes.weekly)}}}):e._e()],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialog[e.dialogNames.createExceptionDialog],callback:function(t){e.$set(e.dialog,e.dialogNames.createExceptionDialog,t)},expression:"dialog[dialogNames.createExceptionDialog]"}},[e.dialog[e.dialogNames.createExceptionDialog]?a("exception-event-form",{attrs:{isEdit:!1,config:e.config,timezone:e.timezone,onCancel:function(){return e.closeDialog(e.dialogNames.createExceptionDialog)},onSave:function(t){return e.create(t,e.formTypes.exception)}}}):e._e()],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialog[e.dialogNames.updateEventDialog],callback:function(t){e.$set(e.dialog,e.dialogNames.updateEventDialog,t)},expression:"dialog[dialogNames.updateEventDialog]"}},[e.dialog[e.dialogNames.updateEventDialog]?a("event-form",{attrs:{isEdit:!0,config:e.config,item:e.selectedItem,onDelete:function(t){return e.onDelete(e.formTypes.events,t)},timezone:e.timezone,onCancel:function(){return e.closeDialog(e.dialogNames.updateEventDialog)},onSave:function(t,a){return e.update(t,e.formTypes.events,a)}}}):e._e()],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialog[e.dialogNames.updateWeeklyEventDialog],callback:function(t){e.$set(e.dialog,e.dialogNames.updateWeeklyEventDialog,t)},expression:"dialog[dialogNames.updateWeeklyEventDialog]"}},[e.dialog[e.dialogNames.updateWeeklyEventDialog]?a("weekly-event-form",{attrs:{isEdit:!0,config:e.config,timezone:e.timezone,item:e.selectedItem,onDelete:function(t){return e.onDelete(e.formTypes.weekly,t)},onCancel:function(){return e.closeDialog(e.dialogNames.updateWeeklyEventDialog)},onSave:function(t,a){return e.update(t,e.formTypes.weekly,a)}}}):e._e()],1),e._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialog[e.dialogNames.updateExceptionDialog],callback:function(t){e.$set(e.dialog,e.dialogNames.updateExceptionDialog,t)},expression:"dialog[dialogNames.updateExceptionDialog]"}},[e.dialog[e.dialogNames.updateExceptionDialog]?a("exception-event-form",{attrs:{isEdit:!0,config:e.config,item:e.selectedItem,timezone:e.timezone,onDelete:function(t){return e.onDelete(e.formTypes.exception,t)},onCancel:function(){return e.closeDialog(e.dialogNames.updateExceptionDialog)},onSave:function(t,a){return e.update(t,e.formTypes.exception,a)}}}):e._e()],1)],1)}),[],!1,null,null,null);t.a=se.exports},vJYM:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a("YUSd"),i=a.n(n),o=a("Zv/C"),r=a.n(o),l=a("2lBV"),s=a.n(l),c=a("Dkg+"),u=a.n(c),d=a("Gjrs"),m=a.n(d),v=a("oCli"),f=a("DeKB"),h=a("uzYq"),p=new(function(e){function t(){return r()(this,t),u()(this,(t.__proto__||i()(t)).call(this,v.a.rfSchedules))}return m()(t,e),s()(t,[{key:"patchSchedule",value:function(e,t){var a=v.a.rfSchedules()+"/write/"+e;return h.a.patch(a,t)}}]),t}(f.a))}}]);
//# sourceMappingURL=7.c5c1297da226f9a3a4f6.js.map