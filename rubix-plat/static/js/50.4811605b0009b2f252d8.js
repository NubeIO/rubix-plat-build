(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{NRSR:function(t,e,a){"use strict";a.r(e);var r=a("Kz1y"),i=a.n(r),n=a("edSL"),s=a.n(n),o={name:"rf-point-form",props:["isEdit","onCancel","onSave","item","isSaving","stream"],data:function(){return{rules:{required:function(t){return!!t||"Required."},numberRule:function(t){return!isNaN(parseFloat(t))||"Required."}},valid:!1,formValues:i()({},{name:null})}},computed:{lowerCaseTitle:function(){return"point"},titleCase:function(){return"Point"},title:function(){return this.isEdit?"Edit "+this.titleCase:"Create "+this.titleCase},saveTitle:function(){return this.isEdit?"Save":"Create"}},mounted:function(){this.isEdit&&this.item&&(this.formValues=i()({},this.formValues,this.item)),!this.isEdit&&this.stream&&(this.formValues=i()({},this.formValues,{stream_uuid:this.stream.uuid}))},methods:{cleanUp:function(){this.formValues={},"function"==typeof this.onCancel&&this.onCancel()},onSubmit:function(){var t=this;if(this.$refs.form.validate()){if("function"!=typeof this.onSave)throw new Error(this.lowerCaseTitle+" form onSave function not passed");return this.onSave(this.formValues).then((function(){t.$toasted.show("Successfully "+(t.isEdit?"updated":"created")+" "+t.lowerCaseTitle+"."),t.cleanUp(!0)})).catch((function(){t.$toasted.show("Failed to "+(t.isEdit?"update":"create")+" "+t.lowerCaseTitle+".",{type:"error"})}))}}}},u=a("psIG"),c=Object(u.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.title))])]),t._v(" "),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{required:"",label:"Name",rules:[t.rules.required]},model:{value:t.formValues.name,callback:function(e){t.$set(t.formValues,"name",e)},expression:"formValues.name"}})],1)],1)],1)],1),t._v(" "),a("v-spacer"),t._v(" "),a("v-card-actions",{staticClass:"align-end justify-end"},[a("v-btn",{attrs:{color:"darken-1",text:""},on:{click:t.onCancel}},[t._v(" Cancel ")]),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",loading:t.isSaving,text:""},on:{click:function(e){return t.onSubmit(t.formValues)}}},[t._v(" "+t._s(t.saveTitle)+" ")])],1)],1)}),[],!1,null,null,null).exports,l=a("CfmX"),d=a("b6+e"),m={name:"rf-point-grid",components:{GenericGrid:l.a,RfPointForm:c},props:["params","getDataCb"],data:function(){return{service:d.a,toolbarTitle:"Point",storeMutationKey:"changeRfCommandGroups",gridHeaders:[{text:"Name",align:"center",value:"name",sortable:!0},{text:"Actions",align:"center",value:"actions",sortable:!0}]}}},f=Object(u.a)(m,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("generic-grid",{attrs:{params:t.params,service:t.service,headers:t.gridHeaders,toolbarTitle:t.toolbarTitle,storeMutationKey:t.storeMutationKey,getDataCb:t.getDataCb},scopedSlots:t._u([{key:"createForm",fn:function(e){var r=e.onSave,i=e.onClose,n=e.isOpen,s=e.isSaving;return[n?a("rf-point-form",{attrs:{isEdit:!1,onSave:r,onCancel:i,isSaving:s}}):t._e()]}},{key:"editForm",fn:function(e){var r=e.onSave,i=e.item,n=e.onClose,s=e.isOpen,o=e.isSaving;return[s?a("rf-point-form",{attrs:{item:i,isEdit:!0,onSave:r,onCancel:n,isSaving:o}}):t._e()]}}])})],1)}),[],!1,null,null,null).exports,v=a("2SyR"),h=a("oGAK"),p=a("VNy9"),b=a("Ui9F"),g={text:"Networks",disabled:!1,link:h.a.rfNetworkDevicePoint},_={name:"rf-points",components:{IconButton:v.a,RfPointGrid:f,TooltipIconButton:b.a,Breadcrumbs:p.a},data:function(){return{params:{uuid:null,with_points:!0},renderCount:0,deviceName:"",gridData:{},breadcrumbItems:[g]}},watch:{"$route.params.deviceId":function(t,e){t!=e&&(this.params=i()({},this.params,{uuid:this.$route.params.deviceId}),this.renderCount++)}},mounted:function(){this.params=i()({},this.params,{uuid:this.$route.params.deviceId})},methods:{onBack:function(){this.$router.go(-1)},getDataCb:function(t){this.gridData=t,this.updateBreadCrumbs()},updateBreadCrumbs:function(){if(this.gridData&&this.gridData.extraData){if(this.deviceName=s()(this.gridData,"extraData.name",""),this.breadcrumbItems=[],this.breadcrumbItems.push(g),this.gridData.extraData.hasOwnProperty("network_uuid")){var t=s()(this.gridData,"extraData.network_uuid","");this.breadcrumbItems.push({text:t,align:"center",disabled:!1,link:h.a.rfDevices.replace(":networkId",t)})}if(this.gridData.extraData.hasOwnProperty("uuid")){this.breadcrumbItems.push({text:"Devices",align:"center",disabled:!0});var e=s()(this.gridData,"extraData.uuid","");this.breadcrumbItems.push({text:e,align:"center",disabled:!0,link:null}),this.breadcrumbItems.push({text:"Points",align:"center",disabled:!0})}}}}},C=Object(u.a)(_,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{key:t.renderCount,attrs:{outlined:""}},[a("v-card-title",[a("v-btn",{staticClass:"mr-1",attrs:{icon:"",medium:""},on:{click:t.onBack}},[a("v-icon",{attrs:{medium:""}},[t._v(" mdi-arrow-left ")])],1),t._v(" "),a("span",[t._v("Points")]),t.deviceName?a("span",{staticClass:"caption pl-3"},[t._v("Device: "+t._s(t.deviceName)+" ")]):t._e()],1),t._v(" "),a("v-card-text",[a("breadcrumbs",{attrs:{items:t.breadcrumbItems}}),t._v(" "),a("v-row",{attrs:{"no-gutter":""}},[a("v-col",{attrs:{cols:"12",lg:"12",xl:"12",md:"12",sm:"12",xs:"12"}},[t.params.uuid?a("rf-point-grid",{attrs:{params:t.params,getDataCb:t.getDataCb}}):t._e()],1)],1)],1)],1)}),[],!1,null,null,null);e.default=C.exports},VNy9:function(t,e,a){"use strict";var r={name:"breadcrumbs",props:["items"]},i=a("psIG"),n=Object(i.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-breadcrumbs",{staticClass:"breadcrumbs",attrs:{items:t.items},scopedSlots:t._u([{key:"item",fn:function(e){var r=e.item;return[a("v-breadcrumbs-item",{staticClass:"breadcrumbs-item-text",attrs:{to:r.link,exact:""}},[t._v(" "+t._s(r.text)+" ")])]}}])})}),[],!1,null,"04244946",null);e.a=n.exports},"b6+e":function(t,e,a){"use strict";a.d(e,"a",(function(){return D}));var r=a("tZmG"),i=a.n(r),n=a("YUSd"),s=a.n(n),o=a("Zv/C"),u=a.n(o),c=a("2lBV"),l=a.n(c),d=a("Dkg+"),m=a.n(d),f=a("Gjrs"),v=a.n(f),h=a("DeKB"),p=a("oCli"),b=a("uzYq"),g=a("PWxN"),_=a.n(g),C=a("NWgQ"),x=a.n(C),D=new(function(t){function e(){u()(this,e);var t=m()(this,(e.__proto__||s()(e)).call(this,p.a.rfPoints));return t.fetch=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.uuid||t.id;if(!e)throw new Error("UUID is required for fetching points of device");var a=p.a.rfDevices(e);return(t=_()(t,["uuid","id"]))&&i()(t).length>0&&(a=a+"?"+x.a.stringify(t)),b.a.get(a).then((function(t){return{dataItems:t.points,extraData:_()(t,["points"])}}))},t}return v()(e,t),l()(e,[{key:"fetchAll",value:function(){var t=p.a.rfPoints();return b.a.get(t)}}]),e}(h.a))}}]);
//# sourceMappingURL=50.4811605b0009b2f252d8.js.map