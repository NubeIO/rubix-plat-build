(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{"5Vrd":function(t,e,r){"use strict";r.r(e);var i=r("Kz1y"),n=r.n(i),s=r("TcPG"),a=r.n(s),o={name:"rf-writer-form",props:["isEdit","onCancel","onSave","item","isSaving","consumer"],data:function(){return{rules:{required:function(t){return!!t||"Required."},numberRule:function(t){return!isNaN(parseFloat(t))||"Required."}},valid:!1,formValues:n()({},{writer_thing_class:null,writer_thing_type:null})}},computed:{lowerCaseTitle:function(){return"writer"},titleCase:function(){return"Writer"},title:function(){return this.isEdit?"Edit "+this.titleCase:"Create "+this.titleCase},saveTitle:function(){return this.isEdit?"Save":"Create"}},mounted:function(){this.isEdit&&this.item&&(this.formValues=n()({},this.formValues,this.item)),!this.isEdit&&this.consumer&&(this.formValues=n()({},this.formValues,{consumer_uuid:this.consumer.uuid}))},methods:{cleanUp:function(){this.formValues={},"function"==typeof this.onCancel&&this.onCancel()},onSubmit:function(){var t=this;if(this.$refs.form.validate()){if("function"!=typeof this.onSave)throw new Error(this.lowerCaseTitle+" form onSave function not passed");return this.onSave(this.formValues).then((function(){t.$toasted.show("Successfully "+(t.isEdit?"updated":"created")+" "+t.lowerCaseTitle+"."),t.cleanUp(!0)})).catch((function(){t.$toasted.show("Failed to "+(t.isEdit?"update":"create")+" "+t.lowerCaseTitle+".",{type:"error"})}))}}}},l=r("psIG"),u=Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[t._v(t._s(t.title))])]),t._v(" "),r("v-card-text",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{required:"",label:"Thing Name",rules:[t.rules.required]},model:{value:t.formValues.writer_thing_class,callback:function(e){t.$set(t.formValues,"writer_thing_class",e)},expression:"formValues.writer_thing_class"}})],1),t._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{required:"",label:"Thing Type",rules:[t.rules.required]},model:{value:t.formValues.writer_thing_type,callback:function(e){t.$set(t.formValues,"writer_thing_type",e)},expression:"formValues.writer_thing_type"}})],1)],1)],1)],1),t._v(" "),r("v-spacer"),t._v(" "),r("v-card-actions",{staticClass:"align-end justify-end"},[r("v-btn",{attrs:{color:"darken-1",text:""},on:{click:t.onCancel}},[t._v(" Cancel ")]),t._v(" "),r("v-btn",{attrs:{color:"blue darken-1",loading:t.isSaving,text:""},on:{click:function(e){return t.onSubmit(t.formValues)}}},[t._v(" "+t._s(t.saveTitle)+" ")])],1)],1)}),[],!1,null,null,null).exports,c=r("CfmX"),d=r("97BG"),m=r("Ui9F"),f=r("TZD0"),v=r("tZmG"),h=r.n(v),_=r("08eb"),p=r.n(_),g=r("yEOx"),b=r.n(g),w={WRITE:"write",READ:"read"},C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.action,r=t.ask_refresh,i=t.priority,n=void 0===i?{}:i;return{action:e||w.WRITE,ask_refresh:void 0===r||r,priority:{_1:n._1||null,_2:n._2||null,_3:n._3||null,_4:n._4||null,_5:n._5||null,_6:n._6||null,_7:n._7||null,_8:n._8||null,_9:n._9||null,_10:n._10||null,_11:n._11||null,_12:n._12||null,_13:n._13||null,_14:n._14||null,_15:n._15||null,_16:n._16||null}}},y={name:"rf-writer-actions-form",props:["onCancel","onSave","item"],data:function(){return{isSaving:!1,writerActions:p()(w),priorityList:["_1","_2","_3","_4","_5","_6","_7","_8","_9","_10","_11","_12","_13","_14","_15","_16"],rules:{required:function(t){return!!t||"Required."},numberRule:function(t){return!isNaN(parseFloat(t))||"Required."}},valid:!1,formValues:n()({},C())}},computed:{lowerCaseTitle:function(){return"writer action"},titleCase:function(){return"Writer Actions"},title:function(){return this.isEdit?"Edit "+this.titleCase:"Create "+this.titleCase},saveTitle:function(){return this.isEdit?"Save":"Create"}},mounted:function(){this.item&&h()(this.item).length>0&&(this.formValues=C({ask_refresh:this.item.ask_refresh,action:this.item.action,priority:this.item.data_store}))},methods:{cleanUp:function(){this.formValues=C(),"function"==typeof this.onCancel&&this.onCancel()},transformFormValues:function(t){var e=b()(t);return e.priority=h()(e.priority).reduce((function(t,r){return e.priority[r]?t[r]=+e.priority[r]:t[r]=null,t}),{}),e},onSubmit:function(){var t=this;if(this.$refs.form.validate()){if("function"!=typeof this.onSave)throw new Error(this.lowerCaseTitle+" form onSave function not passed");return this.isSaving=!0,this.onSave(this.transformFormValues(this.formValues)).then((function(){t.$toasted.show("Successfully "+(t.isEdit?"updated":"created")+" "+t.lowerCaseTitle+".")})).catch((function(e){t.$toasted.show("Failed to "+(t.isEdit?"update":"create")+" "+t.lowerCaseTitle+".",{type:"error"})})).finally((function(){t.isSaving=!1}))}}}},k=Object(l.a)(y,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[t._v(t._s(t.title))])]),t._v(" "),r("v-card-text",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-row",{attrs:{dense:""}},[r("v-col",{attrs:{cols:"6"}},[r("v-select",{attrs:{label:"Action",items:t.writerActions},model:{value:t.formValues.action,callback:function(e){t.$set(t.formValues,"action",e)},expression:"formValues.action"}})],1),t._v(" "),r("v-col",{attrs:{cols:"1"}}),t._v(" "),r("v-col",{attrs:{cols:"5"}},[r("v-switch",{staticClass:"pr-4",attrs:{inset:"",label:"Ask Refresh",color:"primary"},model:{value:t.formValues.ask_refresh,callback:function(e){t.$set(t.formValues,"ask_refresh",e)},expression:"formValues.ask_refresh"}})],1),t._v(" "),r("v-row",{attrs:{dense:""}},[r("v-col",{staticClass:"text-left",attrs:{cols:"12"}},[r("span",{staticClass:"caption"},[t._v("Priority Array")])]),t._v(" "),t._l(t.priorityList,(function(e){return r("v-col",{key:e,attrs:{cols:"3"}},[t.formValues.priority?r("v-text-field",{attrs:{"single-line":"",dense:"",outlined:"",required:"",step:"0.01",type:"number",label:e},model:{value:t.formValues.priority[e],callback:function(r){t.$set(t.formValues.priority,e,r)},expression:"formValues.priority[priorityKey]"}}):t._e()],1)}))],2)],1)],1)],1),t._v(" "),r("v-spacer"),t._v(" "),r("v-card-actions",{staticClass:"align-end justify-end"},[r("v-btn",{attrs:{color:"darken-1",text:""},on:{click:t.onCancel}},[t._v(" Close ")]),t._v(" "),r("v-btn",{attrs:{color:"blue darken-1",loading:t.isSaving,text:""},on:{click:function(e){return t.onSubmit(t.formValues)}}},[t._v("\n      Send "),r("v-icon",[t._v("mdi-send")])],1)],1)],1)}),[],!1,null,null,null).exports,x=r("qhTB"),S={writerActionDialog:"writerActionDialog"},I={name:"rf-writers-grid",components:{GenericGrid:c.a,WritersForm:u,TooltipIconButton:m.a,WriterActionsForm:k},props:["params","getDataCb"],data:function(){return{selectedItem:{},syncGrid:function(t){return t},dialogNames:n()({},S),dialog:a()({},S.writerActionDialog,!1),gridName:d.l,service:f.a,toolbarTitle:"Writers",storeMutationKey:"changeRfWriters",gridHeaders:[{text:"Thing class",align:"center",value:"writer_thing_class",sortable:!0},{text:"Thing type",align:"center",value:"writer_thing_type",sortable:!0},{text:"Actions",align:"center",value:"actions",sortable:!0}]}},computed:{consumer:function(){return{uuid:this.params.uuid}}},methods:{toggleDialog:function(t,e,r){this.selectedItem=e,this.syncGrid=r,this.dialog[t]=!this.dialog[t],this.dialog[t]?this.selectedItem=e:this.selectedItem=null},closeDialog:function(t){this.dialog[t]=!1,this.selectedItem={}},onAssignWriteAction:function(t){var e=this,r=this.selectedItem.uuid;return x.a(r,t).then((function(t){return"function"==typeof e.syncGrid&&e.syncGrid(),t}))}}},V=Object(l.a)(I,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("generic-grid",{attrs:{params:t.params,service:t.service,gridName:t.gridName,isHeaderConfigurable:!0,headers:t.gridHeaders,toolbarTitle:t.toolbarTitle,storeMutationKey:t.storeMutationKey,getDataCb:t.getDataCb},scopedSlots:t._u([{key:"createForm",fn:function(e){var i=e.onSave,n=e.onClose,s=e.isOpen,a=e.isSaving;return[s?r("writers-form",{attrs:{isEdit:!1,consumer:t.consumer,onSave:i,onCancel:n,isSaving:a}}):t._e()]}},{key:"editForm",fn:function(e){var i=e.onSave,n=e.item,s=e.onClose,a=e.isOpen,o=e.isSaving;return[a?r("writers-form",{attrs:{item:n,isEdit:!0,onSave:i,onCancel:s,isSaving:o}}):t._e()]}},{key:"afterActions",fn:function(e){var i=e.item,n=e.refreshGrid;return[r("tooltip-icon-button",{attrs:{btnTooltip:"Assign Writer Action",btnIcon:"mdi-yelp",btnColor:"orange",onClick:function(){return t.toggleDialog(t.dialogNames.writerActionDialog,i.item,n)}}})]}}])}),t._v(" "),r("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.dialog[t.dialogNames.writerActionDialog],callback:function(e){t.$set(t.dialog,t.dialogNames.writerActionDialog,e)},expression:"dialog[dialogNames.writerActionDialog]"}},[t.dialog[t.dialogNames.writerActionDialog]?r("writer-actions-form",{attrs:{onCancel:function(){return t.closeDialog(t.dialogNames.writerActionDialog)},item:t.selectedItem,onSave:t.onAssignWriteAction}}):t._e()],1)],1)}),[],!1,null,null,null).exports,T=r("2SyR"),A=r("VNy9"),N=(r("edSL"),r("oGAK")),D={name:"writers",data:function(){return{params:{uuid:null,with_writers:!0},gridData:{},breadcrumbItems:[]}},components:{IconButton:T.a,WritersGrid:V,TooltipIconButton:m.a,Breadcrumbs:A.a},mounted:function(){this.params=n()({},this.params,{uuid:this.$route.params.consumerId}),this.updateBreadCrumbs()},methods:{onBack:function(){this.$router.go(-1)},getDataCb:function(t){this.gridData=t},updateBreadCrumbs:function(){this.breadcrumbItems.push({text:"Flow Network Clone",align:"center",disabled:!1,link:N.a.rfFlowNetworkClone}),this.breadcrumbItems.push({text:this.$route.params.flowNetworkId,align:"center",disabled:!1}),this.breadcrumbItems.push({text:"Streams Clone",align:"center",disabled:!0,link:N.a.rfFlowNetworkStreamsClone.replace(":flowNetworkId",this.$route.params.flowNetworkId)}),this.breadcrumbItems.push({text:this.$route.params.streamId,align:"center",disabled:!1}),this.breadcrumbItems.push({text:"Consumers",align:"center",disabled:!1,link:N.a.rfFlowNetworkCloneConsumers.replace(":flowNetworkId",this.$route.params.flowNetworkId).replace(":streamId",this.$route.params.streamId)}),this.breadcrumbItems.push({text:this.$route.params.consumerId,align:"center",disabled:!1}),this.breadcrumbItems.push({text:"Writer",align:"center",disabled:!0})}}},E=Object(l.a)(D,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",[r("v-card-title",[r("v-btn",{staticClass:"mr-1",attrs:{icon:"",medium:""},on:{click:t.onBack}},[r("v-icon",{attrs:{medium:""}},[t._v(" mdi-arrow-left ")])],1),t._v("\n    Writers\n  ")],1),t._v(" "),r("v-card-text",[r("breadcrumbs",{attrs:{items:t.breadcrumbItems}}),t._v(" "),r("v-row",{attrs:{"no-gutter":""}},[r("v-col",{attrs:{cols:"12",lg:"12",xl:"12",md:"12",sm:"12",xs:"12"}},[t.params.uuid?r("writers-grid",{attrs:{params:t.params,getDataCb:t.getDataCb}}):t._e()],1)],1)],1)],1)}),[],!1,null,null,null);e.default=E.exports},TZD0:function(t,e,r){"use strict";r.d(e,"a",(function(){return y}));var i=r("tZmG"),n=r.n(i),s=r("YUSd"),a=r.n(s),o=r("Zv/C"),l=r.n(o),u=r("2lBV"),c=r.n(u),d=r("Dkg+"),m=r.n(d),f=r("Gjrs"),v=r.n(f),h=r("DeKB"),_=r("oCli"),p=r("uzYq"),g=r("PWxN"),b=r.n(g),w=r("NWgQ"),C=r.n(w),y=new(function(t){function e(){l()(this,e);var t=m()(this,(e.__proto__||a()(e)).call(this,_.a.rfWriters));return t.fetch=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.uuid||t.id;if(!e)throw new Error("Consumer Id is required for fetching writers of consumers");var r=_.a.rfConsumers(e);return(t=b()(t,["uuid","id"]))&&n()(t).length>0&&(r=r+"?"+C.a.stringify(t)),p.a.get(r).then((function(t){return{dataItems:t.writers,extraData:b()(t,["writers"])}}))},t.createWriter=function(e){var r=t.evaluateUri()+"/wizard";return p.a.post(r,e)},t}return v()(e,t),c()(e,[{key:"fetchAll",value:function(){var t=_.a.rfWriters();return p.a.get(t)}}]),e}(h.a))},VNy9:function(t,e,r){"use strict";var i={name:"breadcrumbs",props:["items"]},n=r("psIG"),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-breadcrumbs",{staticClass:"breadcrumbs",attrs:{items:t.items},scopedSlots:t._u([{key:"item",fn:function(e){var i=e.item;return[r("v-breadcrumbs-item",{staticClass:"breadcrumbs-item-text",attrs:{to:i.link,exact:""}},[t._v(" "+t._s(i.text)+" ")])]}}])})}),[],!1,null,"04244946",null);e.a=s.exports},qhTB:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var i=r("uzYq"),n=r("oCli").a.rfWriterActions,s=function(t,e){var r=n(t);return i.a.post(r,e)}}}]);
//# sourceMappingURL=43.0268af71383eb7125c7b.js.map