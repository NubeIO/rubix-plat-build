(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{"2SyR":function(e,t,n){"use strict";var s={name:"icon-button",props:["icon","on-click","title","color","size","disabled","loading"]},o=n("psIG"),i=Object(o.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",["small"==e.size?n("v-btn",{staticClass:"pa-2",attrs:{small:"",text:"",color:e.color,loading:e.loading,disabled:e.disabled},on:{click:e.onClick}},[e.icon?n("v-icon",[e._v(e._s(e.icon))]):e._e(),e._v(" "),e.title?n("span",{staticClass:"text"},[e._v(" "+e._s(e.title))]):e._e()],1):n("v-btn",{staticClass:"pa-2",attrs:{text:"",loading:e.loading,disabled:e.disabled,color:e.color,"x-small":""},on:{click:e.onClick}},[e.icon?n("v-icon",[e._v(e._s(e.icon))]):e._e(),e._v(" "),e.title?n("span",{staticClass:"text"},[e._v(" "+e._s(e.title))]):e._e()],1)],1)}),[],!1,null,null,null);t.a=i.exports},EObi:function(e,t,n){"use strict";n.r(t);var s={};n.r(s),n.d(s,"fetch",(function(){return g})),n.d(s,"fetchSyncLog",(function(){return _})),n.d(s,"patchSyncLog",(function(){return v})),n.d(s,"deleteSyncLog",(function(){return m}));var o=n("06Hw"),i=n.n(o),r=n("YYXh"),a=n.n(r),l=n("TcPG"),c=n.n(l),d=n("uzYq"),u="/sync-logs",g=function(){return d.a.get(u)},_=function(e){return d.a.get(u+"/"+e)},v=function(e,t){return d.a.patch(u+"/"+e,t)},m=function(e){return d.a.delete(u+"/"+e)},f={name:"sync-log-form",props:["onCancel","refreshGrid","item"],components:{FormError:n("zEfX").a},data:function(){return{valid:!1,hasError:!1,error:{},isFetchingSyncLog:!1,isUpdatingSyncLog:!1,syncLog:{last_sync_id_to_envizi:0},rules:{required:function(e){return!!e||"Required."}}}},mounted:function(){var e=this;this.isFetchingSyncLog=!0;var t=this.getGlobalUUID();_(t).then((function(t){e.syncLog={last_sync_id_to_envizi:Number(t.last_sync_id_to_envizi)}})).catch((function(t){e.hasError=!0,e.error=t})).finally((function(){e.isFetchingSyncLog=!1}))},methods:{getGlobalUUID:function(){return this.item.global_uuid},onIntegerKeyDown:function(e){"."===e.key&&e.preventDefault()},updateSyncLog:function(){var e=this;this.isUpdatingSyncLog=!0,v(this.getGlobalUUID(),this.syncLog).then((function(t){e.$toasted.show("Successfully update sync log"),e.onCancel()})).finally((function(){e.isUpdatingSyncLog=!1}))}}},y=n("psIG"),p=Object(y.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{loading:e.isFetchingSyncLog}},[n("v-card-title",{staticClass:"mb-5"},[n("span",{staticClass:"headline"},[e._v("Sync Log")])]),e._v(" "),n("v-card-text",[n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{required:"",disabled:e.isFetchingSyncLog,type:"number",min:0,label:"Last Sync ID",rules:[e.rules.required]},on:{keydown:function(t){return e.onIntegerKeyDown(t)}},model:{value:e.syncLog.last_sync_id_to_envizi,callback:function(t){e.$set(e.syncLog,"last_sync_id_to_envizi",t)},expression:"syncLog.last_sync_id_to_envizi"}})],1)],1)],1)],1),e._v(" "),n("form-error",{attrs:{error:e.error}}),e._v(" "),n("v-card-actions",[e.onCancel?n("v-btn",{attrs:{color:"darken-1",text:""},on:{click:e.onCancel}},[e._v(" Cancel ")]):e._e(),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:"",loading:e.isUpdatingSyncLog},on:{click:e.updateSyncLog}},[e._v(" Save ")])],1)],1)}),[],!1,null,null,null).exports,h=n("2SyR"),b=n("CfmX"),x=n("97BG"),L=n("lkCm"),k={syncLogs:"syncLogs"},D={name:"sync-logs",components:{ConfirmDialog:L.a,IconButton:h.a,GenericGrid:b.a,SyncLogForm:p},data:function(){return{service:s,refreshGridCb:function(e){return e},selectedItem:null,toolbarTitle:"Sync Logs",gridName:x.s,extraConfig:{hasActions:!1},gridHeaders:[{value:"global_uuid",text:"Global UUID",align:"center",sortable:!1},{value:"last_sync_id_to_envizi",text:"Last Sync Id to Envizi",sortable:!0,align:"center"},{value:"last_sync_datetime_to_envizi",text:"Last Sync DateTime to Envizi",sortable:!0,align:"center"},{value:"latest_sync_id_in_postgres",text:"Latest Sync Id in Postgres",sortable:!0,align:"center"},{value:"latest_sync_datetime_in_postgres",text:"Latest Sync DateTime in Postgres",sortable:!0,align:"center"},{value:"max_sync_id_in_postgres",text:"Max Sync Id in Postgres",sortable:!0,align:"center"},{value:"has_envizi_record",text:"Has Envizi Record",sortable:!0,align:"center"},{value:"has_postgres_record",text:"Has Postgres Record",sortable:!0,align:"center"},{value:"gridItemActions",text:"Actions",align:"center"}],dialogNames:k,dialog:c()({},k.syncLogs,!1),loadingDelete:!1,dialogDelete:!1}},computed:{},methods:{onBack:function(){this.$router.go(-1)},itemRowBackground:function(e){var t=Number(e.last_sync_id_to_envizi)>Number(e.max_sync_id_to_postgres)||Number(e.last_sync_id_to_envizi)>Number(e.latest_sync_id_in_postgres),n=Number(e.max_sync_id_to_postgres)>Number(e.latest_sync_id_in_postgres);return t&&0===Number(e.latest_sync_id_in_postgres)?"background-yellow":t&&0!==Number(e.latest_sync_id_in_postgres)||n?"background-red":""},toggleDialog:function(e,t,n){this.selectedItem=t,this.dialog[e]=!this.dialog[e],this.refreshGridCb=n,this.dialog[e]?this.selectedItem=t:this.selectedItem=null},closeDialog:function(e){this.dialog[e]=!1,this.selectedItem={}},clickDelete:function(e){this.dialogDelete=!0,this.selectedItem=e},confirm:function(){var e=this;return a()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingDelete=!0,t.prev=1,t.next=4,m(e.selectedItem.global_uuid);case 4:(t.sent.notif="Success")&&e.$toasted.show("Deleted successfully!");case 6:return t.prev=6,e.loadingDelete=!1,e.dialogDelete=!1,t.finish(6);case 10:case"end":return t.stop()}}),t,e,[[1,,6,10]])})))()},closeDelete:function(){this.dialogDelete=!1}}},S=Object(y.a)(D,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{outlined:""}},[n("v-card-title",[n("v-btn",{staticClass:"mr-1",attrs:{icon:"",medium:""},on:{click:e.onBack}},[n("v-icon",{attrs:{medium:""}},[e._v(" fa-angle-left ")])],1),e._v(" "),n("span",[e._v("Sync Logs")])],1),e._v(" "),n("v-card-text",[n("v-row",{attrs:{"no-gutter":""}},[n("v-col",{attrs:{cols:"12",lg:"12",xl:"12",md:"12",sm:"12",xs:"12"}},[n("generic-grid",{attrs:{creatable:!1,deletable:!1,hideActions:!0,service:e.service,gridName:e.gridName,headers:e.gridHeaders,itemRowBackground:e.itemRowBackground,itemKey:"global_uuid",toolbarTitle:e.toolbarTitle,extraConfig:e.extraConfig,isHeaderConfigurable:!0},scopedSlots:e._u([{key:"gridItemActions",fn:function(t){var s=t.item,o=t.refreshGrid;return[n("v-icon",{attrs:{small:"",color:"primary"},on:{click:function(t){return e.toggleDialog(e.dialogNames.syncLogs,s,o)}}},[e._v("fa-pencil")]),e._v(" "),n("v-icon",{attrs:{small:"",color:"error"},on:{click:function(t){return e.clickDelete(s)}}},[e._v("fa-trash-o")])]}}])})],1)],1)],1),e._v(" "),e.selectedItem?n("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialog[e.dialogNames.syncLogs],callback:function(t){e.$set(e.dialog,e.dialogNames.syncLogs,t)},expression:"dialog[dialogNames.syncLogs]"}},[e.dialog[e.dialogNames.syncLogs]?n("sync-log-form",{attrs:{refreshGrid:e.refreshGridCb,onCancel:function(){return e.closeDialog(e.dialogNames.syncLogs)},item:e.selectedItem}}):e._e()],1):e._e(),e._v(" "),n("confirm-dialog",{attrs:{"is-open":e.dialogDelete,"on-close":e.closeDelete,"on-confirm":e.confirm,loading:e.loadingDelete,"dialog-text":"Do you want to delete?"}})],1)}),[],!1,null,null,null);t.default=S.exports},zEfX:function(e,t,n){"use strict";var s={name:"form-error",props:["errors","error"],computed:{isArray:function(){return Array.isArray(this.errors)&&this.errors.length>0||!1},isObject:function(){return this.error&&this.error.hasOwnProperty("message")}}},o=n("psIG"),i=Object(o.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-left ma-5"},[e.isArray?n("div",e._l(e.errors,(function(t){return n("v-alert",{key:t.index,attrs:{dense:"",outlined:"",type:"error"}},[n("span",[e._v(e._s(t.message))])])})),1):e._e(),e._v(" "),e.isObject&&e.error.message?n("div",[n("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[n("span",[e._v(e._s(e.error.message))])])],1):e._e()])}),[],!1,null,null,null);t.a=i.exports}}]);
//# sourceMappingURL=63.5398ccc1ea045d163d4f.js.map