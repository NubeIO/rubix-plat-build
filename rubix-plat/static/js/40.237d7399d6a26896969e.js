(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"9Gv6":function(t,e,r){"use strict";r.r(e);var a=r("Kz1y"),n=r.n(a),i=r("edSL"),s=r.n(i),o=r("2SyR"),u={name:"rf-device-form",props:["isEdit","onCancel","onSave","item","isSaving","stream"],data:function(){return{rules:{required:function(t){return!!t||"Required."},numberRule:function(t){return!isNaN(parseFloat(t))||"Required."}},valid:!1,formValues:n()({},{name:null,is_remote:!0,rubix_uuid:null,remote_rubix_uuid:null})}},computed:{lowerCaseTitle:function(){return"device"},titleCase:function(){return"Device"},title:function(){return this.isEdit?"Edit "+this.titleCase:"Create "+this.titleCase},saveTitle:function(){return this.isEdit?"Save":"Create"}},mounted:function(){this.isEdit&&this.item&&(this.formValues=n()({},this.formValues,this.item)),!this.isEdit&&this.stream&&(this.formValues=n()({},this.formValues,{stream_uuid:this.stream.uuid}))},methods:{cleanUp:function(){this.formValues={},"function"==typeof this.onCancel&&this.onCancel()},onSubmit:function(){var t=this;if(this.$refs.form.validate()){if("function"!=typeof this.onSave)throw new Error(this.lowerCaseTitle+" form onSave function not passed");return this.onSave(this.formValues).then((function(){t.$toasted.show("Successfully "+(t.isEdit?"updated":"created")+" "+t.lowerCaseTitle+"."),t.cleanUp(!0)})).catch((function(){t.$toasted.show("Failed to "+(t.isEdit?"update":"create")+" "+t.lowerCaseTitle+".",{type:"error"})}))}}}},c=r("psIG"),l=Object(c.a)(u,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[t._v(t._s(t.title))])]),t._v(" "),r("v-card-text",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{required:"",label:"Name",rules:[t.rules.required]},model:{value:t.formValues.name,callback:function(e){t.$set(t.formValues,"name",e)},expression:"formValues.name"}})],1)],1)],1)],1),t._v(" "),r("v-spacer"),t._v(" "),r("v-card-actions",{staticClass:"align-end justify-end"},[r("v-btn",{attrs:{color:"darken-1",text:""},on:{click:t.onCancel}},[t._v(" Cancel ")]),t._v(" "),r("v-btn",{attrs:{color:"blue darken-1",loading:t.isSaving,text:""},on:{click:function(e){return t.onSubmit(t.formValues)}}},[t._v(" "+t._s(t.saveTitle)+" ")])],1)],1)}),[],!1,null,null,null).exports,d=r("TcPG"),m=r.n(d),v=r("oujF"),f=r("CfmX"),p=r("IpYZ"),h=r("oGAK"),b={viewPoints:"viewPoints"},_=m()({},b.viewPoints,(function(t,e){return h.a.rfPoints.replace(":networkId",t).replace(":deviceId",e)})),C={name:"rf-device-grid",components:{GenericGrid:f.a,RfDeviceForm:l,IconButton:o.a,TextButton:v.a},props:["params","getDataCb"],data:function(){return{dialogNames:b,service:p.a,toolbarTitle:"Devices",gridHeaders:[{text:"Name",align:"center",value:"routeLinkName",sortable:!0},{text:"Actions",align:"center",value:"actions",sortable:!0}]}},methods:{redirectTo:function(t,e){var r=this.$route.params.networkId,a=e.uuid;if(r&&a){var n=_[t];"function"==typeof n&&this.$router.push({path:n(r,a)})}}}},g=Object(c.a)(C,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("generic-grid",{attrs:{params:t.params,service:t.service,headers:t.gridHeaders,toolbarTitle:t.toolbarTitle,getDataCb:t.getDataCb},scopedSlots:t._u([{key:"routeLinkName",fn:function(e){var a=e.item;return[r("text-button",{attrs:{text:a.name,onClick:function(){return t.redirectTo(t.dialogNames.viewPoints,a)}}})]}},{key:"createForm",fn:function(e){var a=e.onSave,n=e.onClose,i=e.isOpen,s=e.isSaving;return[i?r("rf-device-form",{attrs:{isEdit:!1,onSave:a,onCancel:n,isSaving:s}}):t._e()]}},{key:"editForm",fn:function(e){var a=e.onSave,n=e.item,i=e.onClose,s=e.isOpen,o=e.isSaving;return[s?r("rf-device-form",{attrs:{item:n,isEdit:!0,onSave:a,onCancel:i,isSaving:o}}):t._e()]}}])})],1)}),[],!1,null,null,null).exports,k=r("VNy9"),w=r("Ui9F"),x={text:"Networks",disabled:!1,link:h.a.rfNetworkDevicePoint},D={name:"rf-devices",components:{IconButton:o.a,RfDeviceForm:l,RfDeviceGrid:g,TooltipIconButton:w.a,Breadcrumbs:k.a},data:function(){return{params:{uuid:null,with_devices:!0},renderCount:0,networkName:"",gridData:{},breadcrumbItems:[x]}},watch:{"$route.params.networkId":function(t,e){t!=e&&(this.params=n()({},this.params,{uuid:this.$route.params.networkId}),this.renderCount++)}},mounted:function(){this.params=n()({},this.params,{uuid:this.$route.params.networkId})},methods:{onBack:function(){this.$router.go(-1)},getDataCb:function(t){this.gridData=t,this.updateBreadCrumbs()},updateBreadCrumbs:function(){this.breadcrumbItems=[],this.breadcrumbItems.push(x);var t=s()(this.gridData,"extraData.uuid",""),e=s()(this.gridData,"extraData.name","");t&&(this.networkName=e,this.breadcrumbItems.push({text:t,align:"center",disabled:!0}),this.breadcrumbItems.push({text:"Devices",align:"center",disabled:!0}))}}},S=Object(c.a)(D,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",{key:t.renderCount,attrs:{outlined:""}},[r("v-card-title",[r("v-btn",{staticClass:"mr-1",attrs:{icon:"",medium:""},on:{click:t.onBack}},[r("v-icon",{attrs:{medium:""}},[t._v(" mdi-arrow-left ")])],1),t._v(" "),r("span",[t._v("Devices")]),t.networkName?r("span",{staticClass:"caption pl-3"},[t._v("Network: "+t._s(t.networkName)+" ")]):t._e()],1),t._v(" "),r("v-card-text",[r("breadcrumbs",{attrs:{items:t.breadcrumbItems}}),t._v(" "),r("v-row",{attrs:{"no-gutter":""}},[r("v-col",{attrs:{cols:"12",lg:"12",xl:"12",md:"12",sm:"12",xs:"12"}},[t.params.uuid?r("rf-device-grid",{attrs:{params:t.params,getDataCb:t.getDataCb}}):t._e()],1)],1)],1)],1)}),[],!1,null,null,null);e.default=S.exports},IpYZ:function(t,e,r){"use strict";r.d(e,"a",(function(){return w}));var a=r("tZmG"),n=r.n(a),i=r("YUSd"),s=r.n(i),o=r("Zv/C"),u=r.n(o),c=r("2lBV"),l=r.n(c),d=r("Dkg+"),m=r.n(d),v=r("Gjrs"),f=r.n(v),p=r("DeKB"),h=r("oCli"),b=r("uzYq"),_=r("PWxN"),C=r.n(_),g=r("NWgQ"),k=r.n(g),w=new(function(t){function e(){u()(this,e);var t=m()(this,(e.__proto__||s()(e)).call(this,h.a.rfDevices));return t.fetch=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.uuid||t.id;if(!e)throw new Error("UUID is required for fetching devices of network");var r=h.a.rfNetworks(e);return(t=C()(t,["uuid","id"]))&&n()(t).length>0&&(r=r+"?"+k.a.stringify(t)),b.a.get(r).then((function(t){return{dataItems:t.devices,extraData:C()(t,["devices"])}}))},t}return f()(e,t),l()(e,[{key:"fetchAll",value:function(){var t=h.a.rfDevices();return b.a.get(t)}}]),e}(p.a))},VNy9:function(t,e,r){"use strict";var a={name:"breadcrumbs",props:["items"]},n=r("psIG"),i=Object(n.a)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-breadcrumbs",{staticClass:"breadcrumbs",attrs:{items:t.items},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item;return[r("v-breadcrumbs-item",{staticClass:"breadcrumbs-item-text",attrs:{to:a.link,exact:""}},[t._v(" "+t._s(a.text)+" ")])]}}])})}),[],!1,null,"04244946",null);e.a=i.exports},oujF:function(t,e,r){"use strict";var a={name:"text-button",props:["onClick","text"]},n=r("psIG"),i=Object(n.a)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-btn",{staticClass:"ma-1",attrs:{link:"",color:"nubeGreen",plain:""},on:{click:t.onClick}},[r("span",{staticClass:"btn-text"},[t._v(t._s(t.text))])])}),[],!1,null,null,null);e.a=i.exports}}]);
//# sourceMappingURL=40.237d7399d6a26896969e.js.map