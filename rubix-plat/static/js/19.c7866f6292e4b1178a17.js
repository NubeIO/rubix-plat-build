(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"0TWu":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var i=r("Kz1y"),a=r.n(i),n=r("t3kO"),s=r.n(n),l=function(e,t,r){return e.name+":"+t.name+":"+r.name},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],r=!0,i=!1,n=void 0;try{for(var o,u=s()(e);!(r=(o=u.next()).done);r=!0){var c=o.value;if(c.devices){var d=!0,m=!1,f=void 0;try{for(var h,v=s()(c.devices);!(d=(h=v.next()).done);d=!0){var p=h.value;if(p.points){var _=!0,b=!1,g=void 0;try{for(var w,k=s()(p.points);!(_=(w=k.next()).done);_=!0){var y=w.value,C=a()({},y,{networkName:c.name,deviceName:p.name,displayName:l(c,p,y)});t.push(C)}}catch(e){b=!0,g=e}finally{try{!_&&k.return&&k.return()}finally{if(b)throw g}}}}}catch(e){m=!0,f=e}finally{try{!d&&v.return&&v.return()}finally{if(m)throw f}}}}}catch(e){i=!0,n=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw n}}return t}},"4z8c":function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var i=r("tZmG"),a=r.n(i),n=r("YUSd"),s=r.n(n),l=r("Zv/C"),o=r.n(l),u=r("2lBV"),c=r.n(u),d=r("Dkg+"),m=r.n(d),f=r("Gjrs"),h=r.n(f),v=r("DeKB"),p=r("oCli"),_=r("uzYq"),b=r("PWxN"),g=r.n(b),w=r("NWgQ"),k=r.n(w),y=new(function(e){function t(){o()(this,t);var e=m()(this,(t.__proto__||s()(t)).call(this,p.a.rfProducers));return e.fetch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.uuid||e.id;if(!t)throw new Error("Stream Id is required for fetching producers of streams");var r=p.a.rfStreams(t);return(e=g()(e,["uuid","id"]))&&a()(e).length>0&&(r=r+"?"+k.a.stringify(e)),_.a.get(r).then((function(e){return{dataItems:e.producers,extraData:g()(e,["producers"])}}))},e}return h()(t,e),c()(t,[{key:"fetchAll",value:function(){var e=p.a.rfProducers();return _.a.get(e)}}]),t}(v.a))},C4vA:function(e,t,r){"use strict";var i=r("Kz1y"),a=r.n(i),n=r("yEOx"),s=r.n(n),l=r("L9C3"),o=r("wffz"),u=r("IpYZ"),c={name:"producers-form",props:["isEdit","onCancel","onSave","item","isSaving","stream","schedules","allPoints"],data:function(){return{isFetchingAllDevices:!1,rules:{required:function(e){return!!e||"Required."},numberRule:function(e){return!isNaN(parseFloat(e))||"Required."}},devices:[],points:[],isFetchingNetworkDevices:!1,isFetchingDevicePoints:!1,isFetchingSchedules:!1,selectedNetwork:null,selectedDevice:null,thingTypes:l.c,thingActions:l.b,valid:!1,formValues:a()({},{name:"producer",enable:!1,producer_thing_class:"point",enable_history:!1,producer_application:"mapping",stream_uuid:null,producer_thing_uuid:null})}},computed:{lowerCaseTitle:function(){return"producers"},titleCase:function(){return"Producers"},title:function(){return this.isEdit?"Edit "+this.titleCase:"Create "+this.titleCase},saveTitle:function(){return this.isEdit?"Save":"Create"},networks:function(){return this.$store.state.rfNetworks}},mounted:function(){this.isEdit&&this.item&&(this.formValues=a()({},this.formValues,this.item)),!this.isEdit&&this.stream&&(this.formValues=a()({},this.formValues,{stream_uuid:this.stream.uuid}))},methods:{cleanUp:function(){this.formValues={},"function"==typeof this.onCancel&&this.onCancel()},onThingTypeChange:function(){this.formValues.producer_thing_uuid=null},fetchChildDevicesByNetworkId:function(e){var t=this;if(!e)return this.selectedDevice=null,void(this.formValues.producer_thing_uuid=null);this.isFetchingNetworkDevices=!0,o.a.fetchById(e,{with_devices:!0}).then((function(e){t.devices=e.devices})).finally((function(){t.isFetchingNetworkDevices=!1}))},fetchChildPointsByDeviceId:function(e){var t=this;e?(this.isFetchingDevicePoints=!0,u.a.fetchById(e,{with_points:!0}).then((function(e){t.points=e.points})).finally((function(){t.isFetchingDevicePoints=!1}))):this.formValues.producer_thing_uuid=null},transformFormValues:function(e){var t=s()(e);return t.producer_thing_class=l.a[t.producer_thing_class].value,t},onSubmit:function(){var e=this;if(this.$refs.form.validate()){if("function"!=typeof this.onSave)throw new Error(this.lowerCaseTitle+" form onSave function not passed");return this.onSave(this.transformFormValues(this.formValues)).then((function(){e.$toasted.show("Successfully "+(e.isEdit?"updated":"created")+" "+e.lowerCaseTitle+"."),e.cleanUp(!0)})).catch((function(){e.$toasted.show("Failed to "+(e.isEdit?"update":"create")+" "+e.lowerCaseTitle+".",{type:"error"})}))}}}},d=r("psIG"),m=Object(d.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.title))])]),e._v(" "),r("v-card-text",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",{attrs:{dense:""}},[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{required:"",label:"Name",rules:[e.rules.required]},model:{value:e.formValues.name,callback:function(t){e.$set(e.formValues,"name",t)},expression:"formValues.name"}})],1),e._v(" "),r("v-col",{attrs:{cols:"6"}},[r("v-switch",{staticClass:"pr-4",attrs:{inset:"",label:"Enable",color:"primary"},model:{value:e.formValues.enable,callback:function(t){e.$set(e.formValues,"enable",t)},expression:"formValues.enable"}})],1),e._v(" "),r("v-col",{attrs:{cols:"6"}},[r("v-switch",{staticClass:"pr-4",attrs:{inset:"",label:"Save History",color:"primary"},model:{value:e.formValues.enable_history,callback:function(t){e.$set(e.formValues,"enable_history",t)},expression:"formValues.enable_history"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-select",{attrs:{label:"Thing Class","item-value":"name",items:e.thingTypes,"item-text":"displayName"},on:{change:e.onThingTypeChange},model:{value:e.formValues.producer_thing_class,callback:function(t){e.$set(e.formValues,"producer_thing_class",t)},expression:"formValues.producer_thing_class"}})],1),e._v(" "),"network"===e.formValues.producer_thing_class?r("v-col",{attrs:{cols:"12"}},[r("v-autocomplete",{attrs:{chips:"",clearable:"","small-chips":"",label:"Network","item-value":"uuid","item-text":"name",items:e.networks,"deletable-chips":"",rules:[e.rules.required]},model:{value:e.formValues.producer_thing_uuid,callback:function(t){e.$set(e.formValues,"producer_thing_uuid",t)},expression:"formValues.producer_thing_uuid"}})],1):e._e(),e._v(" "),"device"===e.formValues.producer_thing_class?r("v-col",{attrs:{cols:"12"}},[r("v-autocomplete",{attrs:{chips:"",clearable:"","small-chips":"",label:"Device","item-value":"uuid","item-text":"name",items:e.devices,rules:[e.rules.required],"deletable-chips":""},model:{value:e.formValues.producer_thing_uuid,callback:function(t){e.$set(e.formValues,"producer_thing_uuid",t)},expression:"formValues.producer_thing_uuid"}})],1):e._e(),e._v(" "),"point"===e.formValues.producer_thing_class?r("v-col",{attrs:{cols:"12"}},[r("v-autocomplete",{attrs:{chips:"",clearable:"","small-chips":"",label:"Point","item-value":"uuid","item-text":"displayName",items:e.allPoints,loading:e.isFetchingAllDevices,rules:[e.rules.required],"deletable-chips":""},model:{value:e.formValues.producer_thing_uuid,callback:function(t){e.$set(e.formValues,"producer_thing_uuid",t)},expression:"formValues.producer_thing_uuid"}})],1):e._e(),e._v(" "),"schedule"===e.formValues.producer_thing_class?r("v-col",{attrs:{cols:"12"}},[r("v-autocomplete",{attrs:{chips:"",clearable:"","small-chips":"",label:"Scheulde","item-value":"uuid","item-text":"name",items:e.schedules,loading:e.isFetchingSchedules,rules:[e.rules.required],"deletable-chips":""},model:{value:e.formValues.producer_thing_uuid,callback:function(t){e.$set(e.formValues,"producer_thing_uuid",t)},expression:"formValues.producer_thing_uuid"}})],1):e._e(),e._v(" "),"point_filter"===e.formValues.producer_thing_class?r("v-col",{attrs:{cols:"12"}},[r("v-autocomplete",{attrs:{chips:"",clearable:"","small-chips":"",label:"Network","item-value":"uuid","item-text":"name",items:e.networks,rules:[e.rules.required],"deletable-chips":""},on:{change:e.fetchChildDevicesByNetworkId},model:{value:e.selectedNetwork,callback:function(t){e.selectedNetwork=t},expression:"selectedNetwork"}}),e._v(" "),r("v-autocomplete",{attrs:{disabled:!e.selectedNetwork,chips:"",loading:e.isFetchingNetworkDevices,clearable:"","small-chips":"",label:"Device","item-value":"uuid","item-text":"name",items:e.devices,rules:[e.rules.required],"deletable-chips":""},on:{change:e.fetchChildPointsByDeviceId},model:{value:e.selectedDevice,callback:function(t){e.selectedDevice=t},expression:"selectedDevice"}}),e._v(" "),r("v-autocomplete",{attrs:{chips:"",disabled:!e.selectedDevice,clearable:"",loading:e.isFetchingDevicePoints,"small-chips":"",label:"Point","item-value":"uuid","item-text":"name",items:e.points,rules:[e.rules.required],"deletable-chips":""},model:{value:e.formValues.producer_thing_uuid,callback:function(t){e.$set(e.formValues,"producer_thing_uuid",t)},expression:"formValues.producer_thing_uuid"}})],1):e._e(),e._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-select",{attrs:{label:"Thing Action",items:e.thingActions,"item-text":"displayName","item-value":"name"},model:{value:e.formValues.producer_application,callback:function(t){e.$set(e.formValues,"producer_application",t)},expression:"formValues.producer_application"}})],1)],1)],1)],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-card-actions",{staticClass:"align-end justify-end"},[r("v-btn",{attrs:{color:"darken-1",text:""},on:{click:e.onCancel}},[e._v(" Cancel ")]),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",loading:e.isSaving,text:""},on:{click:function(t){return e.onSubmit(e.formValues)}}},[e._v(" "+e._s(e.saveTitle)+" ")])],1)],1)}),[],!1,null,null,null);t.a=m.exports},IpYZ:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var i=r("tZmG"),a=r.n(i),n=r("YUSd"),s=r.n(n),l=r("Zv/C"),o=r.n(l),u=r("2lBV"),c=r.n(u),d=r("Dkg+"),m=r.n(d),f=r("Gjrs"),h=r.n(f),v=r("DeKB"),p=r("oCli"),_=r("uzYq"),b=r("PWxN"),g=r.n(b),w=r("NWgQ"),k=r.n(w),y=new(function(e){function t(){o()(this,t);var e=m()(this,(t.__proto__||s()(t)).call(this,p.a.rfDevices));return e.fetch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.uuid||e.id;if(!t)throw new Error("UUID is required for fetching devices of network");var r=p.a.rfNetworks(t);return(e=g()(e,["uuid","id"]))&&a()(e).length>0&&(r=r+"?"+k.a.stringify(e)),_.a.get(r).then((function(e){return{dataItems:e.devices,extraData:g()(e,["devices"])}}))},e}return h()(t,e),c()(t,[{key:"fetchAll",value:function(){var e=p.a.rfDevices();return _.a.get(e)}}]),t}(v.a))},L9C3:function(e,t,r){"use strict";r.d(t,"a",(function(){return v})),r.d(t,"c",(function(){return _})),r.d(t,"b",(function(){return b}));var i,a=r("TcPG"),n=r.n(a),s="api",l="point",o="point_filter",u="internal_api",c="external_api",d="schedule",m="global_schedule",f="alert",h="mapping",v=(i={},n()(i,s,{displayName:"API",name:s,value:s}),n()(i,l,{displayName:"Point",name:l,value:l}),n()(i,o,{displayName:"Point Filter",name:o,value:l}),n()(i,u,{displayName:"InternalAPI",name:u,value:u}),n()(i,c,{displayName:"ExternalAPI",name:c,value:c}),n()(i,d,{displayName:"Schedule",name:d,value:d}),n()(i,m,{displayName:"GlobalSchedule",name:m,value:m}),n()(i,f,{displayName:"Alert",name:f}),i),p=n()({},h,{displayName:"Mapping",name:h}),_=[v.point,v.schedule],b=[p.mapping]},VNy9:function(e,t,r){"use strict";var i={name:"breadcrumbs",props:["items"]},a=r("psIG"),n=Object(a.a)(i,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-breadcrumbs",{staticClass:"breadcrumbs",attrs:{items:e.items},scopedSlots:e._u([{key:"item",fn:function(t){var i=t.item;return[r("v-breadcrumbs-item",{staticClass:"breadcrumbs-item-text",attrs:{to:i.link,exact:""}},[e._v(" "+e._s(i.text)+" ")])]}}])})}),[],!1,null,"04244946",null);t.a=n.exports},oujF:function(e,t,r){"use strict";var i={name:"text-button",props:["onClick","text"]},a=r("psIG"),n=Object(a.a)(i,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-btn",{staticClass:"ma-1",attrs:{link:"",color:"nubeGreen",plain:""},on:{click:e.onClick}},[r("span",{staticClass:"btn-text"},[e._v(e._s(e.text))])])}),[],!1,null,null,null);t.a=n.exports},tyi7:function(e,t,r){"use strict";r.r(t);var i=r("Kz1y"),a=r.n(i),n=r("TcPG"),s=r.n(n),l=r("oGAK"),o=r("C4vA"),u=r("2SyR"),c=r("oujF"),d=r("CfmX"),m=r("97BG"),f=r("wffz"),h=r("vJYM"),v=r("4z8c"),p=r("0TWu"),_={viewWriterClones:"viewWriterClones"},b=s()({},_.viewWriterClones,(function(e,t,r){return l.a.rfFlowNetworkWriterClone.replace(":streamId",t).replace(":flowNetworkId",e).replace(":producerId",r)})),g={components:{GenericGrid:d.a,ProducersForm:o.a,IconButton:u.a,TextButton:c.a},name:"producersGrid",props:["params","getDataCb"],data:function(){return{schedules:[],allPoints:[],service:v.a,dialogNames:a()({},_),toolbarTitle:"Producers",gridName:m.j,gridHeaders:[{text:"Name",align:"center",value:"name",sortable:!0},{text:"Actions",align:"center",value:"actions",sortable:!0}]}},mounted:function(){this.fetchSchedules(),this.fetchAllPoint()},computed:{flowNetworkId:function(){return this.$route.params.flowNetworkId},streamId:function(){return this.$route.params.streamId},stream:function(){return{uuid:this.params.uuid}}},methods:{fetchSchedules:function(){var e=this;h.a.fetch().then((function(t){return e.schedules=t,t}))},fetchAllPoint:function(){var e=this;f.a.fetch({with_points:!0}).then((function(t){return e.allPoints=p.a(t),t}))},redirectTo:function(e,t){var r=t.uuid;if(r){var i=b[e];"function"==typeof i&&this.$router.push({path:i(this.flowNetworkId,this.streamId,r)})}}}},w=r("psIG"),k=Object(w.a)(g,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("generic-grid",{attrs:{gridName:e.gridName,isHeaderConfigurable:!0,params:e.params,service:e.service,headers:e.gridHeaders,getDataCb:e.getDataCb,toolbarTitle:e.toolbarTitle},scopedSlots:e._u([{key:"routeLinkName",fn:function(t){var i=t.item;return[r("text-button",{attrs:{text:i.name,onClick:function(){return e.redirectTo(e.dialogNames.viewWriterClones,i)}}})]}},{key:"createForm",fn:function(t){var i=t.onSave,a=t.onClose,n=t.isOpen,s=t.isSaving;return[n?r("producers-form",{attrs:{stream:e.stream,isEdit:!1,onSave:i,onCancel:a,isSaving:s,schedules:e.schedules,allPoints:e.allPoints}}):e._e()]}},{key:"editForm",fn:function(t){var i=t.onSave,a=t.item,n=t.onClose,s=t.isOpen,l=t.isSaving;return[s?r("producers-form",{attrs:{item:a,isEdit:!0,onSave:i,onCancel:n,isSaving:l,schedules:e.schedules,allPoints:e.allPoints}}):e._e()]}}])})],1)}),[],!1,null,null,null).exports,y=r("Ui9F"),C=r("VNy9"),x=(r("edSL"),{name:"producers",data:function(){return{params:{uuid:null,with_producers:!0},gridData:{},renderCount:0,breadcrumbItems:[]}},components:{IconButton:u.a,ProducersGrid:k,TooltipIconButton:y.a,Breadcrumbs:C.a},mounted:function(){this.initialize()},watch:{"$route.params.streamId":function(e,t){e!=t&&(this.renderCount++,this.initialize())}},methods:{initialize:function(){this.params=a()({},this.params,{uuid:this.$route.params.streamId}),this.updateBreadCrumbs()},onBack:function(){this.$router.go(-1)},getDataCb:function(e){this.gridData=e},updateBreadCrumbs:function(){this.breadcrumbItems=[],this.breadcrumbItems.push({text:"Flow Network",align:"center",disabled:!0,link:l.a.rfFlowNetwork}),this.breadcrumbItems.push({text:this.$route.params.flowNetworkId,align:"center",disabled:!1}),this.breadcrumbItems.push({text:"Streams",align:"center",disabled:!0,link:l.a.rfFlowNetworkStreams.replace(":flowNetworkId",this.$route.params.flowNetworkId)}),this.breadcrumbItems.push({text:this.$route.params.streamId,align:"center",disabled:!1}),this.breadcrumbItems.push({text:"Producers",align:"center",disabled:!0})}}}),N=Object(w.a)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{key:e.renderCount,attrs:{outlined:""}},[r("v-card-title",[r("v-btn",{staticClass:"mr-1",attrs:{icon:"",medium:""},on:{click:e.onBack}},[r("v-icon",{attrs:{medium:""}},[e._v(" mdi-arrow-left ")])],1),e._v("\n    Producers\n  ")],1),e._v(" "),r("v-card-text",[r("breadcrumbs",{attrs:{items:e.breadcrumbItems}}),e._v(" "),r("v-row",{attrs:{"no-gutter":""}},[r("v-col",{attrs:{cols:"12",lg:"12",xl:"12",md:"12",sm:"12",xs:"12"}},[e.params.uuid?r("producers-grid",{attrs:{params:e.params,getDataCb:e.getDataCb}}):e._e()],1)],1)],1)],1)}),[],!1,null,null,null);t.default=N.exports},vJYM:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var i=r("YUSd"),a=r.n(i),n=r("Zv/C"),s=r.n(n),l=r("Dkg+"),o=r.n(l),u=r("Gjrs"),c=r.n(u),d=r("oCli"),m=new(function(e){function t(){return s()(this,t),o()(this,(t.__proto__||a()(t)).call(this,d.a.rfSchedules))}return c()(t,e),t}(r("DeKB").a))},wffz:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r("DeKB"),a=r("oCli"),n=new i.a(a.a.rfNetworks)}}]);
//# sourceMappingURL=19.c7866f6292e4b1178a17.js.map