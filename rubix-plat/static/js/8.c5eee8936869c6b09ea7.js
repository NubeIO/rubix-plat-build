(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{N4QW:function(t,e,n){"use strict";n.r(e),n.d(e,"fetchPlatInfo",(function(){return r})),n.d(e,"fetchStatus",(function(){return i})),n.d(e,"upgradeLatest",(function(){return l})),n.d(e,"upgrade",(function(){return s})),n.d(e,"fetchReleases",(function(){return u})),n.d(e,"updateToken",(function(){return c})),n.d(e,"fetchTokenHint",(function(){return d})),n.d(e,"upgradeViaFile",(function(){return p})),n.d(e,"fetchAppUrl",(function(){return f})),n.d(e,"createRestartJob",(function(){return v})),n.d(e,"deleteRestartJob",(function(){return h})),n.d(e,"pingSystemService",(function(){return w}));var a=n("uzYq"),o="/rubix-service",r=function(){return a.a.get(o+"/plat")},i=function(){return a.a.get(o+"/status")},l=function(){return a.a.put(o+"/upgrade",{version:"latest"})},s=function(t){return a.a.put(o+"/upgrade",{version:t})},u=function(){return a.a.get(o+"/releases")},c=function(t){return a.a.post(o+"/token",{token:t})},d=function(){return a.a.get(o+"/token-hint")},p=function(t,e){var n=new FormData;return n.append("upgradeFile",e),n.append("version",t),a.a.post(o+"/upload-upgrade",n,{headers:{"Content-Type":"multipart/form-data"}})},f=function(){return a.a.get(o+"/app-url")},v=function(t){return a.a.post(o+"/restart-job",[t])},h=function(t){return a.a.delete(o+"/restart-job",{data:[t]})},w=function(){return a.a.get(o+"/system/ping")}},"Wgf/":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return i}));var a=n("uzYq"),o="/system-service",r=function(){return a.a.get(o)},i=function(t,e){return a.a.post(o+"/control",[{action:t,service:e}])}},iHVn:function(t,e,n){"use strict";n.r(e);var a,o=n("TcPG"),r=n.n(o),i=n("Kz1y"),l=n.n(i),s=n("Ui9F"),u={name:"switch",props:["value","enableText","disableText","enableColor","disableColor","disabled"],data:function(){return{}},components:{TooltipIconButton:s.a},computed:{_value:{get:function(){return this.value},set:function(t){return t}},enableTxt:function(){return this.enableText?this.enableText:"Enable"},disableTxt:function(){return this.disableText?this.disableText:"Disable"},enableClr:function(){return this.enableColor?this.enableColor:"green"},disableClr:function(){return this.disableColor?this.disableColor:"orange"}},methods:{onInput:function(t){this.disabled||this.$emit("input",t)}}},c=n("psIG"),d=Object(c.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t._value?t._e():n("tooltip-icon-button",{attrs:{btnColor:t.disableClr,buttonSize:"medium",btnIcon:"mdi-toggle-switch-off-outline",btnTooltip:t.disableTxt,onClick:function(){return t.onInput(!0)}}}),t._v(" "),t._value?n("tooltip-icon-button",{attrs:{btnColor:t.enableClr,buttonSize:"medium",btnIcon:"mdi-toggle-switch-outline",btnTooltip:t.enableTxt,onClick:function(){return t.onInput(!1)}}}):t._e()],1)}),[],!1,null,null,null).exports,p={name:"back-button",methods:{onBack:function(){this.$router.go(-1)}}},f=Object(c.a)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-btn",{staticClass:"mr-1",attrs:{icon:"",medium:""},on:{click:t.onBack}},[n("v-icon",{attrs:{medium:""}},[t._v(" mdi-arrow-left ")])],1)}),[],!1,null,null,null).exports,v=n("06Hw"),h=n.n(v),w=n("YYXh"),g=n.n(w),m="CLEARED",b="DOWNLOADING",D="DOWNLOADED",_={name:"rf-plugin-download",props:["selectedPlugins","startDownload","currentDownloadState","appDownloadStates","clearSelectedApps","clearDownloadStateInterval","deleteDownloadState","closeDialog","installPlugins"],data:function(){return{currentView:1,downloadStarted:!1,successInstallApps:[],failureInstallApps:[],stepsModel:{1:{loader:!1,back:1,forward:2,hasForward:!0,disabled:!1,hasCancel:!0,title:"Download",buttonLabel:"Download"},2:{loader:!1,back:1,forward:3,disabled:!0,hasForward:!0,hasCancel:!0,title:"Downloading",buttonLabel:"Continue"},3:{loader:!1,back:1,forward:3,disabled:!1,hasForward:!0,title:"Install",buttonLabel:"Install",hasCancelInstallation:!0},4:{loader:!1,back:4,forward:4,disabled:!1,hasForward:!0,title:"Complete",buttonLabel:"Close"}}}},updated:function(){this.currentDownloadState===D?this.stepsModel[2].disabled=!1:this.stepsModel[2].disabled=!0},watch:{currentDownloadState:function(t,e){this.showDownloadStateView(t)}},mounted:function(){this.showDownloadStateView(this.currentDownloadState)},computed:{apps:function(){return this.selectedPlugins.map((function(t){return{pluginName:t.name,version:t.version,displayName:t.name,state:t.state}}))},downloadedApps:function(){return(this.appDownloadStates||[]).filter((function(t){return t&&t.download})).map((function(t){return l()({},t,{name:t.plugin,isDownloading:!t.download,pluginName:t.plugin,hasError:!!t.error,errorMessage:t.error})}))}},methods:{next:function(t){var e=this;return g()(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.currentView,t.t0=n,t.next=1===t.t0?4:2===t.t0?6:3===t.t0?8:4===t.t0?10:12;break;case 4:return e.download(),t.abrupt("break",14);case 6:return e.currentView++,t.abrupt("break",14);case 8:return e.install(),t.abrupt("break",14);case 10:return e.resetPluginInstallation(),t.abrupt("break",14);case 12:return e.currentView++,t.abrupt("break",14);case 14:case"end":return t.stop()}}),t,e)})))()},install:function(){var t=this;return this.spinLoader(!0),this.installPlugins(this.downloadedApps).then((function(e){t.successInstallApps=e.filter((function(t){return t.installation})),t.failureInstallApps=e.filter((function(t){return!t.installation})),t.currentView=4})).catch((function(e){t.deleteDownloadState(),t.$toasted.show("Unexpected error occured while bulk installing apps. Please try again")})).finally((function(){t.spinLoader(!1)}))},showDownloadStateView:function(t){switch(t){case m:this.currentView=1,this.stepsModel[2].disabled=!0;break;case b:this.stepsModel[2].disabled=!0,this.currentView=2;break;case D:this.stepsModel[2].disabled=!1,this.currentView=2,this.clearDownloadStateInterval()}},back:function(){this.currentView--},cancel:function(){1==this.currentView&&this.deleteDownloadState(),this.closeDialog(!0)},spinLoader:function(t){this.stepsModel[this.currentView].loader=t},download:function(){var t=this;this.spinLoader(!0),this.startDownload(this.selectedPlugins).then((function(e){e&&"download started"==e.message.toLowerCase()&&(t.downloadStarted=!0),t.stepsModel[2].disabled=!0,t.spinLoader(!1),t.currentView++})).catch((function(){t.spinLoader(!1)}))},cancelInstallation:function(){this.resetPluginInstallation()},resetPluginInstallation:function(){this.currentView=1,this.successInstallApps=[],this.failureInstallApps=[],this.stepsModel={1:{loader:!1,back:1,forward:2,hasForward:!0,disabled:!1,title:"Download",buttonLabel:"Download"},2:{loader:!1,back:1,forward:3,disabled:!1,hasForward:!0,title:"Downloading",buttonLabel:null},3:{loader:!1,back:1,forward:3,disabled:!1,hasForward:!0,title:"Install",buttonLabel:"Install",hasCancelInstallation:!0},4:{loader:!1,back:4,forward:4,disabled:!1,hasForward:!1,title:"Complete",buttonLabel:"Close"}},this.deleteDownloadState(),this.clearSelectedApps(),this.closeDialog(!0,{unmount:!0})}}},S=Object(c.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v(t._s(t.stepsModel[t.currentView].title))])]),t._v(" "),n("v-card-text",[n("v-stepper",{model:{value:t.currentView,callback:function(e){t.currentView=e},expression:"currentView"}},[n("v-stepper-header",[n("v-stepper-step",{attrs:{complete:t.currentView>1,step:"1"}},[t._v(" 1 ")]),t._v(" "),n("v-divider"),t._v(" "),n("v-stepper-step",{attrs:{complete:t.currentView>2,step:"2"}},[t._v(" 2 ")]),t._v(" "),n("v-divider"),t._v(" "),n("v-stepper-step",{attrs:{complete:t.currentView>3,step:"3"}},[t._v(" 3 ")]),t._v(" "),n("v-divider"),t._v(" "),n("v-stepper-step",{attrs:{step:"4"}},[t._v(" 4 ")])],1),t._v(" "),n("v-stepper-items",{staticClass:"stepper-container"},[n("v-stepper-content",{staticClass:"pa-0",attrs:{step:"1"}},[n("v-list",{staticClass:"text-left",attrs:{flat:"",subheader:"",dense:""}},[n("v-subheader",[t._v("Selected Apps")]),t._v(" "),t._l(t.apps,(function(e,a){return n("v-list-item",{key:"selected_apps-"+a},[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(e.displayName)}}),t._v(" "),n("v-list-item-subtitle",{domProps:{textContent:t._s(e.version)}})],1)],1)}))],2)],1),t._v(" "),n("v-stepper-content",{staticClass:"pa-0",attrs:{step:"2"}},[n("div",{staticClass:"text-left"},[t.downloadStarted&&"CLEARED"==t.currentDownloadState?n("v-alert",{staticClass:"mb-0",attrs:{dense:"",type:"info"}},[t._v("\n              Fetching download status "),n("strong",[t._v("Please Wait!")])]):t._e(),t._v(" "),"DOWNLOADING"===t.currentDownloadState?n("v-alert",{staticClass:"mb-0",attrs:{dense:"",type:"info"}},[t._v("\n              Downloading Selected App "),n("strong",[t._v("Please Wait!")])]):t._e(),t._v(" "),"DOWNLOADED"===t.currentDownloadState?n("v-alert",{staticClass:"mb-0",attrs:{dense:"",type:"success"}},[t._v("\n              Downloading Completed\n            ")]):t._e()],1)]),t._v(" "),n("v-stepper-content",{staticClass:"pa-0",attrs:{step:"3"}},t._l(t.downloadedApps,(function(e,a){return n("v-list-item",{key:"selected_apps-"+a},[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(e.pluginName)}})],1),t._v(" "),n("v-list-item-icon",[e.isDownloading?n("div",[n("span",{staticClass:"font-weight-medium"},[n("v-chip",{attrs:{outlined:"",color:"downloadColor"}},[t._v("Downloading")])],1)]):e.hasError?n("div",[n("span",{staticClass:"font-weight-medium"},[n("v-chip",{attrs:{outlined:"",color:"red"}},[t._v("Failed")])],1)]):e.isDownloading||e.hasError?t._e():n("div",[n("span",{staticClass:"font-weight-medium"},[n("v-chip",{attrs:{outlined:"",color:"nubeGreen"}},[t._v("Downloaded")])],1)])])],1)})),1),t._v(" "),n("v-stepper-content",{staticClass:"pa-0",attrs:{step:"4"}},["DOWNLOADED"===t.currentDownloadState?n("v-list",{staticClass:"text-left",attrs:{flat:"",subheader:"",dense:""}},[t.successInstallApps.length>0?n("v-list-item-group",[n("v-subheader",[t._v("Installation Completed Apps")]),t._v(" "),t._l(t.successInstallApps,(function(e,a){return n("v-list-item",{key:"install-complete-"+a},[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(e.plugin)}})],1),t._v(" "),n("v-list-item-icon",[n("div",[n("span",{staticClass:"font-weight-medium"},[n("v-chip",{attrs:{outlined:"",color:"blue"}},[t._v("Installed")])],1)])])],1)}))],2):t._e(),t._v(" "),t.failureInstallApps.length>0?n("v-list-item-group",[n("v-subheader",[t._v(" Installation Failed Apps")]),t._v(" "),t._l(t.failureInstallApps,(function(e,a){return n("v-list-item",{key:"installation-failed-"+a},[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s(e.plugin)}}),t._v(" "),n("v-list-item-subtitle",{domProps:{textContent:t._s(e.version)}}),t._v(" "),n("v-list-item-subtitle",{domProps:{textContent:t._s(e.error)}})],1),t._v(" "),n("v-list-item-icon",[n("div",[n("span",{staticClass:"font-weight-medium"},[n("v-chip",{attrs:{outlined:"",color:"red"}},[t._v("Failed")])],1)])])],1)}))],2):t._e()],1):t._e()],1)],1)],1)],1),t._v(" "),n("v-card-actions",[t.stepsModel[t.currentView].hasForward?n("v-btn",{staticClass:"btn-height-22 white--text",attrs:{"x-small":"",color:"primary",loading:t.stepsModel[t.currentView].loader,disabled:t.stepsModel[t.currentView].disabled},on:{click:t.next}},[t._v("\n      "+t._s("function"==typeof t.stepsModel[t.currentView].buttonLabel?t.stepsModel[t.currentView].buttonLabel(t.serviceStatus):t.stepsModel[t.currentView].buttonLabel)+"\n    ")]):t._e(),t._v(" "),t.stepsModel[t.currentView].hasCancelInstallation?n("v-btn",{attrs:{small:"",color:"pink",disabled:t.stepsModel[t.currentView].disabled,text:""},on:{click:t.cancelInstallation}},[t._v("\n      Cancel Install\n    ")]):t._e(),t._v(" "),t.stepsModel[t.currentView].hasCancel?n("v-btn",{attrs:{small:"",text:""},on:{click:t.cancel}},[t._v(" Close ")]):t._e()],1)],1)}),[],!1,null,"ebc3ad00",null).exports,I=n("CfmX"),A=n("97BG"),C=n("lkCm"),k=n("nz6T"),P=n("uzYq"),x={endpoint:a="rf-plugin-upgrade/"+"FLOW_FRAMEWORK",fetch:function(){return P.a.get(a)},download:function(t){var e=a+"/download";return P.a.post(e,t)},install:function(t){var e=a+"/install";return P.a.post(e,t)},uninstall:function(t){var e=a+"/uninstall";return P.a.post(e,t)},fetchDownloadState:function(){var t=a+"/downloadState";return P.a.get(t)},deleteDownloadState:function(){var t=a+"/downloadState";return P.a.delete(t)}},N=n("A5Vd"),T={multiStepDownloadInstall:"multiStepDownloadInstall",uninstall:"uninstall"},y={name:"flow-framework-upgrade",components:{BackButton:f,RbxSwitch:d,GenericGrid:I.a,TooltipIconButton:s.a,RfPluginDownload:S,ConfirmDialog:C.a},data:function(){var t;return{remount:0,isUninstalling:!1,isUpgradePersistent:!0,isFetchingDownloadState:!1,currentDownloadState:null,downloadStateInterval:null,clearSelectedItems:null,service:x,gridName:A.h,toolbarTitle:"Plugin Distros",selectedItem:null,isDeletingDownloadState:!1,appDownloadStates:[],dialogNames:l()({},T),dialog:(t={},r()(t,T.multiStepDownloadInstall,!1),r()(t,T.uninstall,!1),t),remountDialog:r()({},T.multiStepDownloadInstall,!0),gridHeaders:[{text:"Name",align:"center",value:"name",sortable:!0},{text:"Current Version",align:"center",value:"version",sortable:!0},{text:"Installed",value:"gridItemActions"}]}},computed:{showCheckDownloadIcon:function(){return this.currentDownloadState===D},showDownloadProgressIcon:function(){return this.currentDownloadState===b}},mounted:function(){this.fetchDownloadState()},destroyed:function(){clearInterval(this.downloadStateInterval)},methods:{installPlugins:function(t){var e=this,n=t.map((function(t){return{plugin:t.name}}));return x.install(n).then((function(t){return e.remount++,t})).then((function(t){return k.changeServiceStatus(N.j.RESTART,N.l.RUBIX_FLOW_FRAMEWORK),t}))},downloadPlugin:function(t){var e=this,n=t.map((function(t){return{plugin:t.name}}));return x.download(n).then((function(t){return e.startDownloadStateInterval(),t}))},deleteDownloadState:function(){var t=this;return this.isDeletingDownloadState=!0,x.deleteDownloadState().then((function(t){return t})).finally((function(){t.fetchDownloadState(),t.clearDownloadStateInterval(),t.isDeletingDownloadState=!1}))},fetchDownloadState:function(){var t=this;this.isFetchingDownloadState=!0,x.fetchDownloadState().then((function(e){t.isFetchingDownloadState=!1;var n=e.state,a=e.plugins;switch(t.currentDownloadState=n,n){case m:t.clearDownloadStateInterval();break;case b:t.startDownloadStateInterval(),t.isUpgradePersistent=!1;break;case D:t.isUpgradePersistent=!0}Array.isArray(a)&&(t.appDownloadStates=a)})).finally((function(){t.isFetchingDownloadState=!1}))},onUninstall:function(){var t=this,e=(this.selectedItem||[]).map((function(t){return{plugin:t.name}}));if(e.length)return this.isUninstalling=!0,x.uninstall(e).then((function(e){return t.$toasted.show("Successfully uninstalled plugins."),t.closeDialog(t.dialogNames.uninstall),t.remount++,k.changeServiceStatus(N.j.RESTART,N.l.RUBIX_FLOW_FRAMEWORK),e})).catch((function(e){t.$toasted.show("Failed to uninstall plugins.",{type:"error"})})).finally((function(){t.isUninstalling=!1}))},startDownloadStateInterval:function(){var t=this;this.downloadStateInterval||(this.downloadStateInterval=setInterval((function(){t.isFetchingDownloadState||t.fetchDownloadState()}),5e3))},clearDownloadStateInterval:function(){clearInterval(this.downloadStateInterval),this.downloadStateInterval=null},closeDialog:function(t,e){var n=this;this.dialog[t]=!1,e&&e.unmount&&this.remountDialog[t]&&(this.remountDialog[t]=!1,setTimeout((function(){n.remountDialog[t]=!0}),500)),this.selectedApp={}},clearSelectedApps:function(){"function"==typeof this.clearSelectedItems&&this.clearSelectedItems()},toggleDialog:function(t,e,n){this.selectedItem=e,this.clearSelectedItems=n,this.dialog[t]=!this.dialog[t],this.dialog[t]?this.selectedItem=e:this.selectedItem=null},onGridItemInstallChange:function(t){t.is_installed?t.is_installed&&this.toggleDialog(this.dialogNames.uninstall,[l()({},t)]):this.toggleDialog(this.dialogNames.multiStepDownloadInstall,[l()({},t)])}}},V=Object(c.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("generic-grid",{key:t.remount,attrs:{itemKey:"name",service:t.service,creatable:!1,deletable:!1,hideActions:!0,headers:t.gridHeaders,toolbarTitle:t.toolbarTitle},scopedSlots:t._u([{key:"gridItemActions",fn:function(e){var a=e.item;return[n("rbx-switch",{attrs:{value:a.is_installed,enableText:"Installed",disableText:"Not Installed"},on:{input:function(){return t.onGridItemInstallChange(a)}}})]}},{key:"toolbarButtons",fn:function(e){var a=e.selectedItems,o=e.clearSelectedItems;return[n("span",{staticClass:"mr-2"},[n("v-btn",{staticClass:"btn-height-22 white--text",attrs:{disabled:t.isDeletingDownloadState,"x-small":"",color:"downloadColor"},on:{click:function(){return t.toggleDialog(t.dialogNames.multiStepDownloadInstall,a,o)}}},[t._v("\n          Download Apps\n          "),n("v-icon",{attrs:{"x-small":"",right:"",dark:""}},[t._v(" mdi-download ")])],1),t._v(" "),t.showDownloadProgressIcon?n("v-progress-circular",{attrs:{width:2,size:15,color:"white",indeterminate:""}}):t._e(),t._v(" "),t.showCheckDownloadIcon?n("v-icon",{attrs:{"x-medium":"",dark:""}},[t._v(" mdi-check")]):t._e()],1),t._v(" "),n("v-btn",{staticClass:"btn-height-22 white--text mr-2",attrs:{disabled:a&&0==a.length,"x-small":"",color:"error"},on:{click:function(){return t.toggleDialog(t.dialogNames.uninstall,a,o)}}},[t._v("\n        Uninstall Apps\n        "),n("v-icon",{attrs:{"x-small":"",right:"",dark:""}},[t._v(" mdi-delete ")])],1)]}}])}),t._v(" "),n("confirm-dialog",{attrs:{"is-open":t.dialog[t.dialogNames.uninstall],"on-close":function(){return t.closeDialog(t.dialogNames.uninstall)},"on-confirm":function(){return t.onUninstall()},loading:t.isUninstalling,"dialog-text":"Do you want to uninstall these apps ?"}}),t._v(" "),n("v-dialog",{attrs:{persistent:t.isUpgradePersistent,"max-width":"500px"},model:{value:t.dialog[t.dialogNames.multiStepDownloadInstall],callback:function(e){t.$set(t.dialog,t.dialogNames.multiStepDownloadInstall,e)},expression:"dialog[dialogNames.multiStepDownloadInstall]"}},[t.remountDialog[t.dialogNames.multiStepDownloadInstall]?n("rf-plugin-download",{attrs:{selectedPlugins:t.selectedItem,startDownload:t.downloadPlugin,installPlugins:t.installPlugins,appDownloadStates:t.appDownloadStates,clearSelectedApps:t.clearSelectedApps,currentDownloadState:t.currentDownloadState,deleteDownloadState:t.deleteDownloadState,clearDownloadStateInterval:t.clearDownloadStateInterval,closeDialog:function(e,n){return t.closeDialog(t.dialogNames.multiStepDownloadInstall,n)}}}):t._e()],1)],1)}),[],!1,null,null,null);e.default=V.exports},nz6T:function(t,e,n){"use strict";n.r(e),n.d(e,"fetchApps",(function(){return D})),n.d(e,"fetchAllApps",(function(){return _})),n.d(e,"fetchAllInstalledApps",(function(){return S})),n.d(e,"fetchSystemDefaultApps",(function(){return I})),n.d(e,"fetchAppReleases",(function(){return A})),n.d(e,"fetchAppsReleases",(function(){return C})),n.d(e,"fetchAppStatus",(function(){return k})),n.d(e,"uninstallApp",(function(){return P})),n.d(e,"installApp",(function(){return x})),n.d(e,"downloadApp",(function(){return N})),n.d(e,"changeServiceStatus",(function(){return T})),n.d(e,"uploadApp",(function(){return y})),n.d(e,"deleteAppData",(function(){return V})),n.d(e,"deleteAppDataService",(function(){return O})),n.d(e,"downloadAppData",(function(){return F})),n.d(e,"fetchJSONConfig",(function(){return E})),n.d(e,"fetchOpenVPNConfig",(function(){return R})),n.d(e,"fetchEnvConfig",(function(){return L})),n.d(e,"fetchAppConfig",(function(){return M})),n.d(e,"saveJSONConfig",(function(){return U})),n.d(e,"saveENVConfig",(function(){return W})),n.d(e,"saveOpenVPNConfig",(function(){return j})),n.d(e,"saveAppConfig",(function(){return B})),n.d(e,"deleteJSONConfig",(function(){return Y})),n.d(e,"deleteENVConfig",(function(){return z})),n.d(e,"deleteOpenVPNConfig",(function(){return G})),n.d(e,"deleteAppConfig",(function(){return H})),n.d(e,"downloadAppConfig",(function(){return $})),n.d(e,"bulkAppControl",(function(){return J})),n.d(e,"bulkInstallApps",(function(){return X})),n.d(e,"bulkDownloadApps",(function(){return K})),n.d(e,"fetchDownloadState",(function(){return q})),n.d(e,"deleteDownloadState",(function(){return Q})),n.d(e,"createRestartJob",(function(){return Z})),n.d(e,"deleteRestartJob",(function(){return tt})),n.d(e,"isSelfRestart",(function(){return et})),n.d(e,"isSelfInstall",(function(){return nt}));var a,o=n("/9Wh"),r=n.n(o),i=n("06Hw"),l=n.n(i),s=n("YYXh"),u=n.n(s),c=n("OBCi"),d=n.n(c),p=n("uzYq"),f=n("NWgQ"),v=n.n(f),h=n("N4QW"),w=n("A5Vd"),g=n("Wgf/"),m=n("+n12"),b="/rubix-app",D=function(){var t=v.a.stringify({browser_download_url:!0,latest_version:!0});return p.a.get(b+"?"+t)},_=function(){return g.b()},S=function(){return p.a.get(""+b).then((function(t){return t.filter((function(t){return t&&t.is_installed}))}))},I=function(){return g.b().then((function(t){return t.filter((function(t){return t&&t.is_installed}))}))},A=function(t){return p.a.get(b+"/releases/"+t)},C=function(t){return d.a.all(t.map((function(t){return A(t).catch((function(t){return[]}))})))},k=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p.a.get(b+"/stats/"+t,e)},P=function(t){return p.a.post(b+"/uninstall",{service:t})},x=function(t){return p.a.post(b+"/install",[t])},N=function(t){return p.a.post(b+"/download",[t])},T=function(t,e){return p.a.post(b+"/control",[{action:t,service:e}])},y=function(t,e,n){var a=new FormData;return a.append("file",t),a.append("service",e),a.append("version",n),p.a.post(b+"/app-upload",a,{headers:{"Content-Type":"multipart/form-data"}})},V=function(t){return p.a.post(b+"/delete-app-data",[{service:t}])},O=function(t){return V(t)},F=(a=u()(l.a.mark((function t(e){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.fetchAppUrl();case 2:return n=t.sent,a=n.data+"api/app/download_data?service="+e,t.abrupt("return",p.a.get(a,{headers:{"Content-Type":"application/zip"},responseType:"arraybuffer"}));case 5:case"end":return t.stop()}}),t,void 0)}))),function(t){return a.apply(this,arguments)}),E=function(t,e){return p.a.get(b+"/json-config/"+t,e)},R=function(t,e){return p.a.get(b+"/open-vpn-config/"+t,e)},L=function(t,e){return p.a.get(b+"/env/"+t,e)},M=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e===w.k.PYTHON_APP)return E(t,n).then((function(t){return t.data}));if(e===w.k.FRONTEND_APP)return L(t,n).then((function(t){return t.data}));if(e===w.k.APT_APP)return R(t,n).then((function(t){return t.data}));throw new Error("App type not supported for editing config")},U=function(t,e){return p.a.put(b+"/json-config",{service:t,data:e})},W=function(t,e){return p.a.put(b+"/env",{service:t,data:e})},j=function(t,e){return p.a.put(b+"/open-vpn-config",{service:t,data:e})},B=function(t,e,n){if(e===w.k.PYTHON_APP)return U(t,n||{});if(e===w.k.FRONTEND_APP)return W(t,n||"");if(e===w.k.APT_APP)return j(t,n);throw new Error("App type not supported for editing config")},Y=function(t){return p.a.delete(b+"/json-config",{data:{service:t}})},z=function(t){return p.a.delete(b+"/env",{data:{service:t}})},G=function(t){return p.a.delete(b+"/open-vpn-config",{data:{service:t}})},H=function(t,e){if(e===w.k.PYTHON_APP)return Y(t);if(e===w.k.FRONTEND_APP)return z(t);if(e===w.k.APT_APP)return G(t);throw new Error("App type not supported for deletion")},$=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e===w.k.PYTHON_APP)return E(t,n).then((function(e){var n=e.data;Object(m.h)(t+"-config",r()(n))}));if(e===w.k.FRONTEND_APP)return L(t,n).then((function(e){var n=e.data;Object(m.f)(""+t,n)}));if(e===w.k.APT_APP)return R(t,n).then((function(e){var n=e.data;Object(m.i)(""+t,n)}));throw new Error("App type not supported for download config")},J=function(t){return p.a.post(b+"/control",t)},X=function(t){return p.a.post(b+"/install",t)},K=function(t){return p.a.post(b+"/download",t)},q=function(){return p.a.get(b+"/download-state",{restrictToast:!0})},Q=function(){return p.a.delete(b+"/download-state")},Z=function(t){return p.a.post(b+"/restart-job",[t])},tt=function(t){return p.a.delete(b+"/restart-job",{data:[t]})},et=function(t,e,n){return t===w.j.RESTART&&e.filter((function(t){return"RUBIX_PLAT"===t.service})).map((function(t){return t.slaveId})).includes(n)},nt=function(t,e){return"RUBIX_PLAT"===t&&e}}}]);
//# sourceMappingURL=8.c5eee8936869c6b09ea7.js.map