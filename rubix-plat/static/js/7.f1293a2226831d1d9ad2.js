(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"2SyR":function(t,e,a){"use strict";var n={name:"icon-button",props:["icon","on-click","title","color","size","disabled","loading"]},i=a("psIG"),o=Object(i.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",["small"==t.size?a("v-btn",{staticClass:"pa-2",attrs:{small:"",text:"",color:t.color,loading:t.loading,disabled:t.disabled},on:{click:t.onClick}},[t.icon?a("v-icon",[t._v(t._s(t.icon))]):t._e(),t._v(" "),t.title?a("span",{staticClass:"text"},[t._v(" "+t._s(t.title))]):t._e()],1):a("v-btn",{staticClass:"pa-2",attrs:{text:"",loading:t.loading,disabled:t.disabled,color:t.color,"x-small":""},on:{click:t.onClick}},[t.icon?a("v-icon",[t._v(t._s(t.icon))]):t._e(),t._v(" "),t.title?a("span",{staticClass:"text"},[t._v(" "+t._s(t.title))]):t._e()],1)],1)}),[],!1,null,null,null);e.a=o.exports},DeKB:function(t,e,a){"use strict";var n=a("Zv/C"),i=a.n(n),o=a("uzYq"),r=a("NWgQ"),l=a.n(r),s=a("PWxN"),c=a.n(s),u=function(){var t=this;this.uri="",this.evaluateUri=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return"function"==typeof t.uri?t.uri(e):uri},this.fetch=function(e){var a=t.evaluateUri(),n=null;return e&&e.hasOwnProperty("id")?(n=e.id,e=c()(e,"id")):e&&e.hasOwnProperty("uuid")&&(n=e.uuid,e=c()(e,"uuid")),e&&(a=a+"?"+l.a.stringify(e)),n?t.fetchById(n,e):o.a.get(a)},this.fetchById=function(e,a){var n=t.evaluateUri(e);return a&&(n=n+"?"+l.a.stringify(a)),o.a.get(n)},this.remove=function(){var e=t.evaluateUri();return o.a.delete(e)},this.removeById=function(e){var a=t.evaluateUri(e);return o.a.delete(a)},this.create=function(e){var a=t.evaluateUri();return o.a.post(a,e)},this.patch=function(e,a){var n=t.evaluateUri(e);return o.a.patch(n,a)},this.update=function(e,a){var n=t.evaluateUri(e);return o.a.put(n,a)}};e.a=function t(e){i()(this,t),u.call(this),this.uri=e}},VNy9:function(t,e,a){"use strict";var n={name:"breadcrumbs",props:["items"]},i=a("psIG"),o=Object(i.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-breadcrumbs",{staticClass:"breadcrumbs",attrs:{items:t.items},scopedSlots:t._u([{key:"item",fn:function(e){var n=e.item;return[a("v-breadcrumbs-item",{staticClass:"breadcrumbs-item-text",attrs:{to:n.link,exact:""}},[t._v(" "+t._s(n.text)+" ")])]}}])})}),[],!1,null,"04244946",null);e.a=o.exports},oCli:function(t,e,a){"use strict";function n(t,e){return t?e+"/"+t:e}e.a={rfPing:function(t){return n(t,"rf-ping")},rfFNCStreams:function(t){return n(t,"rf-fnc")},rfCommands:function(t){return n(t,"/rf-commands")},rfLogin:function(t){return n(t,"/rf-login")},rfSchedules:function(t){return n(t,"/rf-schedules")},rfFlowNetwork:function(t){return n(t,"/rf-flow-network")},rfFlowNetworkClone:function(t){return n(t,"/rf-flow-network-clone")},rfJobs:function(t){return n(t,"/rf-jobs")},rfNetworks:function(t){return n(t,"/rf-networks")},rfPoints:function(t){return n(t,"/rf-points")},rfProducers:function(t){return n(t,"/rf-producers")},rfConsumers:function(t){return n(t,"/rf-consumers")},rfWriters:function(t){return n(t,"/rf-writers")},rfWriterClones:function(t){return n(t,"/rf-writer-clones")},rfStreams:function(t){return n(t,"/rf-streams")},rfStreamsClone:function(t){return n(t,"/rf-streams-clone")},rfDevices:function(t){return n(t,"/rf-devices")},rfWriterActions:function(t){return n(t,"/rf-writer-actions")}}},tKj8:function(t,e,a){"use strict";var n,i=a("snOE"),o=a.n(i),r=a("tZmG"),l=a.n(r),s=a("TcPG"),c=a.n(s),u=a("Kz1y"),d=a.n(u),m=a("bRcU"),v=a("edSL"),f=a.n(v),h=a("wGtP"),p=a("xrGn"),g="00:00:00",D="yyyy-MM-dd",b="HH:mm:ss",_={name:"v-datetime-picker",model:{prop:"datetime",event:"input"},props:{datetime:{type:[Date,String],default:null},disabled:{type:Boolean},loading:{type:Boolean},label:{type:String,default:""},dateFormat:{type:String,default:D},timeFormat:{type:String,default:"HH:mm"},clearText:{type:String,default:"CLEAR"},okText:{type:String,default:"OK"},textFieldProps:{type:Object},datePickerProps:{type:Object},timePickerProps:{type:Object},rules:{type:Array}},data:function(){return{activeTab:0,open:!1,date:"",time:g}},mounted:function(){this.init()},computed:{dateTimeFormat:function(){return this.dateFormat+" "+this.timeFormat},defaultDateTimeFormat:function(){return"yyyy-MM-dd HH:mm:ss"},formattedDatetime:function(){return this.selectedDatetime?Object(h.a)(this.selectedDatetime,this.dateTimeFormat):""},selectedDatetime:function(){if(this.date&&this.time){var t=this.date+" "+this.time;return 5===this.time.length&&(t+=":00"),Object(p.a)(t,this.defaultDateTimeFormat,new Date)}return null},dateSelected:function(){return!this.date}},methods:{init:function(){if(this.datetime){var t=void 0;this.datetime instanceof Date?t=this.datetime:("string"==typeof this.datetime||this.datetime instanceof String)&&(t=Object(p.a)(this.datetime,this.dateTimeFormat,new Date)),this.date=Object(h.a)(t,D),this.time=Object(h.a)(t,b)}},okHandler:function(){this.open=!1,this.resetPicker(),this.$emit("input",this.selectedDatetime)},handleDialogOpen:function(){this.open=!0},clearHandler:function(){this.resetPicker(),this.date="",this.time=g,this.$emit("input",null)},cancelHandler:function(){this.open=!1},resetPicker:function(){this.activeTab=0,this.$refs.timer&&(this.$refs.timer.selectingHour=!0)},showTimePicker:function(){this.activeTab=1}},watch:{datetime:function(){this.init()}}},y=a("psIG"),k=Object(y.a)(_,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-text-field",t._b({attrs:{readonly:"",rules:t.rules,label:t.label,loading:t.loading,disabled:t.disabled,value:t.formattedDatetime},on:{click:t.handleDialogOpen},scopedSlots:t._u([{key:"progress",fn:function(){return[t._t("progress",[a("v-progress-linear",{attrs:{color:"primary",indeterminate:"",absolute:"",height:"2"}})])]},proxy:!0}],null,!0)},"v-text-field",t.textFieldProps,!1)),t._v(" "),a("v-dialog",{attrs:{"max-width":"300px"},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[a("v-card",[a("v-card-text",{staticClass:"px-0 py-0"},[a("v-tabs",{attrs:{"fixed-tabs":""},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("v-tab",{key:"calendar"},[t._t("dateIcon",[a("v-icon",[t._v("mdi-calendar-outline")])])],2),t._v(" "),a("v-tab",{key:"timer",attrs:{disabled:t.dateSelected}},[t._t("timeIcon",[a("v-icon",[t._v("mdi-clock-outline")])])],2),t._v(" "),a("v-tab-item",{key:"calendar"},[a("v-date-picker",t._b({attrs:{"full-width":""},on:{input:t.showTimePicker},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},"v-date-picker",t.datePickerProps,!1))],1),t._v(" "),a("v-tab-item",{key:"timer"},[a("v-time-picker",t._b({ref:"timer",staticClass:"v-time-picker-custom",attrs:{"full-width":""},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}},"v-time-picker",t.timePickerProps,!1))],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),t._t("actions",[a("v-btn",{attrs:{color:"grey lighten-1",text:""},nativeOn:{click:function(e){return t.clearHandler(e)}}},[t._v(t._s(t.clearText))]),t._v(" "),a("v-btn",{attrs:{color:"grey lighten-1",text:""},nativeOn:{click:function(e){return t.cancelHandler(e)}}},[t._v("Cancel")]),t._v(" "),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.okHandler}},[t._v(t._s(t.okText))])],{parent:this})],2)],1)],1)],1)}),[],!1,null,null,null).exports,x=a("Ui9F"),E=a("08eb"),w=a.n(E),S=a("Zv/C"),C=a.n(S),N=a("2lBV"),T=a.n(N),$=a("F/wX"),z=a.n($),O=[{name:"HVAC"}],F={EVENT:"events",WEEKLY:"weekly",EXCEPTION:"exception"},I=(n={},c()(n,F.EVENT,"Event"),c()(n,F.WEEKLY,"Weekly"),c()(n,F.EXCEPTION,"Exception"),n),W=function(){function t(e,a,n,i,o,r,l){C()(this,t),this.DEFAULT_COLOR="gary darken-1",this.id=e||Object(m.generate)(),this.name=I[l]+" | "+a||"",this.start=n||new Date(this.getTodayDate()+"T00:00:00"),this.end=i||new Date(this.getTodayDate()+"T23:59:59"),this.color=o||this.DEFAULT_COLOR,this.timed=r||!1,this.eventType=l,this.category=l}return T()(t,[{key:"getTodayDate",value:function(){return(new Date).toISOString().split("T")[0]}}]),t}(),P={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6};function q(t){return"string"==typeof t&&(t=new Date(t)),z()(t).format("YYYY-MM-DDTHH:mm")}function V(t,e){var a=function(t){return t.split(":").concat("00")}(e),n=new Date(t);return n.setHours.apply(n,o()(a)),n}function j(t,e,a,n,i){e=function(t){return d()({},t,{days:t.days.map((function(t){return P[t]}))})}(e),a=new Date(a.date+"T00:00:00"),n=new Date(n.date+"T23:59:59");for(var o=[],r=function(){var n,i,r=a.getDay(),l=e.days.reduce((function(n,i){if(r==i){var o=function(t,e){var a=t.id,n=t.name,i=t.value,o=t.color,r=t.startTime,l=t.endTime,s=t.date,c=V(s,r),u=V(s,l);return new W(a,n+" - "+i,c,u,o,!0,F.WEEKLY)}(d()({},e,{id:t,date:new Date(a),startTime:e.start,endTime:e.end}));n.push(o)}return n}),[]);l.length&&o.push(l),n=a,(i=new Date(n)).setDate(n.getDate()+1),a=i};a-n<0;)r();return o.flat()}function L(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F.EVENT;return l()(t).reduce((function(a,n){var i=n,o=t[n],r=o.name+" - "+o.value,l=o.color,s=[];return o.dates.forEach((function(t){s.push(new W(i,r,new Date(t.start),new Date(t.end),l,!0,e))})),a.push.apply(a,s),a}),[])}function M(t){var e=[].concat(O),a=w()(t&&t.names||{});return e.concat.apply(e,o()(a))}var R={name:"event-form",components:{DateTimePicker:k,TooltipIconButton:x.a},props:["onCancel","onSave","item","isEdit","config","timezone","onDelete"],data:function(){return{isSubmitting:!1,isDeleting:!1,valid:!1,formData:{name:"",dates:[{start:null,end:null}],value:null,color:""},rules:{required:function(t){return!!t||"Required."},numberRule:function(t){return!isNaN(parseFloat(t))||"Required."}}}},computed:{scheduleNames:function(){return M(this.config)}},mounted:function(){this.isEdit&&this.item&&(this.formData={name:this.item.name,dates:this.item.dates.map((function(t){return{start:new Date(t.start),end:new Date(t.end)}})),value:this.item.value,color:this.item.color})},methods:{startDateValidator:function(t,e){var a=f()(this.formData,"dates["+e+"].start",void 0),n=f()(this.formData,"dates["+e+"].end",void 0);return!n||!a||(!(new Date(a)-new Date(n)>0)||"Start date should be less than End date")},endDateValidator:function(t,e){var a=f()(this.formData,"dates["+e+"].start",void 0),n=f()(this.formData,"dates["+e+"].end",void 0);return!n||!a||(!(new Date(a)-new Date(n)>0)||"End date should be more than Start date")},addNewEvent:function(){this.formData.dates.push({start:null,end:null})},removeEvent:function(t){this.formData.dates=this.formData.dates.filter((function(e,a){return a!=t}))},formatData:function(t){return t.dates=t.dates.map((function(t){return{start:q(t.start),end:q(t.end)}})),t},onSaveForm:function(){var t=this;this.$refs.form.validate()&&(this.isSubmitting=!0,this.onSave(this.formatData(this.formData),this.item?this.item.id:null).then((function(e){t.onCancel()})).catch((function(t){})).finally((function(){t.isSubmitting=!1})))},onDeleteItem:function(){var t=this;this.isDeleting=!0,this.onDelete(this.item.id).then((function(){t.$toasted.show("Successfully deleted"),t.onCancel()})).catch((function(t){})).finally((function(){t.isDeleting=!1}))}}},A=Object(y.a)(R,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",[t._v("Event")]),t._v(" "),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{items:t.scheduleNames,rules:[t.rules.required],"item-text":"name","item-value":"name",label:"Event name","persistent-hint":"","single-line":""},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12"}},[a("v-slider",{attrs:{label:"Value",max:"100",min:"0","thumb-label":""},model:{value:t.formData.value,callback:function(e){t.$set(t.formData,"value",e)},expression:"formData.value"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12"}},t._l(t.formData.dates,(function(e,n){return a("v-row",{key:n,attrs:{dense:""}},[a("v-col",{attrs:{cols:"5"}},[a("date-time-picker",{attrs:{rules:[t.rules.required,function(a){return t.startDateValidator(e,n)}],label:"Start Date"},model:{value:e.start,callback:function(a){t.$set(e,"start",a)},expression:"item.start"}})],1),t._v(" "),a("v-col",{attrs:{cols:"5"}},[a("date-time-picker",{attrs:{rules:[t.rules.required,function(a){return t.endDateValidator(e,n)}],label:"End Date"},model:{value:e.end,callback:function(a){t.$set(e,"end",a)},expression:"item.end"}})],1),t._v(" "),a("v-col",{attrs:{cols:"2"}},[a("tooltip-icon-button",{attrs:{disabled:t.formData.dates.length<=1,btnColor:"error",btnIcon:"mdi-delete",buttonSize:"medium",btnTooltip:"Remove Event Date",onClick:function(){return t.removeEvent(n)}}})],1),t._v(" "),a("v-col",{attrs:{cols:"12"}},[n===t.formData.dates.length-1?a("tooltip-icon-button",{attrs:{btnColor:"nubeGreen",btnIcon:"mdi-plus",buttonSize:"medium",btnTooltip:"Add Event Date",onClick:function(){return t.addNewEvent()}}}):t._e()],1)],1)})),1),t._v(" "),a("v-col",{attrs:{cols:"12"}},[a("p",{staticClass:"v-label text-left"},[t._v("Event Color")]),t._v(" "),a("v-color-picker",{attrs:{mode:"hexa"},model:{value:t.formData.color,callback:function(e){t.$set(t.formData,"color",e)},expression:"formData.color"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{text:""},on:{click:t.onCancel}},[t._v("Close")]),t._v(" "),t.isEdit?a("v-btn",{attrs:{color:"error",loading:t.isDeleting,text:""},on:{click:t.onDeleteItem}},[t._v("Delete")]):t._e(),t._v(" "),a("v-btn",{attrs:{color:"primary",loading:t.isSubmitting,text:""},on:{click:t.onSaveForm}},[t._v("Save")])],1)],1)}),[],!1,null,null,null).exports,H=a("yEOx"),U=a.n(H),Y={name:"weekly-form",props:["onSave","onCancel","item","isEdit","config","timezone","onDelete"],data:function(){return{valid:!1,showMenu:!1,showEndTime:!1,isDeleting:!1,isSubmitting:!1,formData:{name:"",days:[],start:null,end:null,color:"",value:null},rules:{required:function(t){return!!t||"Required."},numberRule:function(t){return!isNaN(parseFloat(t))||"Required."}},dayList:[{displayName:"Sunday",value:"sunday"},{displayName:"Monday",value:"monday"},{displayName:"Tuesday",value:"tuesday"},{displayName:"Wednesday",value:"wednesday"},{displayName:"Thursday",value:"thursday"},{displayName:"Friday",value:"friday"},{displayName:"Saturday",value:"saturday"}]}},computed:{scheduleNames:function(){return M(this.config)}},mounted:function(){this.isEdit&&this.item&&(this.formData={name:this.item.name,days:this.item.days,start:this.item.start,end:this.item.end,color:this.item.color,value:this.item.value},this.formData=this.parseStartEndTime(this.formData))},methods:{parseStartEndTime:function(t){return t},formatStartEndTime:function(t){return t},onSaveForm:function(){var t=this;this.$refs.form.validate()&&(this.isSubmitting=!0,this.onSave(this.formatStartEndTime(this.formData),this.item?this.item.id:null).then((function(e){t.onCancel()})).catch((function(){t.$toasted.show("Cannot create weekly event",{type:"error"})})).finally((function(){t.isSubmitting=!1})))},onDeleteItem:function(){var t=this;this.isDeleting=!0,this.onDelete(this.item.id).then((function(){t.$toasted.show("Successfully deleted"),t.onCancel()})).catch((function(t){})).finally((function(){t.isDeleting=!1}))}}},B=Object(y.a)(Y,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",[t._v("Weekly Form")]),t._v(" "),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{"single-line":"","persistent-hint":"","item-text":"name","item-value":"name",label:"Event name",items:t.scheduleNames,rules:[t.rules.required]},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12"}},[a("v-slider",{attrs:{label:"Value",max:"100",min:"0","thumb-label":""},model:{value:t.formData.value,callback:function(e){t.$set(t.formData,"value",e)},expression:"formData.value"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{label:"Days","item-value":"value",multiple:"",chips:"",clearable:"",rules:[t.rules.required],"deletable-chips":"",items:t.dayList,"item-text":"displayName"},model:{value:t.formData.days,callback:function(e){t.$set(t.formData,"days",e)},expression:"formData.days"}})],1),t._v(" "),a("v-col",{attrs:{cols:"6"}},[a("v-menu",{ref:"startMenu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.formData.start,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(e){return t.$set(t.formData,"start",e)},"update:return-value":function(e){return t.$set(t.formData,"start",e)}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{rules:[t.rules.required],label:"Start Time",readonly:""},model:{value:t.formData.start,callback:function(e){t.$set(t.formData,"start",e)},expression:"formData.start"}},"v-text-field",i,!1),n))]}}]),model:{value:t.showMenu,callback:function(e){t.showMenu=e},expression:"showMenu"}},[t._v(" "),t.showMenu?a("v-time-picker",{attrs:{"full-width":""},on:{input:function(e){return t.$refs.startMenu.save(t.formData.start)}},model:{value:t.formData.start,callback:function(e){t.$set(t.formData,"start",e)},expression:"formData.start"}}):t._e()],1)],1),t._v(" "),a("v-col",{attrs:{cols:"6"}},[a("v-menu",{ref:"endMenu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.formData.end,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(e){return t.$set(t.formData,"end",e)},"update:return-value":function(e){return t.$set(t.formData,"end",e)}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{rules:[t.rules.required],label:"End Time",readonly:""},model:{value:t.formData.end,callback:function(e){t.$set(t.formData,"end",e)},expression:"formData.end"}},"v-text-field",i,!1),n))]}}]),model:{value:t.showEndTime,callback:function(e){t.showEndTime=e},expression:"showEndTime"}},[t._v(" "),t.showEndTime?a("v-time-picker",{attrs:{"full-width":""},on:{"click:minute":function(e){return t.$refs.endMenu.save(t.formData.end)}},model:{value:t.formData.end,callback:function(e){t.$set(t.formData,"end",e)},expression:"formData.end"}}):t._e()],1)],1),t._v(" "),a("v-col",{attrs:{cols:"12"}},[a("p",{staticClass:"v-label text-left"},[t._v("Event Color")]),t._v(" "),a("v-color-picker",{attrs:{mode:"hexa"},model:{value:t.formData.color,callback:function(e){t.$set(t.formData,"color",e)},expression:"formData.color"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{text:""},on:{click:t.onCancel}},[t._v("Close")]),t._v(" "),t.isEdit?a("v-btn",{attrs:{color:"error",loading:t.isDeleting,text:""},on:{click:t.onDeleteItem}},[t._v("Delete")]):t._e(),t._v(" "),a("v-btn",{attrs:{color:"primary",loading:t.isSubmitting,text:""},on:{click:t.onSaveForm}},[t._v("Save")])],1)],1)}),[],!1,null,null,null).exports,G=a("dqfB"),K=a("A3AF"),X={data:function(){return{fav:!0,valid:!1,menu:!1,listRenderCount:0,message:!1,hints:!0,timezoneVal:null,timezones:[],names:[],scheduleNameList:[],rules:{required:function(t){return!!t||"Required."}}}},components:{TooltipIconButton:x.a},props:["timezone","scheduleNames","onSubmit"],mounted:function(){this.initialize()},watch:{menu:function(t,e){t&&this.initialize()}},methods:{initialize:function(){this.timezone?this.timezoneVal=this.timezone:this.timezoneVal=G.a(),this.timezones=G.c(),this.updateScheduleNameList()},updateScheduleNameList:function(){this.scheduleNameList=w()(this.scheduleNames||{}).map((function(t){return d()({},t)}))},createScheduleName:function(t){var e={id:Object(K.a)(),name:t};this.scheduleNameList=this.scheduleNameList.concat(e)},updateScheduleName:function(t,e){this.scheduleNames=d()({},this.scheduleNames,c()({},t,d()({},this.scheduleNames[t],{name:e})))},removeScheduleName:function(t){this.scheduleNameList=this.scheduleNameList.filter((function(e){return e.id!==t}))},onSave:function(){if(this.menu=!1,this.$refs.form.validate()){var t={timezone:this.timezoneVal,names:this.scheduleNameList.reduce((function(t,e){return t[e.id]=d()({},e),t}),{})};this.onSubmit(t)}}}},J=Object(y.a)(X,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,"offset-x":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mr-1 btn-height-22",attrs:{color:"orange darken-2","x-small":""}},"v-btn",i,!1),n),[a("span",[t._v("Calendar Settings")]),t._v(" "),a("v-icon",{attrs:{"x-small":"",right:""}},[t._v(" mdi-calendar")])],1)]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),a("v-card",{staticClass:"text-left"},[a("v-list",[a("v-list-item",[a("v-list-item-avatar",[a("v-icon",[t._v("mdi-calendar")])],1),t._v(" "),a("v-list-item-content",[a("v-list-item-title",[t._v("Calendar Panel")]),t._v(" "),a("v-list-item-subtitle",[t._v("Configure timezone/schedule names")])],1)],1)],1),t._v(" "),a("v-divider"),t._v(" "),a("v-divider"),t._v(" "),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[a("v-autocomplete",{attrs:{dense:"",required:"",clearable:"",items:t.timezones},model:{value:t.timezoneVal,callback:function(e){t.timezoneVal=e},expression:"timezoneVal"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12"}},[a("v-divider")],1),t._v(" "),a("v-col",{attrs:{cols:"12"}},[a("p",{staticClass:"caption"},[t._v("Schedule Names")]),t._v(" "),a("div",{staticClass:"schedule-name-list-wrapper"},t._l(t.scheduleNameList,(function(e,n){return a("div",{key:n+"-"+t.listRenderCount},[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"11"}},[a("v-text-field",{attrs:{dense:"",rules:[t.rules.required],required:""},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"scheduleName.name"}})],1),t._v(" "),a("v-col",{attrs:{cols:"1"}},[a("tooltip-icon-button",{attrs:{btnColor:"red",btnIcon:"mdi-delete",buttonSize:"medium",btnTooltip:"Delete",onClick:function(){return t.removeScheduleName(e.id)}}})],1)],1)],1)})),0),t._v(" "),a("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[a("tooltip-icon-button",{attrs:{btnColor:"blue",btnIcon:"mdi-plus",buttonSize:"medium",btnTooltip:"Add Schedule Name",onClick:function(){return t.createScheduleName("")}}})],1)],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{text:""},on:{click:function(e){t.menu=!1}}},[t._v(" Cancel ")]),t._v(" "),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.onSave}},[t._v(" Save ")])],1)],1)],1)}),[],!1,null,null,null).exports,Z=a("6J4u"),Q=a.n(Z),tt={name:"execption-event-form",props:["onSave","onCancel","item","isEdit","config","onDelete"],components:{TooltipIconButton:x.a,DateTimePicker:k},data:function(t){return{isDeleting:!1,valid:!1,dateFormatted:null,isSubmitting:!1,showMenu:!1,formData:{name:"",dates:[{start:null,end:null}],color:"",value:null},rules:{required:function(t){return!!t||"Required."},numberRule:function(t){return!isNaN(parseFloat(t))||"Required."}}}},mounted:function(){this.isEdit&&this.item&&(this.formData={name:this.item.name,color:this.item.color,value:this.item.value,dates:(this.item.dates||[]).map((function(t){return{start:new Date(t.start),end:new Date(t.end)}}))})},computed:{computedDateFormatted:function(){return this.formatDate(this.date)},scheduleNames:function(){return M(this.config)}},watch:{date:function(t){this.dateFormatted=this.formatDate(this.date)}},methods:{startDateValidator:function(t,e){var a=f()(this.formData,"dates["+e+"].start",void 0),n=f()(this.formData,"dates["+e+"].end",void 0);return!n||!a||(!(new Date(a)-new Date(n)>0)||"Start date should be less than End date")},endDateValidator:function(t,e){var a=f()(this.formData,"dates["+e+"].start",void 0),n=f()(this.formData,"dates["+e+"].end",void 0);return!n||!a||(!(new Date(a)-new Date(n)>0)||"End date should be more than Start date")},getDate:function(t){var e=(new Date).getFullYear(),a=t.concat("-",e);return new Date(a).toISOString().substr(0,10)},getFormattedDate:function(t){return Object(h.a)(new Date(t+"T00:00:00"),"MM-dd")},addNewEvent:function(){this.formData.dates.push({start:null,end:null})},removeEvent:function(t){this.formData.dates=this.formData.dates.filter((function(e,a){return a!=t}))},formatData:function(t){var e=U()(t);return d()({},e,{dates:e.dates.map((function(t){return{start:q(t.start),end:q(t.end)}}))})},formatDate:function(t){if(!t)return null;var e=t.split("-"),a=Q()(e,3);a[0];return a[1]+"-"+a[2]},parseDate:function(t){if(!t)return null;var e=t.split("-"),a=Q()(e,2),n=a[0],i=a[1];return(new Date).getFullYear()+"-"+n.padStart(2,"0")+"-"+i.padStart(2,"0")},onSaveForm:function(){var t=this;this.$refs.form.validate()&&(this.formData.date=this.dateFormatted,this.isSubmitting=!0,this.onSave(this.formatData(this.formData),this.item?this.item.id:null).then((function(e){t.onCancel()})).catch((function(){})).finally((function(){t.isSubmitting=!1})))},onDeleteItem:function(){var t=this;this.isDeleting=!0,this.onDelete(this.item.id).then((function(){t.$toasted.show("Successfully deleted"),t.onCancel()})).catch((function(t){})).finally((function(){t.isDeleting=!1}))}}},et=Object(y.a)(tt,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",[t._v("Execption Form")]),t._v(" "),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{items:t.scheduleNames,rules:[t.rules.required],"item-text":"name","item-value":"name",label:"Event name","persistent-hint":"","single-line":""},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12"}},[a("v-slider",{attrs:{label:"Value",max:"100",min:"0","thumb-label":""},model:{value:t.formData.value,callback:function(e){t.$set(t.formData,"value",e)},expression:"formData.value"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12"}},t._l(t.formData.dates,(function(e,n){return a("v-row",{key:n,attrs:{dense:""}},[a("v-col",{attrs:{cols:"5"}},[a("date-time-picker",{attrs:{rules:[t.rules.required,function(a){return t.startDateValidator(e,n)}],label:"Start Date"},model:{value:e.start,callback:function(a){t.$set(e,"start",a)},expression:"item.start"}})],1),t._v(" "),a("v-col",{attrs:{cols:"5"}},[a("date-time-picker",{attrs:{rules:[t.rules.required,function(a){return t.endDateValidator(e,n)}],label:"End Date"},model:{value:e.end,callback:function(a){t.$set(e,"end",a)},expression:"item.end"}})],1),t._v(" "),a("v-col",{attrs:{cols:"2"}},[a("tooltip-icon-button",{attrs:{disabled:t.formData.dates.length<=1,btnColor:"error",btnIcon:"mdi-delete",buttonSize:"medium",btnTooltip:"Remove Event Date",onClick:function(){return t.removeEvent(n)}}})],1),t._v(" "),a("v-col",{attrs:{cols:"12"}},[n===t.formData.dates.length-1?a("tooltip-icon-button",{attrs:{btnColor:"nubeGreen",btnIcon:"mdi-plus",buttonSize:"medium",btnTooltip:"Add Event Date",onClick:function(){return t.addNewEvent()}}}):t._e()],1)],1)})),1),t._v(" "),a("v-col",{attrs:{cols:"12"}},[a("p",{staticClass:"v-label text-left"},[t._v("Event Color")]),t._v(" "),a("v-color-picker",{attrs:{mode:"hexa"},model:{value:t.formData.color,callback:function(e){t.$set(t.formData,"color",e)},expression:"formData.color"}})],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{text:""},on:{click:t.onCancel}},[t._v("Close")]),t._v(" "),t.isEdit?a("v-btn",{attrs:{color:"error",loading:t.isDeleting,text:""},on:{click:t.onDeleteItem}},[t._v("Delete")]):t._e(),t._v(" "),a("v-btn",{attrs:{color:"primary",loading:t.isSubmitting,text:""},on:{click:t.onSaveForm}},[t._v("Save")])],1)],1)}),[],!1,null,null,null).exports,at={name:"tooltip-button",props:["helpText","color","onClick","className","title","btnIcon"]},nt=Object(y.a)(at,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({class:t.className,attrs:{"x-small":"",color:t.color},on:{click:t.onClick}},"v-btn",i,!1),n),[a("span",[t._v(t._s(t.title))]),t._v(" "),a("v-icon",{attrs:{"x-small":"",right:""}},[t._v(" "+t._s(t.btnIcon))])],1)]}}])},[t._v(" "),t.helpText?a("span",{staticStyle:{"white-space":"pre-line"},domProps:{innerHTML:t._s(t.helpText)}}):t._e()])}),[],!1,null,null,null).exports,it={createEventDialog:"createEventDialog",createWeeklyEventDialog:"createWeeklyEventDialog",createExceptionDialog:"createExceptionDialog",updateEventDialog:"updateEventDialog",updateWeeklyEventDialog:"updateWeeklyEventDialog",updateExceptionDialog:"updateExceptionDialog"},ot=F,rt={name:"calendar-view",data:function(){var t;return{type:"week",rules:{required:function(t){return!!t||"Required."}},types:["month","week","day"],mode:"stack",selectedItem:null,weekday:[0,1,2,3,4,5,6],weekdays:[{text:"Sun - Sat",value:[0,1,2,3,4,5,6]},{text:"Mon - Sun",value:[1,2,3,4,5,6,0]},{text:"Mon - Fri",value:[1,2,3,4,5]}],value:"",events:[],dialogNames:d()({},it),dialog:(t={},c()(t,it.createEventDialog,!1),c()(t,it.createWeeklyEventDialog,!1),c()(t,it.createExceptionDialog,!1),c()(t,it.updateEventDialog,!1),c()(t,it.updateWeeklyEventDialog,!1),c()(t,it.updateExceptionDialog,!1),t),formTypes:{events:"events",exception:"exception",weekly:"weekly"}}},computed:{timezone:function(){return this.config.timezone}},props:["data","updateData","isLoadingCalendar","config"],components:{EventForm:A,WeeklyEventForm:B,CalendarExtraPanel:J,ExceptionEventForm:et,TooltipButton:nt},methods:{create:function(t,e){var a=U()(this.data);return a[e]||(a[e]={}),a[e][Object(m.generate)()]=d()({},t),this.updateData(a,this.config)},update:function(t,e,a){var n=U()(this.data);return n[e][a]=d()({},t),this.updateData(n,this.config)},onDelete:function(t,e){var a=U()(this.data);return delete a[t][e],this.updateData(a,this.config)},onSaveConfig:function(t){return this.updateData(this.data,t)},event:function(t){return{name:t.name,start:t.start,end:t.end,color:t.color,timed:t.timed}},getEvents:function(t){var e=t.start,a=t.end;return this.events=this.transformDataToView(this.data,{calendarStartDate:e,calendarEndDate:a}),this.events},getEventColor:function(t){return t.color},toggleDialog:function(t,e){t||debuggger,this.selectedItem=e,this.dialog[t]=!this.dialog[t],this.dialog[t]?this.selectedItem=e:this.selectedItem=null},closeDialog:function(t){this.dialog[t]=!1,this.selectedItem={}},rnd:function(t,e){return Math.floor((e-t+1)*Math.random())+t},transformDataToView:function(t,e){var a=this,n=e.calendarStartDate,i=e.calendarEndDate,r=t.events||{},s=t.weekly||{},c=t.exception||{},u=L(r),d=l()(s).map((function(t){return j(t,s[t],n,i,a.timezone)})).flat(),m=L(c,ot.EXCEPTION);return[].concat(o()(u),o()(d),o()(m))},getEventDataObject:function(t,e){var a=f()(this.data,t+"["+e+"]");return d()({},a,{id:e})},onEventClick:function(t){var e=t.event,a=e.id;switch(e.eventType){case ot.EVENT:this.toggleDialog(it.updateEventDialog,this.getEventDataObject(ot.EVENT,a));break;case ot.WEEKLY:this.toggleDialog(it.updateWeeklyEventDialog,this.getEventDataObject(ot.WEEKLY,a));break;case ot.EXCEPTION:this.toggleDialog(it.updateExceptionDialog,this.getEventDataObject(ot.EXCEPTION,a))}}}},lt=Object(y.a)(rt,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"ma-2",attrs:{outlined:"",loading:t.isLoadingCalendar}},[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",[a("span",{staticClass:"subtitle-1"},[t._v("Calendar Schedule")])]),t._v(" "),a("v-spacer"),t._v(" "),a("span",{staticClass:"caption pr-3"},[t._v(t._s(t.timezone))]),t._v(" "),a("span",[a("tooltip-button",{attrs:{title:"Event",color:"nubeAqua",btnIcon:"mdi-plus",className:"mr-1 btn-height-22 white-text",helpText:"An event is a single ON event that will put the scheduled event into a TRUE mode.",onClick:function(){return t.toggleDialog(t.dialogNames.createEventDialog)}}}),t._v(" "),a("tooltip-button",{attrs:{title:"Weekly",color:"nubeAqua",btnIcon:"mdi-plus",className:"mr-1 btn-height-22 white-text",helpText:"A weekly event is a 7 day repeating time schedule, when the time is within the scheduled slot then the event is set to TRUE mode.",onClick:function(){return t.toggleDialog(t.dialogNames.createWeeklyEventDialog)}}}),t._v(" "),a("tooltip-button",{attrs:{title:"Exception",color:"nubeAqua",btnIcon:"mdi-plus",className:"mr-1 btn-height-22 white-text",helpText:"An exception event is a single OFF event that will put the scheduled event into a FALSE mode.",onClick:function(){return t.toggleDialog(t.dialogNames.createExceptionDialog)}}}),t._v(" "),a("calendar-extra-panel",{attrs:{scheduleNames:t.config.names,timezone:t.config.timezone,onSubmit:t.onSaveConfig}})],1)],1),t._v(" "),a("v-sheet",{staticClass:"d-flex",attrs:{tile:"",height:"54"}},[a("v-btn",{staticClass:"ma-2",attrs:{icon:""},on:{click:function(e){return t.$refs.calendar.prev()}}},[a("v-icon",[t._v("mdi-chevron-left")])],1),t._v(" "),a("v-select",{staticClass:"ma-2",attrs:{items:t.types,dense:"",outlined:"","hide-details":"",label:"Type"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),t._v(" "),a("v-spacer"),t._v(" "),a("v-select",{staticClass:"ma-2",attrs:{items:t.weekdays,dense:"",outlined:"","hide-details":"",label:"Weekdays"},model:{value:t.weekday,callback:function(e){t.weekday=e},expression:"weekday"}}),t._v(" "),a("v-btn",{staticClass:"ma-2",attrs:{icon:""},on:{click:function(e){return t.$refs.calendar.next()}}},[a("v-icon",[t._v("mdi-chevron-right")])],1)],1),t._v(" "),a("v-sheet",{attrs:{height:"500"}},[a("v-calendar",{ref:"calendar",attrs:{type:t.type,events:t.events,weekdays:t.weekday,"event-overlap-mode":t.mode,"event-overlap-threshold":30,"event-color":t.getEventColor},on:{"click:event":t.onEventClick,change:t.getEvents},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.dialog[t.dialogNames.createEventDialog],callback:function(e){t.$set(t.dialog,t.dialogNames.createEventDialog,e)},expression:"dialog[dialogNames.createEventDialog]"}},[t.dialog[t.dialogNames.createEventDialog]?a("event-form",{attrs:{isEdit:!1,config:t.config,timezone:t.timezone,onCancel:function(){return t.closeDialog(t.dialogNames.createEventDialog)},onSave:function(e){return t.create(e,t.formTypes.events)}}}):t._e()],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.dialog[t.dialogNames.createWeeklyEventDialog],callback:function(e){t.$set(t.dialog,t.dialogNames.createWeeklyEventDialog,e)},expression:"dialog[dialogNames.createWeeklyEventDialog]"}},[t.dialog[t.dialogNames.createWeeklyEventDialog]?a("weekly-event-form",{attrs:{isEdit:!1,config:t.config,timezone:t.timezone,onCancel:function(){return t.closeDialog(t.dialogNames.createWeeklyEventDialog)},onSave:function(e){return t.create(e,t.formTypes.weekly)}}}):t._e()],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.dialog[t.dialogNames.createExceptionDialog],callback:function(e){t.$set(t.dialog,t.dialogNames.createExceptionDialog,e)},expression:"dialog[dialogNames.createExceptionDialog]"}},[t.dialog[t.dialogNames.createExceptionDialog]?a("exception-event-form",{attrs:{isEdit:!1,config:t.config,timezone:t.timezone,onCancel:function(){return t.closeDialog(t.dialogNames.createExceptionDialog)},onSave:function(e){return t.create(e,t.formTypes.exception)}}}):t._e()],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.dialog[t.dialogNames.updateEventDialog],callback:function(e){t.$set(t.dialog,t.dialogNames.updateEventDialog,e)},expression:"dialog[dialogNames.updateEventDialog]"}},[t.dialog[t.dialogNames.updateEventDialog]?a("event-form",{attrs:{isEdit:!0,config:t.config,item:t.selectedItem,onDelete:function(e){return t.onDelete(t.formTypes.events,e)},timezone:t.timezone,onCancel:function(){return t.closeDialog(t.dialogNames.updateEventDialog)},onSave:function(e,a){return t.update(e,t.formTypes.events,a)}}}):t._e()],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.dialog[t.dialogNames.updateWeeklyEventDialog],callback:function(e){t.$set(t.dialog,t.dialogNames.updateWeeklyEventDialog,e)},expression:"dialog[dialogNames.updateWeeklyEventDialog]"}},[t.dialog[t.dialogNames.updateWeeklyEventDialog]?a("weekly-event-form",{attrs:{isEdit:!0,config:t.config,timezone:t.timezone,item:t.selectedItem,onDelete:function(e){return t.onDelete(t.formTypes.weekly,e)},onCancel:function(){return t.closeDialog(t.dialogNames.updateWeeklyEventDialog)},onSave:function(e,a){return t.update(e,t.formTypes.weekly,a)}}}):t._e()],1),t._v(" "),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.dialog[t.dialogNames.updateExceptionDialog],callback:function(e){t.$set(t.dialog,t.dialogNames.updateExceptionDialog,e)},expression:"dialog[dialogNames.updateExceptionDialog]"}},[t.dialog[t.dialogNames.updateExceptionDialog]?a("exception-event-form",{attrs:{isEdit:!0,config:t.config,item:t.selectedItem,timezone:t.timezone,onDelete:function(e){return t.onDelete(t.formTypes.exception,e)},onCancel:function(){return t.closeDialog(t.dialogNames.updateExceptionDialog)},onSave:function(e,a){return t.update(e,t.formTypes.exception,a)}}}):t._e()],1)],1)}),[],!1,null,null,null);e.a=lt.exports},vJYM:function(t,e,a){"use strict";a.d(e,"a",(function(){return p}));var n=a("YUSd"),i=a.n(n),o=a("Zv/C"),r=a.n(o),l=a("2lBV"),s=a.n(l),c=a("Dkg+"),u=a.n(c),d=a("Gjrs"),m=a.n(d),v=a("oCli"),f=a("DeKB"),h=a("uzYq"),p=new(function(t){function e(){return r()(this,e),u()(this,(e.__proto__||i()(e)).call(this,v.a.rfSchedules))}return m()(e,t),s()(e,[{key:"patchSchedule",value:function(t,e){var a=v.a.rfSchedules()+"/write/"+t;return h.a.patch(a,e)}}]),e}(f.a))}}]);
//# sourceMappingURL=7.f1293a2226831d1d9ad2.js.map