(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{"+SqX":function(t,e,n){"use strict";var i={name:"page-title",props:["title"]},o=n("psIG"),a=Object(o.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",{staticClass:"text-h5 text-left py-3"},[n("span",[t._v(t._s(t.title))]),t._v(" "),t._t("refreshIcon"),t._v(" "),t._t("titleActions"),t._v(" "),t._t("spinner")],2)}),[],!1,null,null,null);e.a=a.exports},"6MuH":function(t,e,n){"use strict";var i={name:"switch-button",props:["is-enable","enable-text","disable-text","enable-color","disable-color","on-switch"],components:{TooltipIconButton:n("Ui9F").a}},o=n("psIG"),a=Object(o.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isEnable?t._e():n("tooltip-icon-button",{attrs:{btnColor:t.disableColor,buttonSize:"medium",btnIcon:"mdi-toggle-switch-off-outline",btnTooltip:t.disableText,onClick:t.onSwitch}}),t._v(" "),t.isEnable?n("tooltip-icon-button",{attrs:{btnColor:t.enableColor,buttonSize:"medium",btnIcon:"mdi-toggle-switch-outline",btnTooltip:t.enableText,onClick:t.onSwitch}}):t._e()],1)}),[],!1,null,null,null);e.a=a.exports},Ui9F:function(t,e,n){"use strict";var i={name:"tooltip-icon-button",props:["btnIcon","btnTooltip","onClick","btnColor","buttonSize","disabled"]},o=n("psIG"),a=Object(o.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,o=e.attrs;return["medium"==t.buttonSize?n("v-btn",t._g(t._b({attrs:{disabled:t.disabled,icon:"",medium:"",color:t.btnColor},on:{click:t.onClick}},"v-btn",o,!1),i),[n("v-icon",{attrs:{medium:"",dark:""}},[t._v(" "+t._s(t.btnIcon)+" ")])],1):n("v-btn",t._g(t._b({attrs:{disabled:t.disabled,icon:"",small:"",color:t.btnColor},on:{click:t.onClick}},"v-btn",o,!1),i),[n("v-icon",{attrs:{small:"",dark:""}},[t._v(" "+t._s(t.btnIcon)+" ")])],1)]}}])},[t._v(" "),n("span",{staticStyle:{"white-space":"pre-line"},domProps:{innerHTML:t._s(t.btnTooltip)}})])}),[],!1,null,null,null);e.a=a.exports},oxoM:function(t,e,n){"use strict";n.r(e);var i=n("t3kO"),o=n.n(i),a=n("Kz1y"),l=n.n(a),s=n("+SqX"),r=n("6MuH"),c=n("Ui9F"),u=n("+n12"),d={props:["on-close","is-open","on-save","edit-all","edit-field"],data:function(){return{toUpperTextKey:u.r}},methods:{}},f=n("psIG"),p=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("Mass Edit")])]),t._v(" "),n("v-card-text",{staticClass:"text-start"},["boolean"==typeof t.editAll[t.editField]?n("v-switch",{attrs:{inset:"",color:"exportColor",label:t.toUpperTextKey(t.editField)},model:{value:t.editAll[t.editField],callback:function(e){t.$set(t.editAll,t.editField,e)},expression:"editAll[editField]"}}):t._e()],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{text:""},on:{click:t.onClose}},[t._v("Close")]),t._v(" "),n("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){return t.onSave(t.editAll[t.editField],t.editField)}}},[t._v("Save")])],1)],1)}),[],!1,null,null,null).exports,h=n("yw9G"),g=n("8cQr"),v=(n("lhOF"),n("AdsU")),m=(n("1j+n"),n("hfTa"),n("+v5G"),{components:{PrismEditor:g.a},props:["code"],data:function(t){return{value:t.code}},watch:{value:function(t,e){t!==e&&this.onInput(t)}},methods:{highlighter:function(t){return Object(v.highlight)(t,v.languages.yml)},onInput:function(t){this.$emit("input",t)}}}),b=Object(f.a)(m,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("prism-editor",{staticClass:"my-editor",attrs:{highlight:t.highlighter},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})}),[],!1,null,null,null).exports,_={name:"config-form",props:["onClose","isOpen","pluginName"],data:function(){return{rules:{required:function(t){return!!t||"Required."}},valid:!1,loadingData:!1,config:"",newValue:"",error:{message:""}}},components:{YamlEditor:b,FormError:n("zEfX").a},computed:{},watch:{isOpen:function(t){t&&this.getConfigs()}},mounted:function(){this.error.message=""},methods:{getConfigs:function(){var t=this;this.loadingData=!0,h.d(this.pluginName).then((function(e){t.config=e})).catch((function(){t.config=""})).finally((function(){t.loadingData=!1}))},postConfig:function(){var t=this,e={data:this.newValue};this.error.message="",h.f(this.pluginName,e).then((function(e){t.$toasted.show("Config is updated successfully!"),t.onClose()})).catch((function(e){t.error.message="YAML config incorrect.",t.$toasted.show("Check your YAML config!",{type:"error"})}))},isCorrectKey:function(t){return!0},onEditorValueChange:function(t){this.newValue=t}}},y=Object(f.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{attrs:{fixed:"",right:"",width:"450px"},model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[n("v-card",{staticStyle:{height:"100%"},attrs:{loading:t.loadingData}},[n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[t._v(t._s(t.pluginName))]),t._v(" "),n("v-spacer"),t._v(" "),n("v-icon",{staticClass:"mr-6",attrs:{color:"primary",disabled:!t.valid},on:{click:t.postConfig}},[t._v("mdi-content-save")]),t._v(" "),n("v-icon",{on:{click:t.onClose}},[t._v("mdi-close")])],1),t._v(" "),n("v-divider"),t._v(" "),n("v-container",{staticClass:"pa-4 mt-4"},[n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[t.loadingData?t._e():n("yaml-editor",{attrs:{code:t.config},on:{input:t.onEditorValueChange}})],1),t._v(" "),n("form-error",{attrs:{error:t.error}})],1)],1)],1)}),[],!1,null,null,null).exports,x=n("A5Vd"),C="disabled",E="enabled",w={components:{PageTitle:s.a,YamlEditor:b,TooltipIconButton:c.a,SwitchButton:r.a,PluginsMassEditDialog:p,ConfigForm:y},watch:{},data:function(){return{toUpperTextKey:u.r,tableProps:l()({},x.d),plugins:[],headers:[{text:"Name",align:"start",value:"name",sortable:!0},{text:"Module Path",align:"start",value:"module_path"},{text:"Author",align:"start",value:"author"},{text:"Website",align:"start",value:"website"},{text:"Enabled",align:"start",value:"enabled",sortable:!0},{text:"Protocol Type",align:"start",value:"protocol_type"},{text:"UUID",align:"start",value:"uuid"},{text:"Config",align:"start",value:"config"}],selectedItems:[],editAll:{enabled:!1},dialogMassEdit:!1,dialogConfig:!1,loadingData:!1,search:"",searchItems:[],editField:"",pluginName:""}},mounted:function(){this.getPlugins()},methods:{getPlugins:function(){var t=this;this.loadingData=!0,h.c().then((function(e){t.plugins=e,t.$store.commit("changeRfPlugins",e)})).finally((function(){t.loadingData=!1}))},updatePlugin:function(t){var e=this,n={enabled:t.enabled},i=this.plugins.findIndex((function(e){return e.uuid==t.uuid}));h.a(t.name,n).then((function(t){t&&t.state&&(t.state==E?(e.plugins[i].enabled=!0,e.$toasted.show("Plugin enabled.")):t.state==C&&(e.plugins[i].enabled=!1,e.$toasted.show("Plugin disabled.")))})).catch((function(){e.plugins[i].enabled=!1}))},saveMassEdit:function(t,e){var n=!0,i=!1,a=void 0;try{for(var l,s=o()(this.selectedItems);!(n=(l=s.next()).done);n=!0){var r=l.value;r[e]=t,this.updatePlugin(r)}}catch(t){i=!0,a=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}this.dialogMassEdit=!1},openMassEditDialog:function(t){if(this.selectedItems.length<1)return this.$toasted.show("Please select item first!",{type:"error"});this.dialogMassEdit=!0,this.editField=t,this.editAll={enabled:!1}},onClickEditItem:function(t){this.dialogConfig=!0,this.pluginName=t.name},handleEnablePlugin:function(t,e){this.plugins[e].enabled=!this.plugins[e].enabled,this.updatePlugin(t)},handleRefresh:function(){this.selectedItems=[],this.getPlugins()},onSearchChange:function(){this.searchItems=this.search.split(",").map((function(t){return t.trim()}))},filterCriteria:function(t,e,n){return null!=t&&this.searchItems&&Array.isArray(this.searchItems)&&this.searchItems.length>0&&this.searchItems.every((function(t){return"string"==typeof t}))&&this.searchItems.some((function(e){return-1!==t.toString().toLowerCase().indexOf(e.toLowerCase())}))}}},k=Object(f.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("page-title",{attrs:{title:"Plugins"}}),t._v(" "),n("v-card",[n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[t._v("Plugins")]),t._v(" "),n("tooltip-icon-button",{attrs:{btnColor:"default",btnIcon:"mdi-sync",btnTooltip:"Refresh",buttonSize:"medium",onClick:function(){return t.handleRefresh()}}})],1),t._v(" "),n("v-data-table",{staticClass:"elevation-1",attrs:{"item-key":"uuid","show-select":"",loading:t.loadingData,search:t.search,headers:t.headers,items:t.plugins,"custom-filter":t.filterCriteria,"footer-props":t.tableProps.FOOTER_PROPS,itemsPerPage:t.tableProps.ITEMS_PER_PAGE,dense:""},scopedSlots:t._u([{key:"item.config",fn:function(e){var i=e.item;return[n("v-icon",{attrs:{small:"",color:"primary"},on:{click:function(e){return t.onClickEditItem(i)}}},[t._v("mdi-pencil")])]}},{key:"item.enabled",fn:function(e){var i=e.item,o=e.index;return[n("switch-button",{attrs:{"is-enable":i.enabled,"enable-text":"Disable","disable-text":"Enable","enable-color":"exportColor","disable-color":"grey","on-switch":function(){return t.handleEnablePlugin(i,o)}}})]}},{key:"header.enabled",fn:function(){return[t._v("\n        "+t._s(t.toUpperTextKey("enabled"))+" \n        "),n("v-icon",{attrs:{"x-small":"",color:"primary"},on:{click:function(e){return t.openMassEditDialog("enabled")}}},[t._v("mdi-pencil")]),t._v(" \n      ")]},proxy:!0}],null,!0),model:{value:t.selectedItems,callback:function(e){t.selectedItems=e},expression:"selectedItems"}})],1),t._v(" "),n("v-dialog",{attrs:{persistent:"",width:"350px"},model:{value:t.dialogMassEdit,callback:function(e){t.dialogMassEdit=e},expression:"dialogMassEdit"}},[t.dialogMassEdit?n("plugins-mass-edit-dialog",{attrs:{"is-open":t.dialogMassEdit,"on-close":function(){return t.dialogMassEdit=!1},"edit-all":t.editAll,"edit-field":t.editField,"on-save":t.saveMassEdit}}):t._e()],1),t._v(" "),n("config-form",{attrs:{"is-open":t.dialogConfig,"on-close":function(){return t.dialogConfig=!1},"plugin-name":t.pluginName}})],1)}),[],!1,null,null,null);e.default=k.exports},yw9G:function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return r})),n.d(e,"e",(function(){return c})),n.d(e,"d",(function(){return u})),n.d(e,"a",(function(){return d})),n.d(e,"f",(function(){return f}));var i=n("uzYq"),o=n("NWgQ"),a=n.n(o),l="rf-plugins",s=function(t){var e=l;return t&&(e=e+"?"+a.a.stringify(t)),i.a.get(""+e)},r=function(){return s({has_network:!0})},c=function(t,e){return i.a.get(l+"/schema?modulePath="+t+"&moduleName="+e)},u=function(t){return i.a.get(l+"/config/"+t)},d=function(t,e){return i.a.post(l+"/enable/"+t,e)},f=function(t,e){return i.a.post(l+"/config/"+t,e)}},zEfX:function(t,e,n){"use strict";var i={name:"form-error",props:["errors","error"],computed:{isArray:function(){return Array.isArray(this.errors)&&this.errors.length>0||!1},isObject:function(){return this.error&&this.error.hasOwnProperty("message")}}},o=n("psIG"),a=Object(o.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-left ma-5"},[t.isArray?n("div",t._l(t.errors,(function(e){return n("v-alert",{key:e.index,attrs:{dense:"",outlined:"",type:"error"}},[n("span",[t._v(t._s(e.message))])])})),1):t._e(),t._v(" "),t.isObject&&t.error.message?n("div",[n("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[n("span",[t._v(t._s(t.error.message))])])],1):t._e()])}),[],!1,null,null,null);e.a=a.exports}}]);
//# sourceMappingURL=43.298c1a083043ed088dcc.js.map