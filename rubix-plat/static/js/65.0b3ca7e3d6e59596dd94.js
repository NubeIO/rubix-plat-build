(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{NBOt:function(e,t,a){"use strict";a.r(t);a("edSL");var n=a("2SyR"),i=a("OBCi"),s=a.n(i),r=a("Kz1y"),l=a.n(r),o=a("yEOx"),c=a.n(o),d={name:"rf-device-form",props:["isEdit","onCancel","onSave","item"],data:function(){return{valid:!1,formValues:{},rerender:0,isSaving:!1,parentModulePath:null,rules:{required:function(e){return!!e||"Required."},numberRule:function(e){return!isNaN(parseFloat(e))||"Required."}}}},computed:{lowerCaseTitle:function(){return"schedules"},titleCase:function(){return"Schedules"},title:function(){return this.isEdit?"Edit "+this.titleCase:"Create "+this.titleCase},saveTitle:function(){return this.isEdit?"Save":"Create"}},mounted:function(){this.isEdit||this.$refs.form.reset(),this.formValues=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:e.name||"",enable:e.enable||!1,is_active:e.is_active||!1,is_global:e.is_global||!1,schedule:e.schedule||{}}}(c()(this.item)),this.selectedCalendarConfig=l()({},this.formValues.schedule.config),this.selectedCalendarData=l()({},this.formValues.schedule.schedules),this.renderCalendarView++},methods:{cleanUp:function(){this.formValues={},"function"==typeof this.onCancel&&this.onCancel()},onSubmit:function(){var e=this;return this.isSaving=!0,"function"!=typeof this.onSave?s.a.reject(!1):this.onSave(this.formValues).then((function(){e.$toasted.show("Successfully "+(e.isEdit?"updated":"created")+" "+e.title+"."),e.cleanUp()})).catch((function(){e.$toasted.show("Failed to "+(e.isEdit?"update":"create")+" "+e.title+".",{type:"error"})})).finally((function(){e.isSaving=!1}))}}},u=a("psIG"),f=Object(u.a)(d,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card",{staticClass:"pa-3",attrs:{outlined:""}},[a("v-card-title",{staticClass:"mb-5"},[a("v-btn",{staticClass:"mr-1",attrs:{icon:"",medium:""},on:{click:e.onCancel}},[a("v-icon",{attrs:{medium:""}},[e._v(" mdi-arrow-left ")])],1),e._v(" "),a("span",{staticClass:"headline"},[e._v(e._s(e.title))])],1),e._v(" "),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{required:"",label:"Name",rules:[e.rules.required]},model:{value:e.formValues.name,callback:function(t){e.$set(e.formValues,"name",t)},expression:"formValues.name"}})],1),e._v(" "),a("v-col",{attrs:{cols:"4"}},[a("v-switch",{attrs:{label:"Enable"},model:{value:e.formValues.enable,callback:function(t){e.$set(e.formValues,"enable",t)},expression:"formValues.enable"}})],1),e._v(" "),a("v-col",{attrs:{cols:"4"}},[a("v-switch",{attrs:{label:"Active"},model:{value:e.formValues.is_active,callback:function(t){e.$set(e.formValues,"is_active",t)},expression:"formValues.is_active"}})],1),e._v(" "),a("v-col",{attrs:{cols:"4"}},[a("v-switch",{attrs:{label:"Global"},model:{value:e.formValues.is_global,callback:function(t){e.$set(e.formValues,"is_global",t)},expression:"formValues.is_global"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[e.onCancel?a("v-btn",{attrs:{color:"darken-1",text:""},on:{click:e.onCancel}},[e._v(" Cancel ")]):e._e(),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",text:"",loading:e.isSaving},on:{click:function(t){return e.onSubmit(e.formValues)}}},[e._v(" Save ")])],1)],1)],1)}),[],!1,null,null,null).exports,m=a("TcPG"),v=a.n(m),h=a("oGAK"),C=a("oujF"),p=a("CfmX"),b=a("tKj8"),g=a("97BG"),_=a("Ui9F"),x=a("vJYM"),S={viewPoints:"viewPoints"},k=(v()({},S.viewPoints,(function(e,t){return h.a.rfPoints.replace(":networkId",e).replace(":deviceId",t)})),{name:"rf-schedules-grid",components:{GenericGrid:p.a,RfSchedulesForm:f,IconButton:n.a,TextButton:C.a,TooltipIconButton:_.a,CalendarView:b.a},props:["params","getDataCb"],data:function(){return{selectedCalendarData:null,renderCalendarView:0,selectedCalendarConfig:{},isLoadingCalendar:!1,gridName:g.g,dialogNames:S,service:x.a,toolbarTitle:"Schedules",gridHeaders:[{text:"Name",align:"center",value:"name",sortable:!0},{text:"Actions",align:"center",value:"actions",sortable:!0}]}},methods:{onExpandClick:function(e){var t=e.expand,a=e.isExpanded,n=e.item,i=!a;t(i),i?(this.selectedItem=n,this.selectedCalendarConfig=l()({},this.selectedItem.schedule.config),this.selectedCalendarData=l()({},this.selectedItem.schedule.schedules),this.fetchCalendarData()):this.selectedCalendarData=null},updateCalendarView:function(e,t,a){var n=this,i={schedules:t,config:a};return x.a.patchSchedule(e,i).then((function(e){return n.fetchCalendarData(),e}))},fetchCalendarData:function(){var e=this,t=this.selectedItem.uuid;return this.isLoadingCalendar=!0,x.a.fetchById(t).then((function(t){var a=t&&t.schedule&&t.schedule.schedules||{},n=t&&t.schedule&&t.schedule.config||{};return e.selectedCalendarConfig=l()({},n),e.selectedCalendarData=l()({},a),e.renderCalendarView++,t})).finally((function(){e.isLoadingCalendar=!1}))}}}),w=Object(u.a)(k,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("generic-grid",{attrs:{gridName:e.gridName,isHeaderConfigurable:!0,params:e.params,service:e.service,headers:e.gridHeaders,toolbarTitle:e.toolbarTitle,getDataCb:e.getDataCb,singleExpand:!0,showExpand:!0},scopedSlots:e._u([{key:"expansionIcon",fn:function(t){var n=t.expand,i=t.isExpanded,s=t.item;return[a("tooltip-icon-button",{attrs:{btnTooltip:"Assign Schedule Action",btnIcon:"mdi-calendar",btnColor:"orange",buttonSize:"medium",onClick:function(){return e.onExpandClick({expand:n,isExpanded:i,item:s})}}})]}},{key:"expansionView",fn:function(t){t.headers;var n=t.item;return[a("div",[!e.selectedCalendarData&&e.isLoadingCalendar?a("v-progress-circular",{attrs:{size:"20",indeterminate:""}}):e._e(),e._v(" "),e.selectedCalendarData?a("calendar-view",{key:e.renderCalendarView,attrs:{data:e.selectedCalendarData,config:e.selectedCalendarConfig,isLoadingCalendar:e.isLoadingCalendar,updateData:function(t,a){return e.updateCalendarView(n.uuid,t,a)}}}):e._e()],1)]}},{key:"createForm",fn:function(t){var n=t.onSave,i=t.onClose,s=t.isOpen,r=t.isSaving;return[s?a("rf-schedules-form",{attrs:{isEdit:!1,onSave:n,onCancel:i,isSaving:r}}):e._e()]}},{key:"editForm",fn:function(t){var n=t.onSave,i=t.item,s=t.onClose,r=t.isOpen,l=t.isSaving;return[r?a("rf-schedules-form",{attrs:{item:i,isEdit:!0,onSave:n,onCancel:s,isSaving:l}}):e._e()]}}])})],1)}),[],!1,null,null,null).exports,V=a("VNy9"),E={text:"Schedules",disabled:!1,link:h.a.rfSchedules},D={name:"rf-schedules",components:{IconButton:n.a,RfSchedulesForm:f,rfSchedulesGrid:w,TooltipIconButton:_.a,Breadcrumbs:V.a},data:function(){return{params:{uuid:null},immediateParent:null,renderCount:0,networkName:"",gridData:{},breadcrumbItems:[E]}},mounted:function(){},methods:{onBack:function(){this.$router.go(-1)},getDataCb:function(e){this.gridData=e,this.updateBreadCrumbs()},updateBreadCrumbs:function(){this.breadcrumbItems=[],this.breadcrumbItems.push(E)}}},I=Object(u.a)(D,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{key:e.renderCount,attrs:{outlined:""}},[a("v-card-title",[a("v-btn",{staticClass:"mr-1",attrs:{icon:"",medium:""},on:{click:e.onBack}},[a("v-icon",{attrs:{medium:""}},[e._v(" mdi-arrow-left ")])],1),e._v(" "),a("span",[e._v("Rf Schedules")])],1),e._v(" "),a("v-card-text",[a("breadcrumbs",{attrs:{items:e.breadcrumbItems}}),e._v(" "),a("v-row",{attrs:{"no-gutter":""}},[a("v-col",{attrs:{cols:"12",lg:"12",xl:"12",md:"12",sm:"12",xs:"12"}},[a("rf-schedules-grid",{attrs:{getDataCb:e.getDataCb}})],1)],1)],1)],1)}),[],!1,null,null,null);t.default=I.exports},oujF:function(e,t,a){"use strict";var n={name:"text-button",props:["onClick","text"]},i=a("psIG"),s=Object(i.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-btn",{staticClass:"ma-1",attrs:{link:"",color:"nubeGreen",plain:""},on:{click:e.onClick}},[a("span",{staticClass:"btn-text"},[e._v(e._s(e.text))])])}),[],!1,null,null,null);t.a=s.exports}}]);
//# sourceMappingURL=65.0b3ca7e3d6e59596dd94.js.map