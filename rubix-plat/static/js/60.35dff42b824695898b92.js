(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{NRSR:function(t,e,a){"use strict";a.r(e);var i=a("Kz1y"),n=a.n(i),r=a("edSL"),s=a.n(r),o={name:"rf-point-form",props:["isEdit","onCancel","onSave","item","isSaving","immediateParent","pluginName"],data:function(){return{rerender:0,formValues:{},parentModulePath:null}},components:{DynamicForm:a("K3Z4").a},computed:{lowerCaseTitle:function(){return"point"},titleCase:function(){return"Point"},title:function(){return this.isEdit?"Edit "+this.titleCase:"Create "+this.titleCase},saveTitle:function(){return this.isEdit?"Save":"Create"}},mounted:function(){this.isEdit&&this.item&&(this.formValues=n()({},this.item),this.rerender++),this.immediateParent&&(this.parentModulePath=this.pluginName,this.formValues=n()({},this.formValues,{plugin_name:this.pluginName,device_uuid:this.immediateParent.uuid}),this.rerender++)}},u=a("psIG"),d=Object(u.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.parentModulePath?a("dynamic-form",{key:t.rerender,attrs:{"parent-module-path":t.parentModulePath,item:t.item,title:t.title,isEdit:t.isEdit,onSave:t.onSave,onCancel:t.onCancel,moduleName:"point",initialFormValues:t.formValues}}):t._e()}),[],!1,null,null,null).exports,m=a("CfmX"),l=a("97BG"),c=a("b6+e"),p={name:"rf-point-grid",components:{GenericGrid:m.a,RfPointForm:d},props:["params","getDataCb","immediateParent","pluginName"],data:function(){return{gridName:l.l,service:c.a,toolbarTitle:"Point",gridHeaders:[{text:"Name",align:"center",value:"name",sortable:!0},{text:"Actions",align:"center",value:"actions",sortable:!0}]}}},h=Object(u.a)(p,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("generic-grid",{attrs:{params:t.params,service:t.service,gridName:t.gridName,headers:t.gridHeaders,getDataCb:t.getDataCb,toolbarTitle:t.toolbarTitle,isHeaderConfigurable:!0},scopedSlots:t._u([{key:"createForm",fn:function(e){var i=e.onSave,n=e.onClose,r=e.isOpen,s=e.isSaving;return[r?a("rf-point-form",{attrs:{isEdit:!1,onSave:i,onCancel:n,isSaving:s,pluginName:t.pluginName,immediateParent:t.immediateParent}}):t._e()]}},{key:"editForm",fn:function(e){var i=e.onSave,n=e.item,r=e.onClose,s=e.isOpen,o=e.isSaving;return[s?a("rf-point-form",{attrs:{item:n,isEdit:!0,onSave:i,onCancel:r,isSaving:o,pluginName:t.pluginName,immediateParent:t.immediateParent}}):t._e()]}}])})],1)}),[],!1,null,null,null).exports,f=a("2SyR"),v=a("oGAK"),g=a("VNy9"),b=a("Ui9F"),D=a("wffz"),w={text:"Networks",disabled:!1,link:v.a.rfNetworkDevicePoint},C={name:"rf-points",components:{IconButton:f.a,RfPointGrid:h,TooltipIconButton:b.a,Breadcrumbs:g.a},data:function(){return{params:{uuid:null,with_points:!0},pluginName:null,renderCount:0,immediateParent:{},networkuuid:null,deviceName:"",gridData:{},network:{},breadcrumbItems:[w]}},watch:{"$route.params.deviceId":function(t,e){t!=e&&(this.params=n()({},this.params,{uuid:this.$route.params.deviceId}),this.renderCount++)}},mounted:function(){this.fetchNetwork(),this.params=n()({},this.params,{uuid:this.$route.params.deviceId})},methods:{fetchNetwork:function(){var t=this;D.a.fetchById(this.$route.params.networkId).then((function(e){t.network=e,t.pluginName=t.network.plugin_name}))},onBack:function(){this.$router.go(-1)},getDataCb:function(t){this.gridData=t,this.updateBreadCrumbs(),this.immediateParent=s()(this.gridData,"extraData",this.immediateParent)},updateBreadCrumbs:function(){if(this.gridData&&this.gridData.extraData){if(this.deviceName=s()(this.gridData,"extraData.name",""),this.breadcrumbItems=[],this.breadcrumbItems.push(w),this.gridData.extraData.hasOwnProperty("network_uuid")){var t=s()(this.gridData,"extraData.network_uuid","");this.breadcrumbItems.push({text:t,align:"center",disabled:!1,link:v.a.rfDevices.replace(":networkId",t)})}if(this.gridData.extraData.hasOwnProperty("uuid")){this.breadcrumbItems.push({text:"Devices",align:"center",disabled:!0});var e=s()(this.gridData,"extraData.uuid","");this.breadcrumbItems.push({text:e,align:"center",disabled:!0,link:null}),this.breadcrumbItems.push({text:"Points",align:"center",disabled:!0})}}}}},N=Object(u.a)(C,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{key:t.renderCount,attrs:{outlined:""}},[a("v-card-title",[a("v-btn",{staticClass:"mr-1",attrs:{icon:"",medium:""},on:{click:t.onBack}},[a("v-icon",{attrs:{medium:""}},[t._v(" mdi-arrow-left ")])],1),t._v(" "),a("span",[t._v("Points")]),t.deviceName?a("span",{staticClass:"caption pl-3"},[t._v("Device: "+t._s(t.deviceName)+" ")]):t._e()],1),t._v(" "),a("v-card-text",[a("breadcrumbs",{attrs:{items:t.breadcrumbItems}}),t._v(" "),a("v-row",{attrs:{"no-gutter":""}},[a("v-col",{attrs:{cols:"12",lg:"12",xl:"12",md:"12",sm:"12",xs:"12"}},[t.params.uuid&&t.pluginName?a("rf-point-grid",{attrs:{pluginName:t.pluginName,params:t.params,getDataCb:t.getDataCb,immediateParent:t.immediateParent}}):t._e()],1)],1)],1)],1)}),[],!1,null,null,null);e.default=N.exports},"b6+e":function(t,e,a){"use strict";a.d(e,"a",(function(){return N}));var i=a("tZmG"),n=a.n(i),r=a("YUSd"),s=a.n(r),o=a("Zv/C"),u=a.n(o),d=a("2lBV"),m=a.n(d),l=a("Dkg+"),c=a.n(l),p=a("Gjrs"),h=a.n(p),f=a("DeKB"),v=a("oCli"),g=a("uzYq"),b=a("PWxN"),D=a.n(b),w=a("NWgQ"),C=a.n(w),N=new(function(t){function e(){u()(this,e);var t=c()(this,(e.__proto__||s()(e)).call(this,v.a.rfPoints));return t.fetch=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.uuid||t.id;if(!e)throw new Error("UUID is required for fetching points of device");var a=v.a.rfDevices(e);return(t=D()(t,["uuid","id"]))&&n()(t).length>0&&(a=a+"?"+C.a.stringify(t)),g.a.get(a).then((function(t){return{dataItems:t.points,extraData:D()(t,["points"])}}))},t}return h()(e,t),m()(e,[{key:"fetchAll",value:function(){var t=v.a.rfPoints();return g.a.get(t)}}]),e}(f.a))},wffz:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var i=a("DeKB"),n=a("oCli"),r=new i.a(n.a.rfNetworks)}}]);
//# sourceMappingURL=60.35dff42b824695898b92.js.map