(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"+SqX":function(e,t,r){"use strict";var n={name:"page-title",props:["title"]},s=r("psIG"),a=Object(s.a)(n,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("h1",{staticClass:"text-h5 text-left py-3"},[e._v(e._s(e.title))])}),[],!1,null,null,null);t.a=a.exports},UMWO:function(e,t,r){"use strict";r.r(t);var n=r("06Hw"),s=r.n(n),a=r("YYXh"),i=r.n(a),c=r("uzYq"),o=r("A5Vd"),v={components:{PageTitle:r("+SqX").a},data:function(){return{e1:1,releases:[],serviceStatus:{},selectedId:"",selectedRelease:{author:{}},overlay:!1,service:{}}},mounted:function(){var e=this.$route.params.id;this.getService(e)},computed:{installedService:function(){var e=this,t=this.$store.state.installedServices,r=o.h.find((function(t){return t.id===e.service.name}));return t.find((function(e){return e.service===r.fileName}))}},methods:{getService:function(e){var t=this;return i()(s.a.mark((function r(){var n;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.a.get("service/"+e);case 2:n=r.sent,t.service=n,t.getReleaseList(),t.getServiceStatus();case 6:case"end":return r.stop()}}),r,t)})))()},install:function(){var e=this;return i()(s.a.mark((function t(){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$store.commit("changeLoading",!0),r={service:e.service.name,version:e.selectedRelease.tag_name},c.a.post("rubix-service/install-service",r).then((function(t){e.$store.commit("changeLoading",!1),e.$toasted.show("Install completed"),e.e1=5}));case 3:case"end":return t.stop()}}),t,e)})))()},download:function(){var e=this;return i()(s.a.mark((function t(){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$store.commit("changeLoading",!0),r={service:e.service.name,version:e.selectedRelease.tag_name},c.a.post("rubix-service/download-service",r).then((function(t){e.$toasted.show("Download completed"),e.$store.commit("changeLoading",!1),e.e1=4}));case 3:case"end":return t.stop()}}),t,e)})))()},getServiceStatus:function(){var e=this;return i()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$store.commit("changeLoading",!0),c.a.get("rubix-service/up-service/"+e.service.name).then((function(t){e.$store.commit("changeLoading",!1),e.serviceStatus=t}));case 2:case"end":return t.stop()}}),t,e)})))()},stopService:function(){var e=this;return i()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.serviceStatus.status){t.next=3;break}return e.e1=3,t.abrupt("return");case 3:return t.next=5,e.callService("stop");case 5:e.e1=3;case 6:case"end":return t.stop()}}),t,e)})))()},callService:function(e){var t=this;return i()(s.a.mark((function r(){return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t.$store.commit("changeLoading",!0),c.a.post("rubix-service/call-service",{action:e,service:t.service.name}).then((function(r){t.$store.commit("changeLoading",!1),t.$toasted.show(e+" success!")}));case 2:case"end":return r.stop()}}),r,t)})))()},getReleaseList:function(){var e=this;this.$http.get(this.service.releaseUrl).then((function(t){var r=t.data,n=r;e.service.fromVersion&&(n=r.filter((function(t){return t.tag_name>=e.service.fromVersion}))),e.releases=n,e.selectedId=e.releases[0].id,e.selectedRelease=e.releases[0]}))},clickContinueAtStep1:function(){this.e1=this.service.stopRunningService?3:2},clickBackAtStep3:function(){this.e1=this.service.stopRunningService?1:2}},watch:{selectedId:function(e,t){this.selectedRelease=this.releases.find((function(t){return t.id===e}))},"$route.params.id":function(e,t){this.getService(e),this.e1=1}}},l=r("psIG"),u=Object(l.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("page-title",{attrs:{title:"UPDATE SERVICE - "+e.service.name}}),e._v(" "),r("v-stepper",{model:{value:e.e1,callback:function(t){e.e1=t},expression:"e1"}},[r("v-stepper-header",[r("v-stepper-step",{attrs:{complete:e.e1>1,step:"1"}},[e._v("Release version")]),e._v(" "),r("v-divider"),e._v(" "),e.service.stopRunningService?e._e():r("v-stepper-step",{attrs:{complete:e.e1>2,step:"2"}},[e._v("Service status")]),e._v(" "),e.service.stopRunningService?r("v-stepper-step",{attrs:{rules:[function(){return!1}],step:"2"}},[e._v("\n        Service status\n        "),r("small",[e._v("Stop running service")])]):e._e(),e._v(" "),r("v-divider"),e._v(" "),r("v-stepper-step",{attrs:{complete:e.e1>3,step:"3"}},[e._v("Download")]),e._v(" "),r("v-divider"),e._v(" "),r("v-stepper-step",{attrs:{complete:e.e1>4,step:"4"}},[e._v("Install")]),e._v(" "),r("v-divider"),e._v(" "),r("v-stepper-step",{attrs:{complete:e.e1>5,step:"5"}},[e._v("Start")])],1),e._v(" "),r("v-stepper-items",[r("v-stepper-content",{attrs:{step:"1"}},[r("v-radio-group",{model:{value:e.selectedId,callback:function(t){e.selectedId=t},expression:"selectedId"}},e._l(e.releases,(function(e){return r("v-radio",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),e._v(" "),r("v-btn",{attrs:{color:"primary"},on:{click:e.clickContinueAtStep1}},[e._v(" Continue ")])],1),e._v(" "),r("v-stepper-content",{attrs:{step:"2"}},[r("div",{staticStyle:{"text-align":"left"}},[e._v("\n          Service: "+e._s(e.service.name)+" "),r("br"),e._v("\n          Status: "+e._s(e.serviceStatus.status?"Running":"Stopped")+" "),r("br"),e._v("\n          Current Version: "+e._s(e.installedService?e.installedService.version:"Not Installed")+" "),r("br")]),e._v(" "),r("v-btn",{on:{click:function(t){e.e1=1}}},[e._v("Back")]),e._v(" "),r("v-btn",{attrs:{color:"success"},on:{click:e.getServiceStatus}},[e._v("Reload")]),e._v(" "),r("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.stopService()}}},[e._v("Continue")])],1),e._v(" "),r("v-stepper-content",{attrs:{step:"3"}},[r("div",{staticStyle:{"text-align":"left"}},[e._v("\n          Name: "),r("a",{attrs:{target:"_blank",href:e.selectedRelease.html_url}},[e._v(e._s(e.selectedRelease.name))]),e._v(" "),r("br"),e._v("\n          Author: "),r("strong",[e._v(e._s(e.selectedRelease.author.login))]),e._v(" "),r("br"),e._v("\n          Created at: "+e._s(e._f("timezone")(e.selectedRelease.created_at))+" "),r("br"),e._v(" "),r("a",{attrs:{target:"_blank",href:e.selectedRelease.zipball_url}},[e._v("Source code (zip)")]),e._v(" "),r("br"),e._v(" "),r("a",{attrs:{target:"_blank",href:e.selectedRelease.tarball_url}},[e._v("Source code (tar.gz)")]),e._v(" "),r("br")]),e._v(" "),r("v-btn",{on:{click:e.clickBackAtStep3}},[e._v(" Back ")]),e._v(" "),r("v-btn",{attrs:{color:"primary"},on:{click:e.download}},[e._v(" Download ")])],1),e._v(" "),r("v-stepper-content",{attrs:{step:"4"}},[r("div",{staticStyle:{"text-align":"left"}},[e._v("Install Service")]),e._v(" "),r("v-btn",{on:{click:function(t){e.e1=3}}},[e._v(" Back ")]),e._v(" "),r("v-btn",{attrs:{color:"primary"},on:{click:e.install}},[e._v(" Install ")])],1),e._v(" "),r("v-stepper-content",{attrs:{step:"5"}},[r("div",{staticStyle:{"text-align":"left"}},[e._v("Start Service")]),e._v(" "),r("v-btn",{on:{click:function(t){e.e1=4}}},[e._v(" Back ")]),e._v(" "),r("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.callService("start")}}},[e._v(" Start ")])],1)],1)],1),e._v(" "),r("v-overlay",{attrs:{value:e.overlay}},[r("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)],1)}),[],!1,null,null,null);t.default=u.exports}}]);
//# sourceMappingURL=26.c8f47427d2a049fc5815.js.map