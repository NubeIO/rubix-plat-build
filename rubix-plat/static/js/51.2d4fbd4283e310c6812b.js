(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{"+SqX":function(t,e,n){"use strict";var i={name:"page-title",props:["title"]},l=n("psIG"),o=Object(l.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",{staticClass:"text-h5 text-left py-3"},[n("span",[t._v(t._s(t.title))]),t._t("titleActions"),t._v(" "),t._t("spinner")],2)}),[],!1,null,null,null);e.a=o.exports},"6MuH":function(t,e,n){"use strict";var i={name:"switch-button",props:["is-enable","enable-text","disable-text","enable-color","disable-color","on-switch"],components:{TooltipIconButton:n("Ui9F").a}},l=n("psIG"),o=Object(l.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isEnable?t._e():n("tooltip-icon-button",{attrs:{btnColor:t.disableColor,buttonSize:"medium",btnIcon:"mdi-toggle-switch-off-outline",btnTooltip:t.disableText,onClick:t.onSwitch}}),t._v(" "),t.isEnable?n("tooltip-icon-button",{attrs:{btnColor:t.enableColor,buttonSize:"medium",btnIcon:"mdi-toggle-switch-outline",btnTooltip:t.enableText,onClick:t.onSwitch}}):t._e()],1)}),[],!1,null,null,null);e.a=o.exports},Ui9F:function(t,e,n){"use strict";var i={name:"tooltip-icon-button",props:["btnIcon","btnTooltip","onClick","btnColor","buttonSize","disabled"]},l=n("psIG"),o=Object(l.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,l=e.attrs;return["medium"==t.buttonSize?n("v-btn",t._g(t._b({attrs:{disabled:t.disabled,icon:"",medium:"",color:t.btnColor},on:{click:t.onClick}},"v-btn",l,!1),i),[n("v-icon",{attrs:{medium:"",dark:""}},[t._v(" "+t._s(t.btnIcon)+" ")])],1):n("v-btn",t._g(t._b({attrs:{disabled:t.disabled,icon:"",small:"",color:t.btnColor},on:{click:t.onClick}},"v-btn",l,!1),i),[n("v-icon",{attrs:{small:"",dark:""}},[t._v(" "+t._s(t.btnIcon)+" ")])],1)]}}])},[t._v(" "),n("span",[t._v(t._s(t.btnTooltip))])])}),[],!1,null,null,null);e.a=o.exports},oxoM:function(t,e,n){"use strict";n.r(e);var i=n("t3kO"),l=n.n(i),o=n("Kz1y"),a=n.n(o),s=n("+SqX"),r=n("6MuH"),c=n("Ui9F"),u=n("+n12"),d={props:["on-close","is-open","on-save","edit-all","edit-field"],data:function(){return{toUpperTextKey:u.q}},methods:{}},p=n("psIG"),v=Object(p.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{persistent:"",width:"350px"},model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("Mass Edit")])]),t._v(" "),n("v-card-text",{staticClass:"text-start"},["boolean"==typeof t.editAll[t.editField]?n("v-switch",{attrs:{inset:"",color:"exportColor",label:t.toUpperTextKey(t.editField)},model:{value:t.editAll[t.editField],callback:function(e){t.$set(t.editAll,t.editField,e)},expression:"editAll[editField]"}}):t._e()],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{text:""},on:{click:t.onClose}},[t._v("Close")]),t._v(" "),n("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){return t.onSave(t.editAll[t.editField],t.editField)}}},[t._v("Save")])],1)],1)],1)}),[],!1,null,null,null).exports,f=n("uzYq"),g="rf-plugins",b={name:"config-form",props:["onClose","isOpen","pluginName"],data:function(){return{rules:{required:function(t){return!!t||"Required."}},valid:!1,loadingData:!1,config:"",originkey:""}},computed:{},watch:{isOpen:function(t){t&&this.getConfigs()}},methods:{getConfigs:function(){var t,e=this;this.loadingData=!0,(t=this.pluginName,f.a.get(g+"/config/"+t)).then((function(t){var n=t.data?t.data:data;e.config=n,e.originkey=n.split(":")[0]})).finally((function(){e.loadingData=!1}))},postConfig:function(){var t,e,n=this,i={data:this.config};(t=this.pluginName,e=i,f.a.post(g+"/config/"+t,e)).then((function(t){n.$toasted.show("update success")})).catch((function(t){console.log(t),n.$toasted.show("update fail",{type:"error"})})).finally((function(){n.onClose()}))},isCorrectKey:function(t){return t.split(":").length>1?this.originkey==t.split(":")[0]:(this.config=this.originkey+": ",!1)}}},h=Object(p.a)(b,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{attrs:{fixed:"",right:"",width:"450px"},model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[n("v-card",{staticStyle:{height:"100%"},attrs:{loading:t.loadingData}},[n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[t._v(t._s(t.pluginName))]),t._v(" "),n("v-spacer"),t._v(" "),n("v-icon",{staticClass:"mr-6",attrs:{color:"primary",disabled:!t.valid},on:{click:t.postConfig}},[t._v("mdi-content-save")]),t._v(" "),n("v-icon",{on:{click:t.onClose}},[t._v("mdi-close")])],1),t._v(" "),n("v-divider"),t._v(" "),n("v-container",{staticClass:"pa-4 mt-4"},[n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-textarea",{attrs:{name:"input-7-4",label:"Enter config",outlined:"",rules:[function(){return t.isCorrectKey(t.config)||"Only change value! Please undo."},t.rules.required]},model:{value:t.config,callback:function(e){t.config=e},expression:"config"}})],1)],1)],1)],1)}),[],!1,null,null,null).exports,m=n("A5Vd"),_={components:{PageTitle:s.a,TooltipIconButton:c.a,SwitchButton:r.a,PluginsMassEditDialog:v,ConfigForm:h},watch:{},data:function(){return{toUpperTextKey:u.q,tableProps:a()({},m.d),plugins:[],headers:[{text:"Name",align:"start",value:"name",sortable:!0},{text:"Module Path",align:"start",value:"module_path"},{text:"Author",align:"start",value:"author"},{text:"Website",align:"start",value:"website"},{text:"Enabled",align:"start",value:"enabled",sortable:!0},{text:"Protocol Type",align:"start",value:"protocol_type"},{text:"UUID",align:"start",value:"uuid"},{text:"Config",align:"start",value:"config"}],selectedItems:[],editAll:{enabled:!1},dialogMassEdit:!1,dialogConfig:!1,loadingData:!1,search:"",editField:"",pluginName:""}},mounted:function(){this.getPlugins()},methods:{getPlugins:function(){var t=this;this.loadingData=!0,f.a.get(""+g).then((function(e){t.plugins=e})).finally((function(){t.loadingData=!1}))},updatePlugin:function(t){var e=this,n={enabled:t.enabled};(function(t,e){return f.a.post(g+"/enable/"+t,e)})(t.name,n).then((function(n){var i=e.plugins.findIndex((function(e){return e.uuid==t.uuid}));e.plugins[i].enabled=t.enabled,e.$toasted.show(n+" success")}))},saveMassEdit:function(t,e){var n=!0,i=!1,o=void 0;try{for(var a,s=l()(this.selectedItems);!(n=(a=s.next()).done);n=!0){var r=a.value;r[e]=t,this.updatePlugin(r)}}catch(t){i=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}this.dialogMassEdit=!1},openMassEditDialog:function(t){if(this.selectedItems.length<1)return this.$toasted.show("Please select item first!",{type:"error"});this.dialogMassEdit=!0,this.editField=t,this.editAll={enabled:!1}},onClickEditItem:function(t){this.dialogConfig=!0,this.pluginName=t.name},handleEnablePlugin:function(t,e){this.plugins[e].enabled=!this.plugins[e].enabled,this.updatePlugin(t)},handleRefresh:function(){this.selectedItems=[],this.getPlugins()}}},x=Object(p.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("page-title",{attrs:{title:"Plugins"}}),t._v(" "),n("v-card",[n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[t._v("Plugins")]),t._v(" "),n("tooltip-icon-button",{attrs:{btnColor:"default",btnIcon:"mdi-sync",btnTooltip:"Refresh",buttonSize:"medium",onClick:function(){return t.handleRefresh()}}})],1),t._v(" "),n("v-data-table",{staticClass:"elevation-1",attrs:{"item-key":"uuid","show-select":"",loading:t.loadingData,search:t.search,headers:t.headers,items:t.plugins,"footer-props":t.tableProps.FOOTER_PROPS,itemsPerPage:t.tableProps.ITEMS_PER_PAGE,dense:""},scopedSlots:t._u([{key:"item.config",fn:function(e){var i=e.item;return[n("v-icon",{attrs:{small:"",color:"primary"},on:{click:function(e){return t.onClickEditItem(i)}}},[t._v("mdi-pencil")])]}},{key:"item.enabled",fn:function(e){var i=e.item,l=e.index;return[n("switch-button",{attrs:{"is-enable":i.enabled,"enable-text":"Disable","disable-text":"Enable","enable-color":"exportColor","disable-color":"grey","on-switch":function(){return t.handleEnablePlugin(i,l)}}})]}},{key:"header.enabled",fn:function(){return[t._v("\n        "+t._s(t.toUpperTextKey("enabled"))+" \n        "),n("v-icon",{attrs:{"x-small":"",color:"primary"},on:{click:function(e){return t.openMassEditDialog("enabled")}}},[t._v("mdi-pencil")]),t._v(" \n      ")]},proxy:!0}],null,!0),model:{value:t.selectedItems,callback:function(e){t.selectedItems=e},expression:"selectedItems"}})],1),t._v(" "),n("plugins-mass-edit-dialog",{attrs:{"is-open":t.dialogMassEdit,"on-close":function(){return t.dialogMassEdit=!1},"edit-all":t.editAll,"edit-field":t.editField,"on-save":t.saveMassEdit}}),t._v(" "),n("config-form",{attrs:{"is-open":t.dialogConfig,"on-close":function(){return t.dialogConfig=!1},"plugin-name":t.pluginName}})],1)}),[],!1,null,null,null);e.default=x.exports}}]);
//# sourceMappingURL=51.2d4fbd4283e310c6812b.js.map