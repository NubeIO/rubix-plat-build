(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"+SqX":function(t,e,n){"use strict";var i={name:"page-title",props:["title"]},a=n("psIG"),o=Object(a.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",{staticClass:"text-h5 text-left py-3"},[n("span",[t._v(t._s(t.title))]),t._v(" "),t._t("refreshIcon"),t._v(" "),t._t("titleActions"),t._v(" "),t._t("spinner")],2)}),[],!1,null,null,null);e.a=o.exports},"6MuH":function(t,e,n){"use strict";var i={name:"switch-button",props:["is-enable","enable-text","disable-text","enable-color","disable-color","on-switch"],components:{TooltipIconButton:n("Ui9F").a}},a=n("psIG"),o=Object(a.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isEnable?t._e():n("tooltip-icon-button",{attrs:{btnColor:t.disableColor,buttonSize:"medium",btnIcon:"fa-toggle-off",btnTooltip:t.disableText,onClick:t.onSwitch}}),t._v(" "),t.isEnable?n("tooltip-icon-button",{attrs:{btnColor:t.enableColor,buttonSize:"medium",btnIcon:"fa-toggle-on",btnTooltip:t.enableText,onClick:t.onSwitch}}):t._e()],1)}),[],!1,null,null,null);e.a=o.exports},PTEy:function(t,e,n){"use strict";var i=n("zEfX"),a=n("8cQr"),o=(n("lhOF"),n("AdsU")),r=(n("1j+n"),n("hfTa"),n("+v5G"),{components:{PrismEditor:a.a},props:["code"],data:function(t){return{value:t.code}},watch:{value:function(t,e){t!==e&&this.onInput(t)}},methods:{highlighter:function(t){return Object(o.highlight)(t,o.languages.yml)},onInput:function(t){this.$emit("input",t)}}}),s=n("psIG"),l=Object(s.a)(r,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("prism-editor",{staticClass:"my-editor",attrs:{highlight:t.highlighter},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})}),[],!1,null,null,null).exports,u=n("Udio"),c=(n("e1jf"),{components:{PrismEditor:a.a},props:["code"],data:function(t){return{value:t.code}},watch:{value:function(t,e){t!==e&&this.onInput(t)}},methods:{highlighter:function(t){return Object(o.highlight)(t,o.languages.json)},onInput:function(t){this.$emit("input",t)}}}),d=Object(s.a)(c,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("prism-editor",{staticClass:"my-editor",attrs:{highlight:t.highlighter},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})}),[],!1,null,null,null).exports,f=n("A5Vd");var h={name:"config-form",props:["onClose","isOpen","pluginName","fetchConfig","updateConfig","appType"],data:function(){return{rules:{required:function(t){return!!t||"Required."}},valid:!1,loadingData:!1,config:"",newValue:"",error:{message:""},formTypes:{ENV_CONFIG:f.e,TXT_CONFIG:f.o,YML_CONFIG:f.q,JSON_CONFIG:f.g}}},components:{YamlEditor:u.a,FormError:i.a,JsonEditor:d,EnvEditor:l},computed:{formType:function(){return t=this.appType,(e=this.pluginName)===f.n.RUBIX_FLOW_FRAMEWORK||e===f.n.RUBIX_BROKER?f.q:t===f.m.PYTHON_APP?f.g:t===f.m.APT_APP?f.o:t===f.m.FRONTEND_APP?f.e:f.q;var t,e}},watch:{isOpen:function(t){t&&this.getConfigs()}},mounted:function(){this.error.message="",this.getConfigs()},methods:{getConfigs:function(){var t=this;this.loadingData=!0,this.fetchConfig(this.pluginName).then((function(e){t.config=e})).catch((function(){t.config=""})).finally((function(){t.loadingData=!1}))},postConfig:function(){var t=this,e={data:this.newValue};this.error.message="",this.updateConfig(this.pluginName,e).then((function(e){t.$toasted.show("Config is updated successfully!"),t.onClose()})).catch((function(e){t.error.message="YAML config incorrect.",t.$toasted.show("Check your YAML config!",{type:"error"})}))},isCorrectKey:function(t){return!0},onEditorValueChange:function(t){this.newValue=t}}},p=Object(s.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{attrs:{fixed:"",right:"",width:"450px"},model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[n("v-card",{staticStyle:{height:"100%"},attrs:{loading:t.loadingData}},[n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[t._v(t._s(t.pluginName)+" - "+t._s(t.formType))]),t._v(" "),n("v-spacer"),t._v(" "),n("v-icon",{staticClass:"mr-6",attrs:{color:"primary",disabled:!t.valid},on:{click:t.postConfig}},[t._v("fa-floppy-o")]),t._v(" "),n("v-icon",{on:{click:t.onClose}},[t._v("fa-times-circle")])],1),t._v(" "),n("v-divider"),t._v(" "),n("v-container",{staticClass:"pa-4 mt-4"},[n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[t.formType!==t.formTypes.YML_CONFIG||t.loadingData?t._e():n("yaml-editor",{attrs:{code:t.config},on:{input:t.onEditorValueChange}}),t._v(" "),t.formType!==t.formTypes.JSON_CONFIG||t.loadingData?t._e():n("json-editor",{attrs:{code:t.config},on:{input:t.onEditorValueChange}}),t._v(" "),t.formType!==t.formTypes.ENV_CONFIG||t.loadingData?t._e():n("env-editor",{attrs:{code:t.config},on:{input:t.onEditorValueChange}}),t._v(" "),t.formType!==t.formTypes.TXT_CONFIG||t.loadingData?t._e():n("txt-editor",{attrs:{code:t.config},on:{input:t.onEditorValueChange}})],1),t._v(" "),n("form-error",{attrs:{error:t.error}})],1)],1)],1)}),[],!1,null,null,null);e.a=p.exports},Udio:function(t,e,n){"use strict";var i=n("8cQr"),a=(n("lhOF"),n("AdsU")),o=(n("1j+n"),n("hfTa"),n("+v5G"),{components:{PrismEditor:i.a},props:["code"],data:function(t){return{value:t.code}},watch:{value:function(t,e){t!==e&&this.onInput(t)}},methods:{highlighter:function(t){return Object(a.highlight)(t,a.languages.yml)},onInput:function(t){this.$emit("input",t)}}}),r=n("psIG"),s=Object(r.a)(o,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("prism-editor",{staticClass:"my-editor",attrs:{highlight:t.highlighter},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})}),[],!1,null,null,null);e.a=s.exports},nyqQ:function(t,e,n){"use strict";n.r(e);var i=n("t3kO"),a=n.n(i),o=n("Kz1y"),r=n.n(o),s=n("PTEy"),l=n("+SqX"),u=n("+n12"),c=n("6MuH"),d=n("lkCm"),f={props:["on-close","is-open","on-save","edit-all","edit-field"],data:function(){return{toUpperTextKey:u.s}},methods:{}},h=n("psIG"),p=Object(h.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("Mass Edit")])]),t._v(" "),n("v-card-text",{staticClass:"text-start"},["boolean"==typeof t.editAll[t.editField]?n("v-switch",{attrs:{inset:"",color:"exportColor",label:t.toUpperTextKey(t.editField)},model:{value:t.editAll[t.editField],callback:function(e){t.$set(t.editAll,t.editField,e)},expression:"editAll[editField]"}}):t._e()],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{text:""},on:{click:t.onClose}},[t._v("Close")]),t._v(" "),n("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){return t.onSave(t.editAll[t.editField],t.editField)}}},[t._v("Save")])],1)],1)}),[],!1,null,null,null).exports,g=n("nz6T"),v=n("yw9G"),m=n("Ui9F"),b=n("A5Vd"),_="disabled",y="enabled",C={components:{PageTitle:l.a,TooltipIconButton:m.a,SwitchButton:c.a,PluginsMassEditDialog:p,ConfigForm:s.a,ConfirmDialog:d.a},watch:{},data:function(){return{isRestartFFOpen:!1,isRestartingFF:!1,toUpperTextKey:u.s,tableProps:r()({},b.d),plugins:[],headers:[{text:"Name",align:"start",value:"name",sortable:!0},{text:"Module Path",align:"start",value:"module_path"},{text:"Author",align:"start",value:"author"},{text:"Website",align:"start",value:"website"},{text:"Enabled",align:"start",value:"enabled",sortable:!0},{text:"Protocol Type",align:"start",value:"protocol_type"},{text:"UUID",align:"start",value:"uuid"},{text:"Config",align:"start",value:"config"}],selectedItems:[],editAll:{enabled:!1},dialogMassEdit:!1,dialogConfig:!1,loadingData:!1,search:"",searchItems:[],editField:"",pluginName:""}},mounted:function(){this.getPlugins()},methods:{fetchConfig:function(t){return v.d(t)},updateConfig:function(t,e){return v.f(t,e)},restartFlowFramework:function(){var t=this;this.isRestartingFF=!0,g.changeServiceStatus(b.l.RESTART,b.n.RUBIX_FLOW_FRAMEWORK).then((function(){t.isRestartingFF=!0,t.$toasted.show("Successfully restarted flow framework")})).catch((function(e){t.$toasted.show("Failed to restart flow framework",{type:"error"})})).finally((function(){t.isRestartingFF=!1,t.closeRestartDialog()}))},closeRestartDialog:function(){this.isRestartFFOpen=!1},onOpenFFRestartDialog:function(){this.isRestartFFOpen=!0},getPlugins:function(){var t=this;this.loadingData=!0,v.c().then((function(e){t.plugins=e,t.$store.commit("changeRfPlugins",e)})).finally((function(){t.loadingData=!1}))},updatePlugin:function(t){var e=this,n={enabled:t.enabled},i=this.plugins.findIndex((function(e){return e.uuid==t.uuid}));v.a(t.name,n).then((function(t){t&&t.state&&(t.state==y?(e.plugins[i].enabled=!0,e.$toasted.show("Plugin enabled.")):t.state==_&&(e.plugins[i].enabled=!1,e.$toasted.show("Plugin disabled.")))})).catch((function(){e.plugins[i].enabled=!1}))},saveMassEdit:function(t,e){var n=!0,i=!1,o=void 0;try{for(var r,s=a()(this.selectedItems);!(n=(r=s.next()).done);n=!0){var l=r.value;l[e]=t,this.updatePlugin(l)}}catch(t){i=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}this.dialogMassEdit=!1},openMassEditDialog:function(t){if(this.selectedItems.length<1)return this.$toasted.show("Please select item first!",{type:"error"});this.dialogMassEdit=!0,this.editField=t,this.editAll={enabled:!1}},onClickEditItem:function(t){this.dialogConfig=!0,this.pluginName=t.name},handleEnablePlugin:function(t,e){this.plugins[e].enabled=!this.plugins[e].enabled,this.updatePlugin(t)},handleRefresh:function(){this.selectedItems=[],this.getPlugins()},onSearchChange:function(){this.searchItems=this.search.split(",").map((function(t){return t.trim()}))},filterCriteria:function(t,e,n){return null!=t&&this.searchItems&&Array.isArray(this.searchItems)&&this.searchItems.length>0&&this.searchItems.every((function(t){return"string"==typeof t}))&&this.searchItems.some((function(e){return-1!==t.toString().toLowerCase().indexOf(e.toLowerCase())}))}}},x={name:"plugins-page",components:{Plugins:Object(h.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-card",[n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[t._v("Plugins")]),t._v(" "),n("tooltip-icon-button",{attrs:{btnColor:"default",btnIcon:"fa-refresh",btnTooltip:"Refresh",buttonSize:"medium",onClick:function(){return t.handleRefresh()}}}),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{staticClass:"mr-2 btn-height-22 white--text",attrs:{"x-small":"",color:"orange darken-1"},on:{click:t.onOpenFFRestartDialog}},[t._v("\n        Restart Flow Framework"),n("v-icon",{attrs:{"x-small":"",right:""}},[t._v(" fa-repeat")])],1)],1),t._v(" "),n("v-data-table",{staticClass:"elevation-1",attrs:{"item-key":"uuid","show-select":"",loading:t.loadingData,search:t.search,headers:t.headers,items:t.plugins,"custom-filter":t.filterCriteria,"footer-props":t.tableProps.FOOTER_PROPS,itemsPerPage:t.tableProps.ITEMS_PER_PAGE,dense:""},scopedSlots:t._u([{key:"item.config",fn:function(e){var i=e.item;return[n("v-icon",{attrs:{small:"",color:"primary"},on:{click:function(e){return t.onClickEditItem(i)}}},[t._v("fa-pencil")])]}},{key:"item.enabled",fn:function(e){var i=e.item,a=e.index;return[n("switch-button",{attrs:{"is-enable":i.enabled,"enable-text":"Disable","disable-text":"Enable","enable-color":"exportColor","disable-color":"grey","on-switch":function(){return t.handleEnablePlugin(i,a)}}})]}},{key:"header.enabled",fn:function(){return[t._v("\n        "+t._s(t.toUpperTextKey("enabled"))+" \n        "),n("v-icon",{attrs:{"x-small":"",color:"primary"},on:{click:function(e){return t.openMassEditDialog("enabled")}}},[t._v("fa-pencil")]),t._v(" \n      ")]},proxy:!0}],null,!0),model:{value:t.selectedItems,callback:function(e){t.selectedItems=e},expression:"selectedItems"}})],1),t._v(" "),n("v-dialog",{attrs:{persistent:"",width:"350px"},model:{value:t.dialogMassEdit,callback:function(e){t.dialogMassEdit=e},expression:"dialogMassEdit"}},[t.dialogMassEdit?n("plugins-mass-edit-dialog",{attrs:{"is-open":t.dialogMassEdit,"on-close":function(){return t.dialogMassEdit=!1},"edit-all":t.editAll,"edit-field":t.editField,"on-save":t.saveMassEdit}}):t._e()],1),t._v(" "),n("config-form",{attrs:{"is-open":t.dialogConfig,"plugin-name":t.pluginName,fetchConfig:t.fetchConfig,updateConfig:t.updateConfig,"on-close":function(){return t.dialogConfig=!1}}}),t._v(" "),n("confirm-dialog",{attrs:{"is-open":t.isRestartFFOpen,loading:t.isRestartingFF,"on-confirm":function(){return t.restartFlowFramework()},"dialog-text":"Are you sure want. This will restart Flow Framework?","on-close":function(){return t.closeRestartDialog()}}})],1)}),[],!1,null,null,null).exports,RfFlowFrameworkUpgrade:n("iHVn").default,PageTitle:l.a},data:function(){return{tab:0,tabs:["apps","apps-upgrade"]}},mounted:function(){var t=this.$route.query.tab;this.tab=this.tabs.indexOf(t)},watch:{"$route.query.tab":function(t){this.tab=this.tabs.indexOf(t)},tab:function(t,e){var n=this.$route.query.tab;if(n!==this.tabs[t]){var i=this.tabs[t];this.$router.push({path:"plugins",query:{tab:i}})}}}},F=Object(h.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("page-title",{attrs:{title:"Plugins"}}),t._v(" "),n("v-tabs",{attrs:{right:"",color:t.$vuetify.theme.dark?"":"nubeGreen"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("v-tab",{key:0},[t._v(" PLUGINS ")]),t._v(" "),n("v-tab",{key:1},[t._v(" PLUGINS INSTALLATION ")])],1),t._v(" "),n("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("v-tab-item",{key:0},[n("plugins")],1),t._v(" "),n("v-tab-item",{key:1},[n("rf-flow-framework-upgrade")],1)],1)],1)}),[],!1,null,null,null);e.default=F.exports},yw9G:function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return l})),n.d(e,"e",(function(){return u})),n.d(e,"d",(function(){return c})),n.d(e,"a",(function(){return d})),n.d(e,"f",(function(){return f}));var i=n("uzYq"),a=n("NWgQ"),o=n.n(a),r="rf-plugins",s=function(t){var e=r;return t&&(e=e+"?"+o.a.stringify(t)),i.a.get(""+e)},l=function(){return s({has_network:!0})},u=function(t,e){return i.a.get(r+"/schema?modulePath="+t+"&moduleName="+e)},c=function(t){return i.a.get(r+"/config/"+t)},d=function(t,e){return i.a.post(r+"/enable/"+t,e)},f=function(t,e){return i.a.post(r+"/config/"+t,e)}},zEfX:function(t,e,n){"use strict";var i={name:"form-error",props:["errors","error"],computed:{isArray:function(){return Array.isArray(this.errors)&&this.errors.length>0||!1},isObject:function(){return this.error&&this.error.hasOwnProperty("message")}}},a=n("psIG"),o=Object(a.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-left ma-5"},[t.isArray?n("div",t._l(t.errors,(function(e){return n("v-alert",{key:e.index,attrs:{dense:"",outlined:"",type:"error"}},[n("span",[t._v(t._s(e.message))])])})),1):t._e(),t._v(" "),t.isObject&&t.error.message?n("div",[n("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[n("span",[t._v(t._s(t.error.message))])])],1):t._e()])}),[],!1,null,null,null);e.a=o.exports}}]);
//# sourceMappingURL=30.5907d1ecca1b2861f205.js.map