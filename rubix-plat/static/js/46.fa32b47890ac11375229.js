(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{fBuC:function(e,t,o){"use strict";o.d(t,"a",(function(){return _}));var s=o("Kz1y"),a=o.n(s),l=o("YUSd"),r=o.n(l),n=o("Zv/C"),i=o.n(n),c=o("Dkg+"),u=o.n(c),f=o("Gjrs"),m=o.n(f),d=o("DeKB"),v=o("oCli"),_=new(function(e){function t(){i()(this,t);var e=u()(this,(t.__proto__||r()(t)).call(this,v.a.rfFlowNetwork));return e.getPayloadToRequest=function(e){return a()({},e,{streams:e&&e.streams?e.streams.map((function(e){return{uuid:e.uuid}})):[]})},e.create=function(t){var o=e.evaluateUri();return http.post(o,e.getPayloadToRequest(t))},e}return m()(t,e),t}(d.a))},za5t:function(e,t,o){"use strict";o.r(t);var s=o("TcPG"),a=o.n(s),l=o("Kz1y"),r=o.n(l),n=o("Ui9F"),i={name:"flow-network-form",components:{TooltipIconButton:n.a},props:["isEdit","onCancel","onSave","item","isSaving"],data:function(){return{rules:{required:function(e){return!!e||"Required."},numberRule:function(e){return!isNaN(parseFloat(e))||"Required."}},valid:!1,formValues:r()({},{name:null,global_flow_id:null,global_remote_flow_id:null,remote_flow_uuid:null,stream_list_uuid:null,fetch_histories:!1,fetch_hist_frequency:0,delete_histories_on_fetch:!1,is_remote:!0,flow_ip:"0.0.0.0",flow_port:"1660",flow_https:!1,flow_username:null,flow_password:null,flow_token:null,is_mqtt:!1,mqtt_ip:"",mqtt_port:"",mqtt_https:!1,mqtt_username:"",mqtt_password:""})}},computed:{title:function(){return this.isEdit?"Edit Flow Network":"Create Flow Network"},saveTitle:function(){return this.isEdit?"Save":"Create"}},mounted:function(){this.isEdit&&this.item&&(this.formValues=r()({},this.formValues,this.item))},methods:{cleanUp:function(){this.formValues={},"function"==typeof this.onCancel&&this.onCancel()},onSubmit:function(){var e=this;if(this.$refs.form.validate()){if("function"!=typeof this.onSave)throw new Error("Flow network form onSave function not passed");return this.onSave(this.formValues).then((function(){e.$toasted.show("Successfully "+(e.isEdit?"updated":"created")+" flow network."),e.cleanUp(!0)})).catch((function(t){e.$toasted.show("Failed to "+(e.isEdit?"update":"create")+" flow network.")}))}}}},c=o("psIG"),u=Object(c.a)(i,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-card",[o("v-card-title",[o("span",{staticClass:"headline"},[e._v(e._s(e.title))])]),e._v(" "),o("v-card-text",[o("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{required:"",label:"Flow network name",rules:[e.rules.required]},model:{value:e.formValues.name,callback:function(t){e.$set(e.formValues,"name",t)},expression:"formValues.name"}})],1),e._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-switch",{attrs:{label:"Enable Histories"},model:{value:e.formValues.fetch_histories,callback:function(t){e.$set(e.formValues,"fetch_histories",t)},expression:"formValues.fetch_histories"}})],1),e._v(" "),e.formValues.fetch_histories?o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{type:"number",label:"Fetch History Frequency"},model:{value:e.formValues.fetch_hist_frequency,callback:function(t){e.$set(e.formValues,"fetch_hist_frequency",t)},expression:"formValues.fetch_hist_frequency"}})],1):e._e(),e._v(" "),e.formValues.fetch_histories?o("v-col",{attrs:{cols:"12"}},[o("v-switch",{attrs:{label:"Delete Histories after fetch"},model:{value:e.formValues.delete_histories_on_fetch,callback:function(t){e.$set(e.formValues,"delete_histories_on_fetch",t)},expression:"formValues.delete_histories_on_fetch"}})],1):e._e(),e._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-switch",{attrs:{label:"Enable Remote"},model:{value:e.formValues.is_remote,callback:function(t){e.$set(e.formValues,"is_remote",t)},expression:"formValues.is_remote"}})],1),e._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{rules:[e.rules.required],label:"Flow IP"},model:{value:e.formValues.flow_ip,callback:function(t){e.$set(e.formValues,"flow_ip",t)},expression:"formValues.flow_ip"}})],1),e._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{rules:[e.rules.required],label:"Flow IP"},model:{value:e.formValues.flow_port,callback:function(t){e.$set(e.formValues,"flow_port",t)},expression:"formValues.flow_port"}})],1),e._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-switch",{attrs:{label:"Enable HTTPS"},model:{value:e.formValues.flow_https,callback:function(t){e.$set(e.formValues,"flow_https",t)},expression:"formValues.flow_https"}})],1),e._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{required:"",label:"Flow Username"},model:{value:e.formValues.flow_username,callback:function(t){e.$set(e.formValues,"flow_username",t)},expression:"formValues.flow_username"}})],1),e._v(" "),o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{attrs:{type:"password",label:"Flow Password",autocomplete:"new-password"},model:{value:e.formValues.flow_password,callback:function(t){e.$set(e.formValues,"flow_password",t)},expression:"formValues.flow_password"}})],1)],1)],1)],1),e._v(" "),o("v-spacer"),e._v(" "),o("v-card-actions",{staticClass:"align-end justify-end"},[o("v-btn",{attrs:{color:"darken-1",text:""},on:{click:e.cleanUp}},[e._v(" Cancel ")]),e._v(" "),o("v-btn",{attrs:{color:"blue darken-1",loading:e.isSaving,text:""},on:{click:function(t){return e.onSubmit(e.formValues)}}},[e._v(" "+e._s(e.saveTitle)+" ")])],1)],1)}),[],!1,null,null,null).exports,f=o("CfmX"),m=o("fBuC"),d=o("2SyR"),v=o("e1ED"),_={name:"associate-streams-form",props:["flowNetworkId","onCancel"],components:{AssociateObjectStreams:o("ilzx").a,FlowMappingForm:v.a},data:function(){return{apiListKey:"streams",service:m.a,currentItems:null}},computed:{streams:function(){return this.$store.state.rfStreams}},mounted:function(){this.fetchFlowNetworkById()},methods:{onSave:function(e){return m.a.patch(this.flowNetworkId,{streams:e})},fetchFlowNetworkById:function(){var e=this;return m.a.fetchById(this.flowNetworkId).then((function(t){return e.currentItems=t.streams||[],t}))}}},w=Object(c.a)(_,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.currentItems?o("flow-mapping-form",{attrs:{items:e.streams,currentItems:e.currentItems,onSave:e.onSave,title:"Associate Streams",onCancel:e.onCancel}}):e._e()}),[],!1,null,null,null).exports,h={associateStreams:"associateStreams"},p={components:{GenericGrid:f.a,FlowNetworkForm:u,IconButton:d.a,AssociateStreams:w},name:"flowNetworkGrid",data:function(){var e;return e={service:m.a,toolbarTitle:"Flow Networks",selectedItem:{},dialogNames:r()({},h),dialog:a()({},h.associateStreams,!1)},a()(e,"selectedItem",{}),a()(e,"gridHeaders",[{text:"Name",align:"center",value:"name",sortable:!0},{text:"Remote Flow Id",align:"center",value:"remote_flow_uuid",sortable:!0},{text:"Global Flow Id",align:"center",value:"global_flow_id",sortable:!0},{text:"Grid Actions",align:"center",value:"gridItemActions",sortable:!1},{text:"Actions",align:"center",value:"actions",sortable:!0}]),e},methods:{toggleDialog:function(e,t){this.selectedItem=t,this.dialog[e]=!this.dialog[e],this.dialog[e]?this.selectedItem=t:this.selectedItem=null},closeDialog:function(e){this.dialog[e]=!1,this.selectedItem={}}}},g={name:"flow-network",components:{FlowNetworkGrid:Object(c.a)(p,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("generic-grid",{attrs:{headers:e.gridHeaders,toolbarTitle:e.toolbarTitle,service:e.service},scopedSlots:e._u([{key:"createForm",fn:function(t){var s=t.onSave,a=t.onClose,l=t.isOpen,r=t.isSaving;return[l?o("flow-network-form",{attrs:{isEdit:!1,onSave:s,onCancel:a,isSaving:r}}):e._e()]}},{key:"editForm",fn:function(t){var s=t.onSave,a=t.item,l=t.onClose,r=t.isOpen,n=t.isSaving;return[r?o("flow-network-form",{attrs:{item:a,isEdit:!0,onSave:s,onCancel:l,isSaving:n}}):e._e()]}},{key:"gridItemActions",fn:function(t){var s=t.item;return[o("icon-button",{attrs:{title:"Add Streams",icon:"mdi-plus",color:"nubeGreen",onClick:function(){return e.toggleDialog(e.dialogNames.associateStreams,s)}}})]}}])}),e._v(" "),e.selectedItem&&e.selectedItem.uuid?o("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialog[e.dialogNames.associateStreams],callback:function(t){e.$set(e.dialog,e.dialogNames.associateStreams,t)},expression:"dialog[dialogNames.associateStreams]"}},[e.dialog[e.dialogNames.associateStreams]?o("associate-streams",{attrs:{flowNetworkId:e.selectedItem&&e.selectedItem.uuid,onCancel:function(){return e.closeDialog(e.dialogNames.associateStreams)}}}):e._e()],1):e._e()],1)}),[],!1,null,null,null).exports,FlowNetworkForm:u},data:function(){return{}}},b=Object(c.a)(g,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-card",[o("v-card-title",[e._v("\n    Rubix Flow Network\n  ")]),e._v(" "),o("v-card-text",[o("v-row",{attrs:{"no-gutter":""}},[o("v-col",{attrs:{cols:"12",lg:"12",xl:"12",md:"12",sm:"12",xs:"12"}},[o("flow-network-grid")],1)],1)],1)],1)}),[],!1,null,null,null);t.default=b.exports}}]);
//# sourceMappingURL=46.fa32b47890ac11375229.js.map