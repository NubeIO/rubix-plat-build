(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{"2SyR":function(e,t,n){"use strict";var r={name:"icon-button",props:["icon","on-click","title","color","size","disabled","loading"]},s=n("psIG"),o=Object(s.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",["small"==e.size?n("v-btn",{staticClass:"pa-2",attrs:{small:"",text:"",color:e.color,loading:e.loading,disabled:e.disabled},on:{click:e.onClick}},[e.icon?n("v-icon",[e._v(e._s(e.icon))]):e._e(),e._v(" "),e.title?n("span",{staticClass:"text"},[e._v(" "+e._s(e.title))]):e._e()],1):n("v-btn",{staticClass:"pa-2",attrs:{text:"",loading:e.loading,disabled:e.disabled,color:e.color,"x-small":""},on:{click:e.onClick}},[e.icon?n("v-icon",[e._v(e._s(e.icon))]):e._e(),e._v(" "),e.title?n("span",{staticClass:"text"},[e._v(" "+e._s(e.title))]):e._e()],1)],1)}),[],!1,null,null,null);t.a=o.exports},EObi:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"fetch",(function(){return c})),n.d(r,"fetchSyncLog",(function(){return l})),n.d(r,"patchSyncLog",(function(){return d}));var s=n("TcPG"),o=n.n(s),i=n("uzYq"),a="/sync-logs",c=function(){return i.a.get(a)},l=function(e){return i.a.get(a+"/"+e)},d=function(e,t){return i.a.patch(a+"/"+e,t)},u={name:"sync-log-form",props:["onCancel","refreshGrid","item"],components:{FormError:n("zEfX").a},data:function(){return{valid:!1,hasError:!1,error:{},isFetchingSyncLog:!1,isUpdatingSyncLog:!1,syncLog:{last_sync_id:0},rules:{required:function(e){return!!e||"Required."}}}},mounted:function(){var e=this;this.isFetchingSyncLog=!0;var t=this.getGlobalUUID();l(t).then((function(t){e.syncLog={last_sync_id:Number(t.last_sync_id)}})).catch((function(t){e.hasError=!0,e.error=t})).finally((function(){e.isFetchingSyncLog=!1}))},methods:{getGlobalUUID:function(){return this.item.global_uuid},onIntegerKeyDown:function(e){"."===e.key&&e.preventDefault()},updateSyncLog:function(){var e=this;this.isUpdatingSyncLog=!0,d(this.getGlobalUUID(),this.syncLog).then((function(t){e.$toasted.show("Successfully update sync log"),e.onCancel()})).finally((function(){e.isUpdatingSyncLog=!1}))}}},g=n("psIG"),m=Object(g.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{loading:e.isFetchingSyncLog}},[n("v-card-title",{staticClass:"mb-5"},[n("span",{staticClass:"headline"},[e._v("Sync Log")])]),e._v(" "),n("v-card-text",[n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{required:"",disabled:e.isFetchingSyncLog,type:"number",min:0,label:"Last Sync ID",rules:[e.rules.required]},on:{keydown:function(t){return e.onIntegerKeyDown(t)}},model:{value:e.syncLog.last_sync_id,callback:function(t){e.$set(e.syncLog,"last_sync_id",t)},expression:"syncLog.last_sync_id"}})],1)],1)],1)],1),e._v(" "),n("form-error",{attrs:{error:e.error}}),e._v(" "),n("v-card-actions",[e.onCancel?n("v-btn",{attrs:{color:"darken-1",text:""},on:{click:e.onCancel}},[e._v(" Cancel ")]):e._e(),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:"",loading:e.isUpdatingSyncLog},on:{click:e.updateSyncLog}},[e._v(" Save ")])],1)],1)}),[],!1,null,null,null).exports,f=n("2SyR"),v=n("CfmX"),y=n("97BG"),_={syncLogs:"syncLogs"},h={name:"sync-logs",components:{IconButton:f.a,GenericGrid:v.a,SyncLogForm:m},data:function(){return{service:r,refreshGridCb:function(e){return e},selectedItem:null,toolbarTitle:"Sync Logs",gridName:y.s,extraConfig:{hasActions:!1},gridHeaders:[{value:"global_uuid",text:"Global UUID",align:"center",sortable:!1},{value:"last_sync_id",text:"Last Sync",sortable:!0,align:"center"},{value:"max_sync_id",text:"Max Sync ",sortable:!0,align:"center"},{value:"gridItemActions",text:"Actions",align:"center"}],dialogNames:_,dialog:o()({},_.syncLogs,!1)}},computed:{},methods:{onBack:function(){this.$router.go(-1)},itemRowBackground:function(e){return Number(e.last_sync_id)>Number(e.max_sync_id)&&0!==Number(e.max_sync_id)?"background-yellow":""},toggleDialog:function(e,t,n){this.selectedItem=t,this.dialog[e]=!this.dialog[e],this.refreshGridCb=n,this.dialog[e]?this.selectedItem=t:this.selectedItem=null},closeDialog:function(e){this.dialog[e]=!1,this.selectedItem={}}}},b=Object(g.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{outlined:""}},[n("v-card-title",[n("v-btn",{staticClass:"mr-1",attrs:{icon:"",medium:""},on:{click:e.onBack}},[n("v-icon",{attrs:{medium:""}},[e._v(" fa-angle-left ")])],1),e._v(" "),n("span",[e._v("Sync Logs")])],1),e._v(" "),n("v-card-text",[n("v-row",{attrs:{"no-gutter":""}},[n("v-col",{attrs:{cols:"12",lg:"12",xl:"12",md:"12",sm:"12",xs:"12"}},[n("generic-grid",{attrs:{creatable:!1,deletable:!1,hideActions:!0,service:e.service,gridName:e.gridName,headers:e.gridHeaders,itemRowBackground:e.itemRowBackground,itemKey:"global_uuid",toolbarTitle:e.toolbarTitle,extraConfig:e.extraConfig,isHeaderConfigurable:!0},scopedSlots:e._u([{key:"gridItemActions",fn:function(t){var r=t.item,s=t.refreshGrid;return[n("icon-button",{attrs:{title:"Sync Logs",icon:"fa-refresh",color:"white",onClick:function(){return e.toggleDialog(e.dialogNames.syncLogs,r,s)}}})]}}])})],1)],1)],1),e._v(" "),e.selectedItem?n("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialog[e.dialogNames.syncLogs],callback:function(t){e.$set(e.dialog,e.dialogNames.syncLogs,t)},expression:"dialog[dialogNames.syncLogs]"}},[e.dialog[e.dialogNames.syncLogs]?n("sync-log-form",{attrs:{refreshGrid:e.refreshGridCb,onCancel:function(){return e.closeDialog(e.dialogNames.syncLogs)},item:e.selectedItem}}):e._e()],1):e._e()],1)}),[],!1,null,null,null);t.default=b.exports},zEfX:function(e,t,n){"use strict";var r={name:"form-error",props:["errors","error"],computed:{isArray:function(){return Array.isArray(this.errors)&&this.errors.length>0||!1},isObject:function(){return this.error&&this.error.hasOwnProperty("message")}}},s=n("psIG"),o=Object(s.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-left ma-5"},[e.isArray?n("div",e._l(e.errors,(function(t){return n("v-alert",{key:t.index,attrs:{dense:"",outlined:"",type:"error"}},[n("span",[e._v(e._s(t.message))])])})),1):e._e(),e._v(" "),e.isObject&&e.error.message?n("div",[n("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[n("span",[e._v(e._s(e.error.message))])])],1):e._e()])}),[],!1,null,null,null);t.a=o.exports}}]);
//# sourceMappingURL=63.cfebbc4654ae1d72c00c.js.map