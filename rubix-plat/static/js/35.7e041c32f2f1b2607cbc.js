(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{A8UK:function(e,t,r){"use strict";r.r(t);var a=r("Kz1y"),s=r.n(a),n=r("TcPG"),i=r.n(n),o=r("BgpN"),u=r("oGAK"),l=r("2SyR"),c=r("oujF"),d=r("CfmX"),m=r("97BG"),f=r("ZXQ1"),v=r("uzYq"),p=r("oCli").a.rfFNCStreams(),h={viewWriters:"viewWriters"},b=i()({},h.viewWriters,(function(e,t,r){return u.a.rfWriters.replace(":flowNetworkId",e).replace(":streamId",t).replace(":consumerId",r)})),C={name:"consumers-grid",components:{GenericGrid:d.a,ConsumersForm:o.a,IconButton:l.a,TextButton:c.a},props:["params","getDataCb","streamSourceId"],data:function(){return{producers:[],dialogNames:h,gridName:m.f,service:f.a,toolbarTitle:"Consumers",gridHeaders:[{text:"Name",align:"center",value:"name",sortable:!0},{text:"Actions",align:"center",value:"actions",sortable:!0}]}},mounted:function(){},computed:{streamId:function(){return this.$route.params.streamId},flowNetworkId:function(){return this.$route.params.flowNetworkId}},watch:{streamSourceId:function(e,t){e!=t&&e&&this.fetchAllProducers()}},methods:{fetchAllProducers:function(){var e=this;(function(e,t){var r=p+"/"+e+"/streams/"+t+"/producers";return v.a.get(r)})(this.$route.params.flowNetworkId,this.streamSourceId).then((function(t){e.producers=t.producers||[]}))},redirectTo:function(e,t){var r=t.uuid;if(r){var a=b[e];"function"==typeof a&&this.$router.push({path:a(this.flowNetworkId,this.streamId,r)})}}}},w=r("psIG"),g=Object(w.a)(C,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("generic-grid",{attrs:{gridName:e.gridName,isHeaderConfigurable:!0,params:e.params,service:e.service,headers:e.gridHeaders,getDataCb:e.getDataCb,toolbarTitle:e.toolbarTitle},scopedSlots:e._u([{key:"routeLinkName",fn:function(t){var a=t.item;return[r("text-button",{attrs:{text:a.name,onClick:function(){return e.redirectTo(e.dialogNames.viewWriters,a)}}})]}},{key:"createForm",fn:function(t){var a=t.onSave,s=t.onClose,n=t.isOpen,i=t.isSaving;return[n?r("consumers-form",{attrs:{producers:e.producers,streamId:e.streamId,isEdit:!1,onSave:a,onCancel:s,isSaving:i}}):e._e()]}},{key:"editForm",fn:function(t){var a=t.onSave,s=t.item,n=t.onClose,i=t.isOpen,o=t.isSaving;return[i?r("consumers-form",{attrs:{item:s,streamId:e.streamId,isEdit:!0,onSave:a,onCancel:n,producers:e.producers,isSaving:o}}):e._e()]}}])})],1)}),[],!1,null,null,null).exports,_=r("Ui9F"),I=r("VNy9"),k=r("edSL"),x=r.n(k),S={name:"consumers",components:{IconButton:l.a,ConsumersGrid:g,TooltipIconButton:_.a,Breadcrumbs:I.a},data:function(){return{params:{uuid:null,with_consumers:!0},gridData:{},breadcrumbItems:[],renderCount:0,streamSourceId:null}},watch:{"$route.params.streamId":function(e,t){e!=t&&(this.renderCount++,this.initialize())}},mounted:function(){this.initialize()},methods:{initialize:function(){this.params=s()({},this.params,{uuid:this.$route.params.streamId})},onBack:function(){this.$router.go(-1)},getDataCb:function(e){this.gridData=e,this.streamSourceId=x()(e,"extraData.source_uuid",null),this.updateBreadCrumbs()},updateBreadCrumbs:function(){this.breadcrumbItems=[],this.breadcrumbItems.push({text:"Flow Network Clone",align:"center",disabled:!0,link:u.a.rfFlowNetworkClone}),this.breadcrumbItems.push({text:this.$route.params.flowNetworkId,align:"center",disabled:!1}),this.breadcrumbItems.push({text:"Streams Clone",align:"center",disabled:!0,link:u.a.rfFlowNetworkStreamsClone.replace(":flowNetworkId",this.$route.params.flowNetworkId)}),this.breadcrumbItems.push({text:this.$route.params.streamId,align:"center",disabled:!1}),this.breadcrumbItems.push({text:"Consumers",align:"center",disabled:!0})}}},N=Object(w.a)(S,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{key:e.renderCount,attrs:{outlined:""}},[r("v-card-title",[r("v-btn",{staticClass:"mr-1",attrs:{icon:"",medium:""},on:{click:e.onBack}},[r("v-icon",{attrs:{medium:""}},[e._v(" mdi-arrow-left ")])],1),e._v("\n    Consumers\n  ")],1),e._v(" "),r("v-card-text",[r("breadcrumbs",{attrs:{items:e.breadcrumbItems}}),e._v(" "),r("v-row",{attrs:{"no-gutter":""}},[r("v-col",{attrs:{cols:"12",lg:"12",xl:"12",md:"12",sm:"12",xs:"12"}},[e.params.uuid?r("consumers-grid",{attrs:{streamSourceId:e.streamSourceId,params:e.params,getDataCb:e.getDataCb}}):e._e()],1)],1)],1)],1)}),[],!1,null,null,null);t.default=N.exports},BgpN:function(e,t,r){"use strict";var a=r("Kz1y"),s=r.n(a),n=(r("yEOx"),{name:"flow-consumers-form",props:["isEdit","onCancel","onSave","item","isSaving","streamId","producers"],data:function(){return{rules:{required:function(e){return!!e||"Required."},numberRule:function(e){return!isNaN(parseFloat(e))||"Required."}},valid:!1,formValues:s()({},{name:"consumer",enable:!0,producer_uuid:null,stream_clone_uuid:null})}},computed:{lowerCaseTitle:function(){return"consumers"},titleCase:function(){return"Consumers"},title:function(){return this.isEdit?"Edit "+this.titleCase:"Create "+this.titleCase},saveTitle:function(){return this.isEdit?"Save":"Create"}},mounted:function(){this.isEdit&&this.item&&(this.formValues=s()({},this.formValues,this.item)),!this.isEdit&&this.streamId&&(this.formValues=s()({},this.formValues,{stream_clone_uuid:this.streamId}))},methods:{cleanUp:function(){this.formValues={},"function"==typeof this.onCancel&&this.onCancel()},onSubmit:function(){var e=this;if(this.$refs.form.validate()){if("function"!=typeof this.onSave)throw new Error(this.lowerCaseTitle+" form onSave function not passed");return this.onSave(this.formValues).then((function(){e.$toasted.show("Successfully "+(e.isEdit?"updated":"created")+" "+e.lowerCaseTitle+"."),e.cleanUp(!0)})).catch((function(t){e.$toasted.show("Failed to "+(e.isEdit?"update":"create")+" "+e.lowerCaseTitle+".",{type:"error"})}))}}}}),i=r("psIG"),o=Object(i.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.title))])]),e._v(" "),r("v-card-text",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",{attrs:{dense:""}},[r("v-col",{attrs:{cols:"8"}},[r("v-text-field",{attrs:{required:"",label:"Name",rules:[e.rules.required]},model:{value:e.formValues.name,callback:function(t){e.$set(e.formValues,"name",t)},expression:"formValues.name"}})],1),e._v(" "),r("v-col",{attrs:{cols:"2"}},[r("v-switch",{attrs:{label:"Enable"},model:{value:e.formValues.enable,callback:function(t){e.$set(e.formValues,"enable",t)},expression:"formValues.enable"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-autocomplete",{attrs:{chips:"",clearable:"","small-chips":"",label:"Producer","item-value":"uuid","item-text":"name",items:e.producers,"deletable-chips":""},model:{value:e.formValues.producer_uuid,callback:function(t){e.$set(e.formValues,"producer_uuid",t)},expression:"formValues.producer_uuid"}})],1)],1)],1)],1),e._v(" "),r("v-spacer"),e._v(" "),r("v-card-actions",{staticClass:"align-end justify-end"},[r("v-btn",{attrs:{color:"darken-1",text:""},on:{click:e.onCancel}},[e._v(" Cancel ")]),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",loading:e.isSaving,text:""},on:{click:function(t){return e.onSubmit(e.formValues)}}},[e._v(" "+e._s(e.saveTitle)+" ")])],1)],1)}),[],!1,null,null,null);t.a=o.exports},VNy9:function(e,t,r){"use strict";var a={name:"breadcrumbs",props:["items"]},s=r("psIG"),n=Object(s.a)(a,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-breadcrumbs",{staticClass:"breadcrumbs",attrs:{items:e.items},scopedSlots:e._u([{key:"item",fn:function(t){var a=t.item;return[r("v-breadcrumbs-item",{staticClass:"breadcrumbs-item-text",attrs:{to:a.link,exact:""}},[e._v(" "+e._s(a.text)+" ")])]}}])})}),[],!1,null,"04244946",null);t.a=n.exports},ZXQ1:function(e,t,r){"use strict";r.d(t,"a",(function(){return I}));var a=r("tZmG"),s=r.n(a),n=r("YUSd"),i=r.n(n),o=r("Zv/C"),u=r.n(o),l=r("2lBV"),c=r.n(l),d=r("Dkg+"),m=r.n(d),f=r("Gjrs"),v=r.n(f),p=r("DeKB"),h=r("oCli"),b=r("uzYq"),C=r("PWxN"),w=r.n(C),g=r("NWgQ"),_=r.n(g),I=new(function(e){function t(){u()(this,t);var e=m()(this,(t.__proto__||i()(t)).call(this,h.a.rfConsumers));return e.fetch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.uuid||e.id;if(!t)throw new Error("Stream Id is required for fetching consumers of streams");var r=h.a.rfStreamsClone(t);return(e=w()(e,["uuid","id"]))&&s()(e).length>0&&(r=r+"?"+_.a.stringify(e)),b.a.get(r).then((function(e){return{dataItems:e.consumers,extraData:w()(e,["consumers"])}}))},e}return v()(t,e),c()(t,[{key:"fetchAll",value:function(){var e=h.a.rfConsumers();return b.a.get(e)}}]),t}(p.a))},oujF:function(e,t,r){"use strict";var a={name:"text-button",props:["onClick","text"]},s=r("psIG"),n=Object(s.a)(a,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-btn",{staticClass:"ma-1",attrs:{link:"",color:"nubeGreen",plain:""},on:{click:e.onClick}},[r("span",{staticClass:"btn-text"},[e._v(e._s(e.text))])])}),[],!1,null,null,null);t.a=n.exports}}]);
//# sourceMappingURL=35.7e041c32f2f1b2607cbc.js.map